(self.webpackChunk_jupyrdf_jupyter_elk=self.webpackChunk_jupyrdf_jupyter_elk||[]).push([[478],{7338:function(t){t.exports=function(){"use strict";return function(t){var e,n,o=document,r=o.createElement("div"),i=r.style,a=navigator.userAgent,s=-1!==a.indexOf("Firefox")&&-1!==a.indexOf("Mobile"),c=t.debounceWaitMs||0,u=t.preventSubmit||!1,d=s?"input":"keyup",l=[],p="",f=2,h=t.showOnFocus,y=0;if(void 0!==t.minLength&&(f=t.minLength),!t.input)throw new Error("input undefined");var g=t.input;function v(){n&&window.clearTimeout(n)}function m(){return!!r.parentNode}function b(){var t;y++,l=[],p="",e=void 0,(t=r.parentNode)&&t.removeChild(r)}function _(){for(;r.firstChild;)r.removeChild(r.firstChild);var n=function(t,e){var n=o.createElement("div");return n.textContent=t.label||"",n};t.render&&(n=t.render);var a=function(t,e){var n=o.createElement("div");return n.textContent=t,n};t.renderGroup&&(a=t.renderGroup);var s=o.createDocumentFragment(),c="#9?$";if(l.forEach((function(o){if(o.group&&o.group!==c){c=o.group;var r=a(o.group,p);r&&(r.className+=" group",s.appendChild(r))}var i=n(o,p);i&&(i.addEventListener("click",(function(e){t.onSelect(o,g),b(),e.preventDefault(),e.stopPropagation()})),o===e&&(i.className+=" selected"),s.appendChild(i))})),r.appendChild(s),l.length<1){if(!t.emptyMsg)return void b();var u=o.createElement("div");u.className="empty",u.textContent=t.emptyMsg,r.appendChild(u)}r.parentNode||o.body.appendChild(r),function(){if(m()){i.height="auto",i.width=g.offsetWidth+"px";var e=g.getBoundingClientRect(),n=e.top+g.offsetHeight,o=window.innerHeight-n;o<0&&(o=0),i.top=n+"px",i.bottom="",i.left=e.left+"px",i.maxHeight=o+"px",t.customize&&t.customize(g,e,r,o)}}(),function(){var t=r.getElementsByClassName("selected");if(t.length>0){var e=t[0],n=e.previousElementSibling;if(n&&-1!==n.className.indexOf("group")&&!n.previousElementSibling&&(e=n),e.offsetTop<r.scrollTop)r.scrollTop=e.offsetTop;else{var o=e.offsetTop+e.offsetHeight,i=r.scrollTop+r.offsetHeight;o>i&&(r.scrollTop+=o-i)}}}()}function w(){m()&&_()}function P(){w()}function S(t){t.target!==r?w():t.preventDefault()}function O(t){for(var e=t.which||t.keyCode||0,n=0,o=[38,13,27,39,37,16,17,18,20,91,9];n<o.length;n++)if(e===o[n])return;40===e&&m()||R(0)}function E(n){var o=n.which||n.keyCode||0;if(38===o||40===o||27===o){var r=m();if(27===o)b();else{if(!m||l.length<1)return;38===o?function(){if(l.length<1)e=void 0;else if(e===l[0])e=l[l.length-1];else for(var t=l.length-1;t>0;t--)if(e===l[t]||1===t){e=l[t-1];break}}():function(){if(l.length<1&&(e=void 0),e&&e!==l[l.length-1]){for(var t=0;t<l.length-1;t++)if(e===l[t]){e=l[t+1];break}}else e=l[0]}(),_()}return n.preventDefault(),void(r&&n.stopPropagation())}13===o&&(e&&(t.onSelect(e,g),b()),u&&n.preventDefault())}function x(){h&&R(1)}function R(o){var r=++y,i=g.value;i.length>=f||1===o?(v(),n=window.setTimeout((function(){t.fetch(i,(function(t){y===r&&t&&(p=i,e=(l=t).length>0?l[0]:void 0,_())}),0)}),0===o?c:0)):b()}function I(){setTimeout((function(){o.activeElement!==g&&b()}),200)}return r.className="autocomplete "+(t.className||""),i.position="fixed",r.addEventListener("mousedown",(function(t){t.stopPropagation(),t.preventDefault()})),g.addEventListener("keydown",E),g.addEventListener(d,O),g.addEventListener("blur",I),g.addEventListener("focus",x),window.addEventListener("resize",P),o.addEventListener("scroll",S,!0),{destroy:function(){g.removeEventListener("focus",x),g.removeEventListener("keydown",E),g.removeEventListener(d,O),g.removeEventListener("blur",I),window.removeEventListener("resize",P),o.removeEventListener("scroll",S,!0),v(),b(),y++}}}}()},3162:function(t,e,n){var o,r;void 0===(r="function"==typeof(o=function(){"use strict";function e(t,e,n){var o=new XMLHttpRequest;o.open("GET",t),o.responseType="blob",o.onload=function(){a(o.response,e,n)},o.onerror=function(){console.error("could not download file")},o.send()}function o(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function r(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,a=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype?function(t,n,a){var s=i.URL||i.webkitURL,c=document.createElement("a");n=n||t.name||"download",c.download=n,c.rel="noopener","string"==typeof t?(c.href=t,c.origin===location.origin?r(c):o(c.href)?e(t,n,a):r(c,c.target="_blank")):(c.href=s.createObjectURL(t),setTimeout((function(){s.revokeObjectURL(c.href)}),4e4),setTimeout((function(){r(c)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,n,i){if(n=n||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,i),n);else if(o(t))e(t,n,i);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout((function(){r(a)}))}}:function(t,n,o,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,o);var a="application/octet-stream"===t.type,s=/constructor/i.test(i.HTMLElement)||i.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||a&&s)&&"object"==typeof FileReader){var u=new FileReader;u.onloadend=function(){var t=u.result;t=c?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=t:location=t,r=null},u.readAsDataURL(t)}else{var d=i.URL||i.webkitURL,l=d.createObjectURL(t);r?r.location=l:location.href=l,r=null,setTimeout((function(){d.revokeObjectURL(l)}),4e4)}});i.saveAs=a.saveAs=a,t.exports=a})?o.apply(e,[]):o)||(t.exports=r)},8073:(t,e,n)=>{var o=/([\w-]+)|=|(['"])([.\s\S]*?)\2/g,r=n(1739);t.exports=function(t){var e,n=0,i=!0,a={type:"tag",name:"",voidElement:!1,attrs:{},children:[]};return t.replace(o,(function(o){if("="===o)return i=!0,void n++;i?0===n?((r[o]||"/"===t.charAt(t.length-2))&&(a.voidElement=!0),a.name=o):(a.attrs[e]=o.replace(/^['"]|['"]$/g,""),e=void 0):(e&&(a.attrs[e]=e),e=o),n++,i=!1})),a}},3039:(t,e,n)=>{var o=/(?:<!--[\S\s]*?-->|<(?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])+>)/g,r=n(8073),i=Object.create?Object.create(null):{};function a(t,e,n,o,r){var i=e.indexOf("<",o),a=e.slice(o,-1===i?void 0:i);/^\s*$/.test(a)&&(a=" "),(!r&&i>-1&&n+t.length>=0||" "!==a)&&t.push({type:"text",content:a})}t.exports=function(t,e){e||(e={}),e.components||(e.components=i);var n,s=[],c=-1,u=[],d={},l=!1;return t.replace(o,(function(o,i){if(l){if(o!=="</"+n.name+">")return;l=!1}var p,f="/"!==o.charAt(1),h=0===o.indexOf("\x3c!--"),y=i+o.length,g=t.charAt(y);f&&!h&&(c++,"tag"===(n=r(o)).type&&e.components[n.name]&&(n.type="component",l=!0),n.voidElement||l||!g||"<"===g||a(n.children,t,c,y,e.ignoreWhitespace),d[n.tagName]=n,0===c&&s.push(n),(p=u[c-1])&&p.children.push(n),u[c]=n),(h||!f||n.voidElement)&&(h||c--,!l&&"<"!==g&&g&&a(p=-1===c?s:u[c].children,t,c,y,e.ignoreWhitespace))})),!s.length&&t.length&&a(s,t,0,0,e.ignoreWhitespace),s}},9934:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6674),r=n(6867);function i(t,e,n,r,i){var a={},s="number"==typeof i,c=void 0!==i&&s?i.toString():n;if(s&&void 0!==n)throw new Error(o.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(t,e)&&(a=Reflect.getMetadata(t,e));var u=a[c];if(Array.isArray(u))for(var d=0,l=u;d<l.length;d++){var p=l[d];if(p.key===r.key)throw new Error(o.DUPLICATED_METADATA+" "+p.key.toString())}else u=[];u.push(r),a[c]=u,Reflect.defineMetadata(t,a,e)}function a(t,e){Reflect.decorate(t,e)}function s(t,e){return function(n,o){e(n,o,t)}}e.tagParameter=function(t,e,n,o){i(r.TAGGED,t,e,o,n)},e.tagProperty=function(t,e,n){i(r.TAGGED_PROP,t.constructor,e,n)},e.decorate=function(t,e,n){"number"==typeof n?a([s(n,t)],e):"string"==typeof n?Reflect.decorate([t],e,n):a([t],e)}},5744:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6674),r=n(6867),i=n(7738),a=n(9934),s=function(){function t(t){this._cb=t}return t.prototype.unwrap=function(){return this._cb()},t}();e.LazyServiceIdentifer=s,e.inject=function(t){return function(e,n,s){if(void 0===t)throw new Error(o.UNDEFINED_INJECT_ANNOTATION(e.name));var c=new i.Metadata(r.INJECT_TAG,t);"number"==typeof s?a.tagParameter(e,n,s,c):a.tagProperty(e,n,c)}}},4315:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6674),r=n(6867);e.injectable=function(){return function(t){if(Reflect.hasOwnMetadata(r.PARAM_TYPES,t))throw new Error(o.DUPLICATED_INJECTABLE_DECORATOR);var e=Reflect.getMetadata(r.DESIGN_PARAM_TYPES,t)||[];return Reflect.defineMetadata(r.PARAM_TYPES,e,t),t}}},1693:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6867),r=n(7738),i=n(9934);e.multiInject=function(t){return function(e,n,a){var s=new r.Metadata(o.MULTI_INJECT_TAG,t);"number"==typeof a?i.tagParameter(e,n,a,s):i.tagProperty(e,n,s)}}},8085:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6867),r=n(7738),i=n(9934);e.named=function(t){return function(e,n,a){var s=new r.Metadata(o.NAMED_TAG,t);"number"==typeof a?i.tagParameter(e,n,a,s):i.tagProperty(e,n,s)}}},6515:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6867),r=n(7738),i=n(9934);e.optional=function(){return function(t,e,n){var a=new r.Metadata(o.OPTIONAL_TAG,!0);"number"==typeof n?i.tagParameter(t,e,n,a):i.tagProperty(t,e,a)}}},7014:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6674),r=n(6867),i=n(7738);e.postConstruct=function(){return function(t,e,n){var a=new i.Metadata(r.POST_CONSTRUCT,e);if(Reflect.hasOwnMetadata(r.POST_CONSTRUCT,t.constructor))throw new Error(o.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(r.POST_CONSTRUCT,a,t.constructor)}}},2052:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(7738),r=n(9934);e.tagged=function(t,e){return function(n,i,a){var s=new o.Metadata(t,e);"number"==typeof a?r.tagParameter(n,i,a,s):r.tagProperty(n,i,s)}}},5638:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6867),r=n(7738),i=n(9934);e.targetName=function(t){return function(e,n,a){var s=new r.Metadata(o.NAME_TAG,t);i.tagParameter(e,n,a,s)}}},6757:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6867),r=n(7738),i=n(9934);e.unmanaged=function(){return function(t,e,n){var a=new r.Metadata(o.UNMANAGED_TAG,!0);i.tagParameter(t,e,n,a)}}},4290:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(8421),r=n(7791),i=function(){function t(t,e){this.id=r.id(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=o.BindingTypeEnum.Invalid,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=!1,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.cache=this.cache,e},t}();e.Binding=i},3184:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},6674:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",e.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",e.NULL_ARGUMENT="NULL argument",e.KEY_NOT_FOUND="Key Not Found",e.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",e.CANNOT_UNBIND="Could not unbind serviceIdentifier:",e.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",e.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",e.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",e.UNDEFINED_INJECT_ANNOTATION=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},e.CIRCULAR_DEPENDENCY="Circular dependency found:",e.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",e.INVALID_BINDING_TYPE="Invalid binding type:",e.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",e.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",e.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",e.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",e.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",e.ARGUMENTS_LENGTH_MISMATCH=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+t[0]+" must be >= than the number of constructor arguments of its base class."},e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",e.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",e.POST_CONSTRUCT_ERROR=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"@postConstruct error in class "+t[0]+": "+t[1]},e.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"It looks like there is a circular dependency in one of the '"+t[0]+"' bindings. Please investigate bindings withservice identifier '"+t[1]+"'."},e.STACK_OVERFLOW="Maximum call stack size exceeded"},8421:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"},e.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},e.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},6867:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NAMED_TAG="named",e.NAME_TAG="name",e.UNMANAGED_TAG="unmanaged",e.OPTIONAL_TAG="optional",e.INJECT_TAG="inject",e.MULTI_INJECT_TAG="multi_inject",e.TAGGED="inversify:tagged",e.TAGGED_PROP="inversify:tagged_props",e.PARAM_TYPES="inversify:paramtypes",e.DESIGN_PARAM_TYPES="design:paramtypes",e.POST_CONSTRUCT="post_construct"},1389:function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){t.done?r(t.value):new n((function(e){e(t.value)})).then(a,s)}c((o=o.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(4290),a=n(6674),s=n(8421),c=n(6867),u=n(1377),d=n(6311),l=n(1927),p=n(1860),f=n(7791),h=n(5800),y=n(5700),g=n(175),v=function(){function t(t){var e=t||{};if("object"!=typeof e)throw new Error(""+a.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===e.defaultScope)e.defaultScope=s.BindingScopeEnum.Transient;else if(e.defaultScope!==s.BindingScopeEnum.Singleton&&e.defaultScope!==s.BindingScopeEnum.Transient&&e.defaultScope!==s.BindingScopeEnum.Request)throw new Error(""+a.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===e.autoBindInjectable)e.autoBindInjectable=!1;else if("boolean"!=typeof e.autoBindInjectable)throw new Error(""+a.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===e.skipBaseClassChecks)e.skipBaseClassChecks=!1;else if("boolean"!=typeof e.skipBaseClassChecks)throw new Error(""+a.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:e.autoBindInjectable,defaultScope:e.defaultScope,skipBaseClassChecks:e.skipBaseClassChecks},this.id=f.id(),this._bindingDictionary=new g.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new u.MetadataReader}return t.merge=function(e,n){var o=new t,r=d.getBindingDictionary(o),i=d.getBindingDictionary(e),a=d.getBindingDictionary(n);function s(t,e){t.traverse((function(t,n){n.forEach((function(t){e.add(t.serviceIdentifier,t.clone())}))}))}return s(i,r),s(a,r),o},t.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this._getContainerModuleHelpersFactory(),o=0,r=t;o<r.length;o++){var i=r[o],a=n(i.id);i.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)}},t.prototype.loadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o(this,void 0,void 0,(function(){var e,n,o,i,a;return r(this,(function(r){switch(r.label){case 0:e=this._getContainerModuleHelpersFactory(),n=0,o=t,r.label=1;case 1:return n<o.length?(i=o[n],a=e(i.id),[4,i.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)]):[3,4];case 2:r.sent(),r.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},t.prototype.unload=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var o=function(t){return function(e){return e.moduleId===t}};e.forEach((function(e){var n=o(e.id);t._bindingDictionary.removeByCondition(n)}))},t.prototype.bind=function(t){var e=this.options.defaultScope||s.BindingScopeEnum.Transient,n=new i.Binding(t,e);return this._bindingDictionary.add(t,n),new p.BindingToSyntax(n)},t.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},t.prototype.unbind=function(t){try{this._bindingDictionary.remove(t)}catch(e){throw new Error(a.CANNOT_UNBIND+" "+h.getServiceIdentifierAsString(t))}},t.prototype.unbindAll=function(){this._bindingDictionary=new g.Lookup},t.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return!e&&this.parent&&(e=this.parent.isBound(t)),e},t.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,c.NAMED_TAG,e)},t.prototype.isBoundTagged=function(t,e,n){var o=!1;if(this._bindingDictionary.hasKey(t)){var r=this._bindingDictionary.get(t),i=d.createMockRequest(this,t,e,n);o=r.some((function(t){return t.constraint(i)}))}return!o&&this.parent&&(o=this.parent.isBoundTagged(t,e,n)),o},t.prototype.snapshot=function(){this._snapshots.push(y.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},t.prototype.restore=function(){var t=this._snapshots.pop();if(void 0===t)throw new Error(a.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=t.bindings,this._middleware=t.middleware},t.prototype.createChild=function(e){var n=new t(e||this.options);return n.parent=this,n},t.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce((function(t,e){return e(t)}),n)},t.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},t.prototype.get=function(t){return this._get(!1,!1,s.TargetTypeEnum.Variable,t)},t.prototype.getTagged=function(t,e,n){return this._get(!1,!1,s.TargetTypeEnum.Variable,t,e,n)},t.prototype.getNamed=function(t,e){return this.getTagged(t,c.NAMED_TAG,e)},t.prototype.getAll=function(t){return this._get(!0,!0,s.TargetTypeEnum.Variable,t)},t.prototype.getAllTagged=function(t,e,n){return this._get(!1,!0,s.TargetTypeEnum.Variable,t,e,n)},t.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,c.NAMED_TAG,e)},t.prototype.resolve=function(t){var e=this.createChild();return e.bind(t).toSelf(),e.get(t)},t.prototype._getContainerModuleHelpersFactory=function(){var t=this,e=function(t,e){t._binding.moduleId=e},n=function(n){return function(o){var r=t.rebind.bind(t)(o);return e(r,n),r}};return function(o){return{bindFunction:(r=o,function(n){var o=t.bind.bind(t)(n);return e(o,r),o}),isboundFunction:function(e){return t.isBound.bind(t)(e)},rebindFunction:n(o),unbindFunction:function(e){t.unbind.bind(t)(e)}};var r}},t.prototype._get=function(t,e,n,o,r,i){var s=null,c={avoidConstraints:t,contextInterceptor:function(t){return t},isMultiInject:e,key:r,serviceIdentifier:o,targetType:n,value:i};if(this._middleware){if(null==(s=this._middleware(c)))throw new Error(a.INVALID_MIDDLEWARE_RETURN)}else s=this._planAndResolve()(c);return s},t.prototype._planAndResolve=function(){var t=this;return function(e){var n=d.plan(t._metadataReader,t,e.isMultiInject,e.targetType,e.serviceIdentifier,e.key,e.value,e.avoidConstraints);return n=e.contextInterceptor(n),l.resolve(n)}},t}();e.Container=v},3244:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(7791);e.ContainerModule=function(t){this.id=o.id(),this.registry=t};e.AsyncContainerModule=function(t){this.id=o.id(),this.registry=t}},5700:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.of=function(e,n){var o=new t;return o.bindings=e,o.middleware=n,o},t}();e.ContainerSnapshot=n},175:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6674),r=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(t,e){if(null==t)throw new Error(o.NULL_ARGUMENT);if(null==e)throw new Error(o.NULL_ARGUMENT);var n=this._map.get(t);void 0!==n?(n.push(e),this._map.set(t,n)):this._map.set(t,[e])},t.prototype.get=function(t){if(null==t)throw new Error(o.NULL_ARGUMENT);var e=this._map.get(t);if(void 0!==e)return e;throw new Error(o.KEY_NOT_FOUND)},t.prototype.remove=function(t){if(null==t)throw new Error(o.NULL_ARGUMENT);if(!this._map.delete(t))throw new Error(o.KEY_NOT_FOUND)},t.prototype.removeByCondition=function(t){var e=this;this._map.forEach((function(n,o){var r=n.filter((function(e){return!t(e)}));r.length>0?e._map.set(o,r):e._map.delete(o)}))},t.prototype.hasKey=function(t){if(null==t)throw new Error(o.NULL_ARGUMENT);return this._map.has(t)},t.prototype.clone=function(){var e=new t;return this._map.forEach((function(t,n){t.forEach((function(t){return e.add(n,t.clone())}))})),e},t.prototype.traverse=function(t){this._map.forEach((function(e,n){t(n,e)}))},t}();e.Lookup=r},6700:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6867);e.METADATA_KEY=o;var r=n(1389);e.Container=r.Container;var i=n(8421);e.BindingScopeEnum=i.BindingScopeEnum,e.BindingTypeEnum=i.BindingTypeEnum,e.TargetTypeEnum=i.TargetTypeEnum;var a=n(3244);e.AsyncContainerModule=a.AsyncContainerModule,e.ContainerModule=a.ContainerModule;var s=n(4315);e.injectable=s.injectable;var c=n(2052);e.tagged=c.tagged;var u=n(8085);e.named=u.named;var d=n(5744);e.inject=d.inject,e.LazyServiceIdentifer=d.LazyServiceIdentifer;var l=n(6515);e.optional=l.optional;var p=n(6757);e.unmanaged=p.unmanaged;var f=n(1693);e.multiInject=f.multiInject;var h=n(5638);e.targetName=h.targetName;var y=n(7014);e.postConstruct=y.postConstruct;var g=n(1377);e.MetadataReader=g.MetadataReader;var v=n(7791);e.id=v.id;var m=n(9934);e.decorate=m.decorate;var b=n(758);e.traverseAncerstors=b.traverseAncerstors,e.taggedConstraint=b.taggedConstraint,e.namedConstraint=b.namedConstraint,e.typeConstraint=b.typeConstraint;var _=n(5800);e.getServiceIdentifierAsString=_.getServiceIdentifierAsString;var w=n(600);e.multiBindToService=w.multiBindToService},5228:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(7791),r=function(){function t(t){this.id=o.id(),this.container=t}return t.prototype.addPlan=function(t){this.plan=t},t.prototype.setCurrentRequest=function(t){this.currentRequest=t},t}();e.Context=r},7738:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6867),r=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.toString=function(){return this.key===o.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},t}();e.Metadata=r},1377:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6867),r=function(){function t(){}return t.prototype.getConstructorMetadata=function(t){return{compilerGeneratedMetadata:Reflect.getMetadata(o.PARAM_TYPES,t),userGeneratedMetadata:Reflect.getMetadata(o.TAGGED,t)||{}}},t.prototype.getPropertiesMetadata=function(t){return Reflect.getMetadata(o.TAGGED_PROP,t)||[]},t}();e.MetadataReader=r},5314:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Plan=function(t,e){this.parentContext=t,this.rootRequest=e}},6311:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(3184),r=n(6674),i=n(8421),a=n(6867),s=n(4623),c=n(5800),u=n(5228),d=n(7738),l=n(5314),p=n(2068),f=n(6748),h=n(8924);function y(t){return t._bindingDictionary}function g(t,e,n,i,a){var s,u=m(n.container,a.serviceIdentifier);return u.length===o.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof a.serviceIdentifier&&t.getConstructorMetadata(a.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(a.serviceIdentifier).toSelf(),u=m(n.container,a.serviceIdentifier)),s=e?u:u.filter((function(t){var e=new f.Request(t.serviceIdentifier,n,i,t,a);return t.constraint(e)})),function(t,e,n,i){switch(e.length){case o.BindingCount.NoBindingsAvailable:if(n.isOptional())return e;var a=c.getServiceIdentifierAsString(t),s=r.NOT_REGISTERED;throw s+=c.listMetadataForTarget(a,n),s+=c.listRegisteredBindingsForServiceIdentifier(i,a,m),new Error(s);case o.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return e;case o.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return e;throw a=c.getServiceIdentifierAsString(t),s=r.AMBIGUOUS_MATCH+" "+a,s+=c.listRegisteredBindingsForServiceIdentifier(i,a,m),new Error(s)}}(a.serviceIdentifier,s,a,n.container),s}function v(t,e,n,o,a,s){var c,u;if(null===a){c=g(t,e,o,null,s),u=new f.Request(n,o,null,c,s);var d=new l.Plan(o,u);o.addPlan(d)}else c=g(t,e,o,a,s),u=a.addChildRequest(s.serviceIdentifier,c,s);c.forEach((function(e){var n=null;if(s.isArray())n=u.addChildRequest(e.serviceIdentifier,e,s);else{if(e.cache)return;n=u}if(e.type===i.BindingTypeEnum.Instance&&null!==e.implementationType){var a=p.getDependencies(t,e.implementationType);if(!o.container.options.skipBaseClassChecks){var c=p.getBaseClassDependencyCount(t,e.implementationType);if(a.length<c){var d=r.ARGUMENTS_LENGTH_MISMATCH(p.getFunctionName(e.implementationType));throw new Error(d)}}a.forEach((function(e){v(t,!1,e.serviceIdentifier,o,n,e)}))}}))}function m(t,e){var n=[],o=y(t);return o.hasKey(e)?n=o.get(e):null!==t.parent&&(n=m(t.parent,e)),n}e.getBindingDictionary=y,e.plan=function(t,e,n,o,r,i,l,p){void 0===p&&(p=!1);var f=new u.Context(e),y=function(t,e,n,o,r,i){var s=t?a.MULTI_INJECT_TAG:a.INJECT_TAG,c=new d.Metadata(s,n),u=new h.Target(e,"",n,c);if(void 0!==r){var l=new d.Metadata(r,i);u.metadata.push(l)}return u}(n,o,r,0,i,l);try{return v(t,p,r,f,null,y),f}catch(t){throw s.isStackOverflowExeption(t)&&f.plan&&c.circularDependencyToException(f.plan.rootRequest),t}},e.createMockRequest=function(t,e,n,o){var r=new h.Target(i.TargetTypeEnum.Variable,"",e,new d.Metadata(n,o)),a=new u.Context(t);return new f.Request(e,a,null,[],r)}},8460:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.str=t}return t.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},t.prototype.endsWith=function(t){var e,n=t.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},n)},t.prototype.contains=function(t){return-1!==this.str.indexOf(t)},t.prototype.equals=function(t){return this.str===t},t.prototype.value=function(){return this.str},t}();e.QueryableString=n},2068:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(5744),r=n(6674),i=n(8421),a=n(6867),s=n(5800);e.getFunctionName=s.getFunctionName;var c=n(8924);function u(t,e,n,o){var i=t.getConstructorMetadata(n),a=i.compilerGeneratedMetadata;if(void 0===a){var s=r.MISSING_INJECTABLE_ANNOTATION+" "+e+".";throw new Error(s)}var c=i.userGeneratedMetadata,u=Object.keys(c),p=function(t,e,n,o,r){for(var i=[],a=0;a<r;a++){var s=d(a,t,e,n,o);null!==s&&i.push(s)}return i}(o,e,a,c,0===n.length&&u.length>0?u.length:n.length),f=l(t,n);return p.concat(f)}function d(t,e,n,a,s){var u=s[t.toString()]||[],d=p(u),l=!0!==d.unmanaged,f=a[t];if((f=d.inject||d.multiInject||f)instanceof o.LazyServiceIdentifer&&(f=f.unwrap()),l){if(!e&&(f===Object||f===Function||void 0===f)){var h=r.MISSING_INJECT_ANNOTATION+" argument "+t+" in class "+n+".";throw new Error(h)}var y=new c.Target(i.TargetTypeEnum.ConstructorArgument,d.targetName,f);return y.metadata=u,y}return null}function l(t,e){for(var n=t.getPropertiesMetadata(e),o=[],r=0,a=Object.keys(n);r<a.length;r++){var s=a[r],u=n[s],d=p(n[s]),f=d.targetName||s,h=d.inject||d.multiInject,y=new c.Target(i.TargetTypeEnum.ClassProperty,f,h);y.metadata=u,o.push(y)}var g=Object.getPrototypeOf(e.prototype).constructor;if(g!==Object){var v=l(t,g);o=o.concat(v)}return o}function p(t){var e={};return t.forEach((function(t){e[t.key.toString()]=t.value})),{inject:e[a.INJECT_TAG],multiInject:e[a.MULTI_INJECT_TAG],targetName:e[a.NAME_TAG],unmanaged:e[a.UNMANAGED_TAG]}}e.getDependencies=function(t,e){return u(t,s.getFunctionName(e),e,!1)},e.getBaseClassDependencyCount=function t(e,n){var o=Object.getPrototypeOf(n.prototype).constructor;if(o!==Object){var r=u(e,s.getFunctionName(o),o,!0),i=r.map((function(t){return t.metadata.filter((function(t){return t.key===a.UNMANAGED_TAG}))})),c=[].concat.apply([],i).length,d=r.length-c;return d>0?d:t(e,o)}return 0}},6748:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(7791),r=function(){function t(t,e,n,r,i){this.id=o.id(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=n,this.target=i,this.childRequests=[],this.bindings=Array.isArray(r)?r:[r],this.requestScope=null===n?new Map:null}return t.prototype.addChildRequest=function(e,n,o){var r=new t(e,this.parentContext,this,n,o);return this.childRequests.push(r),r},t}();e.Request=r},8924:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6867),r=n(7791),i=n(7738),a=n(8460),s=function(){function t(t,e,n,s){this.id=r.id(),this.type=t,this.serviceIdentifier=n,this.name=new a.QueryableString(e||""),this.metadata=new Array;var c=null;"string"==typeof s?c=new i.Metadata(o.NAMED_TAG,s):s instanceof i.Metadata&&(c=s),null!==c&&this.metadata.push(c)}return t.prototype.hasTag=function(t){for(var e=0,n=this.metadata;e<n.length;e++)if(n[e].key===t)return!0;return!1},t.prototype.isArray=function(){return this.hasTag(o.MULTI_INJECT_TAG)},t.prototype.matchesArray=function(t){return this.matchesTag(o.MULTI_INJECT_TAG)(t)},t.prototype.isNamed=function(){return this.hasTag(o.NAMED_TAG)},t.prototype.isTagged=function(){return this.metadata.some((function(t){return t.key!==o.INJECT_TAG&&t.key!==o.MULTI_INJECT_TAG&&t.key!==o.NAME_TAG&&t.key!==o.UNMANAGED_TAG&&t.key!==o.NAMED_TAG}))},t.prototype.isOptional=function(){return this.matchesTag(o.OPTIONAL_TAG)(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(t){return t.key===o.NAMED_TAG}))[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(t){return t.key!==o.INJECT_TAG&&t.key!==o.MULTI_INJECT_TAG&&t.key!==o.NAME_TAG&&t.key!==o.UNMANAGED_TAG&&t.key!==o.NAMED_TAG})):null},t.prototype.matchesNamedTag=function(t){return this.matchesTag(o.NAMED_TAG)(t)},t.prototype.matchesTag=function(t){var e=this;return function(n){for(var o=0,r=e.metadata;o<r.length;o++){var i=r[o];if(i.key===t&&i.value===n)return!0}return!1}},t}();e.Target=s},2279:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6674),r=n(8421),i=n(6867);e.resolveInstance=function(t,e,n){var a,s,c=null;e.length>0?(s=e.filter((function(t){return null!==t.target&&t.target.type===r.TargetTypeEnum.ConstructorArgument})).map(n),c=function(t,e,n){var o=e.filter((function(t){return null!==t.target&&t.target.type===r.TargetTypeEnum.ClassProperty})),i=o.map(n);return o.forEach((function(e,n){var o;o=e.target.name.value();var r=i[n];t[o]=r})),t}(c=new((a=t).bind.apply(a,[void 0].concat(s))),e,n)):c=new t;return function(t,e){if(Reflect.hasMetadata(i.POST_CONSTRUCT,t)){var n=Reflect.getMetadata(i.POST_CONSTRUCT,t);try{e[n.value]()}catch(e){throw new Error(o.POST_CONSTRUCT_ERROR(t.name,e.message))}}}(t,c),c}},1927:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6674),r=n(8421),i=n(4623),a=n(5800),s=n(2279),c=function(t,e,n){try{return n()}catch(n){throw i.isStackOverflowExeption(n)?new Error(o.CIRCULAR_DEPENDENCY_IN_FACTORY(t,e.toString())):n}},u=function(t){return function(e){e.parentContext.setCurrentRequest(e);var n=e.bindings,i=e.childRequests,d=e.target&&e.target.isArray(),l=!(e.parentRequest&&e.parentRequest.target&&e.target&&e.parentRequest.target.matchesArray(e.target.serviceIdentifier));if(d&&l)return i.map((function(e){return u(t)(e)}));var p=null;if(!e.target.isOptional()||0!==n.length){var f=n[0],h=f.scope===r.BindingScopeEnum.Singleton,y=f.scope===r.BindingScopeEnum.Request;if(h&&f.activated)return f.cache;if(y&&null!==t&&t.has(f.id))return t.get(f.id);if(f.type===r.BindingTypeEnum.ConstantValue)p=f.cache;else if(f.type===r.BindingTypeEnum.Function)p=f.cache;else if(f.type===r.BindingTypeEnum.Constructor)p=f.implementationType;else if(f.type===r.BindingTypeEnum.DynamicValue&&null!==f.dynamicValue)p=c("toDynamicValue",f.serviceIdentifier,(function(){return f.dynamicValue(e.parentContext)}));else if(f.type===r.BindingTypeEnum.Factory&&null!==f.factory)p=c("toFactory",f.serviceIdentifier,(function(){return f.factory(e.parentContext)}));else if(f.type===r.BindingTypeEnum.Provider&&null!==f.provider)p=c("toProvider",f.serviceIdentifier,(function(){return f.provider(e.parentContext)}));else{if(f.type!==r.BindingTypeEnum.Instance||null===f.implementationType){var g=a.getServiceIdentifierAsString(e.serviceIdentifier);throw new Error(o.INVALID_BINDING_TYPE+" "+g)}p=s.resolveInstance(f.implementationType,i,u(t))}return"function"==typeof f.onActivation&&(p=f.onActivation(e.parentContext,p)),h&&(f.cache=p,f.activated=!0),y&&null!==t&&!t.has(f.id)&&t.set(f.id,p),p}}};e.resolve=function(t){return u(t.plan.rootRequest.requestScope)(t.plan.rootRequest)}},3366:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(8421),r=n(1325),i=function(){function t(t){this._binding=t}return t.prototype.inRequestScope=function(){return this._binding.scope=o.BindingScopeEnum.Request,new r.BindingWhenOnSyntax(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=o.BindingScopeEnum.Singleton,new r.BindingWhenOnSyntax(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=o.BindingScopeEnum.Transient,new r.BindingWhenOnSyntax(this._binding)},t}();e.BindingInSyntax=i},9812:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(3366),r=n(1811),i=n(8370),a=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new i.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding),this._bindingInSyntax=new o.BindingInSyntax(t)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingInWhenOnSyntax=a},1811:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(8370),r=function(){function t(t){this._binding=t}return t.prototype.onActivation=function(t){return this._binding.onActivation=t,new o.BindingWhenSyntax(this._binding)},t}();e.BindingOnSyntax=r},1860:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6674),r=n(8421),i=n(9812),a=n(1325),s=function(){function t(t){this._binding=t}return t.prototype.to=function(t){return this._binding.type=r.BindingTypeEnum.Instance,this._binding.implementationType=t,new i.BindingInWhenOnSyntax(this._binding)},t.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+o.INVALID_TO_SELF_VALUE);var t=this._binding.serviceIdentifier;return this.to(t)},t.prototype.toConstantValue=function(t){return this._binding.type=r.BindingTypeEnum.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toDynamicValue=function(t){return this._binding.type=r.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new i.BindingInWhenOnSyntax(this._binding)},t.prototype.toConstructor=function(t){return this._binding.type=r.BindingTypeEnum.Constructor,this._binding.implementationType=t,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toFactory=function(t){return this._binding.type=r.BindingTypeEnum.Factory,this._binding.factory=t,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toFunction=function(t){if("function"!=typeof t)throw new Error(o.INVALID_FUNCTION_BINDING);var e=this.toConstantValue(t);return this._binding.type=r.BindingTypeEnum.Function,e},t.prototype.toAutoFactory=function(t){return this._binding.type=r.BindingTypeEnum.Factory,this._binding.factory=function(e){return function(){return e.container.get(t)}},new a.BindingWhenOnSyntax(this._binding)},t.prototype.toProvider=function(t){return this._binding.type=r.BindingTypeEnum.Provider,this._binding.provider=t,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toService=function(t){this.toDynamicValue((function(e){return e.container.get(t)}))},t}();e.BindingToSyntax=s},1325:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1811),r=n(8370),i=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new r.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new o.BindingOnSyntax(this._binding)}return t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingWhenOnSyntax=i},8370:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1811),r=n(758),i=function(){function t(t){this._binding=t}return t.prototype.when=function(t){return this._binding.constraint=t,new o.BindingOnSyntax(this._binding)},t.prototype.whenTargetNamed=function(t){return this._binding.constraint=r.namedConstraint(t),new o.BindingOnSyntax(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){return null!==t.target&&!t.target.isNamed()&&!t.target.isTagged()},new o.BindingOnSyntax(this._binding)},t.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=r.taggedConstraint(t)(e),new o.BindingOnSyntax(this._binding)},t.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(e){return r.typeConstraint(t)(e.parentRequest)},new o.BindingOnSyntax(this._binding)},t.prototype.whenParentNamed=function(t){return this._binding.constraint=function(e){return r.namedConstraint(t)(e.parentRequest)},new o.BindingOnSyntax(this._binding)},t.prototype.whenParentTagged=function(t,e){return this._binding.constraint=function(n){return r.taggedConstraint(t)(e)(n.parentRequest)},new o.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(e){return r.traverseAncerstors(e,r.typeConstraint(t))},new o.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(e){return!r.traverseAncerstors(e,r.typeConstraint(t))},new o.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(e){return r.traverseAncerstors(e,r.namedConstraint(t))},new o.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(e){return!r.traverseAncerstors(e,r.namedConstraint(t))},new o.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._binding.constraint=function(n){return r.traverseAncerstors(n,r.taggedConstraint(t)(e))},new o.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorTagged=function(t,e){return this._binding.constraint=function(n){return!r.traverseAncerstors(n,r.taggedConstraint(t)(e))},new o.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(e){return r.traverseAncerstors(e,t)},new o.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(e){return!r.traverseAncerstors(e,t)},new o.BindingOnSyntax(this._binding)},t}();e.BindingWhenSyntax=i},758:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6867),r=n(7738),i=function(t,e){var n=t.parentRequest;return null!==n&&(!!e(n)||i(n,e))};e.traverseAncerstors=i;var a=function(t){return function(e){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(t)(e)};return n.metaData=new r.Metadata(t,e),n}};e.taggedConstraint=a;var s=a(o.NAMED_TAG);e.namedConstraint=s,e.typeConstraint=function(t){return function(e){var n=null;if(null!==e){if(n=e.bindings[0],"string"==typeof t)return n.serviceIdentifier===t;var o=e.bindings[0].implementationType;return t===o}return!1}}},600:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiBindToService=function(t){return function(e){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return n.forEach((function(n){return t.bind(n).toService(e)}))}}}},4623:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6674);e.isStackOverflowExeption=function(t){return t instanceof RangeError||t.message===o.STACK_OVERFLOW}},7791:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=0;e.id=function(){return n++}},5800:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6674);function r(t){return"function"==typeof t?t.name:"symbol"==typeof t?t.toString():t}function i(t,e){return null!==t.parentRequest&&(t.parentRequest.serviceIdentifier===e||i(t.parentRequest,e))}function a(t){if(t.name)return t.name;var e=t.toString(),n=e.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+e}e.getServiceIdentifierAsString=r,e.listRegisteredBindingsForServiceIdentifier=function(t,e,n){var o="",r=n(t,e);return 0!==r.length&&(o="\nRegistered bindings:",r.forEach((function(t){var e="Object";null!==t.implementationType&&(e=a(t.implementationType)),o=o+"\n "+e,t.constraint.metaData&&(o=o+" - "+t.constraint.metaData)}))),o},e.circularDependencyToException=function t(e){e.childRequests.forEach((function(e){if(i(e,e.serviceIdentifier)){var n=function(t){return function t(e,n){void 0===n&&(n=[]);var o=r(e.serviceIdentifier);return n.push(o),null!==e.parentRequest?t(e.parentRequest,n):n}(t).reverse().join(" --\x3e ")}(e);throw new Error(o.CIRCULAR_DEPENDENCY+" "+n)}t(e)}))},e.listMetadataForTarget=function(t,e){if(e.isTagged()||e.isNamed()){var n="",o=e.getNamedTag(),r=e.getCustomTags();return null!==o&&(n+=o.toString()+"\n"),null!==r&&r.forEach((function(t){n+=t.toString()+"\n"}))," "+t+"\n "+t+" - "+n}return" "+t},e.getFunctionName=a},1989:(t,e,n)=>{var o=n(1789),r=n(401),i=n(7667),a=n(1327),s=n(1866);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}c.prototype.clear=o,c.prototype.delete=r,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,t.exports=c},8407:(t,e,n)=>{var o=n(7040),r=n(4125),i=n(2117),a=n(7518),s=n(4705);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}c.prototype.clear=o,c.prototype.delete=r,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,t.exports=c},7071:(t,e,n)=>{var o=n(852)(n(5639),"Map");t.exports=o},3369:(t,e,n)=>{var o=n(4785),r=n(1285),i=n(6e3),a=n(9916),s=n(5265);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}c.prototype.clear=o,c.prototype.delete=r,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,t.exports=c},8668:(t,e,n)=>{var o=n(3369),r=n(619),i=n(2385);function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new o;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=r,a.prototype.has=i,t.exports=a},2705:(t,e,n)=>{var o=n(5639).Symbol;t.exports=o},6874:t=>{t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},7443:(t,e,n)=>{var o=n(2118);t.exports=function(t,e){return!(null==t||!t.length)&&o(t,e,0)>-1}},1196:t=>{t.exports=function(t,e,n){for(var o=-1,r=null==t?0:t.length;++o<r;)if(n(e,t[o]))return!0;return!1}},9932:t=>{t.exports=function(t,e){for(var n=-1,o=null==t?0:t.length,r=Array(o);++n<o;)r[n]=e(t[n],n,t);return r}},2488:t=>{t.exports=function(t,e){for(var n=-1,o=e.length,r=t.length;++n<o;)t[r+n]=e[n];return t}},8470:(t,e,n)=>{var o=n(7813);t.exports=function(t,e){for(var n=t.length;n--;)if(o(t[n][0],e))return n;return-1}},731:(t,e,n)=>{var o=n(8668),r=n(7443),i=n(1196),a=n(9932),s=n(1717),c=n(4757);t.exports=function(t,e,n,u){var d=-1,l=r,p=!0,f=t.length,h=[],y=e.length;if(!f)return h;n&&(e=a(e,s(n))),u?(l=i,p=!1):e.length>=200&&(l=c,p=!1,e=new o(e));t:for(;++d<f;){var g=t[d],v=null==n?g:n(g);if(g=u||0!==g?g:0,p&&v==v){for(var m=y;m--;)if(e[m]===v)continue t;h.push(g)}else l(e,v,u)||h.push(g)}return h}},1848:t=>{t.exports=function(t,e,n,o){for(var r=t.length,i=n+(o?1:-1);o?i--:++i<r;)if(e(t[i],i,t))return i;return-1}},1078:(t,e,n)=>{var o=n(2488),r=n(7285);t.exports=function t(e,n,i,a,s){var c=-1,u=e.length;for(i||(i=r),s||(s=[]);++c<u;){var d=e[c];n>0&&i(d)?n>1?t(d,n-1,i,a,s):o(s,d):a||(s[s.length]=d)}return s}},4239:(t,e,n)=>{var o=n(2705),r=n(9607),i=n(2333),a=o?o.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?r(t):i(t)}},2118:(t,e,n)=>{var o=n(1848),r=n(2722),i=n(2351);t.exports=function(t,e,n){return e==e?i(t,e,n):o(t,r,n)}},9454:(t,e,n)=>{var o=n(4239),r=n(7005);t.exports=function(t){return r(t)&&"[object Arguments]"==o(t)}},2722:t=>{t.exports=function(t){return t!=t}},8458:(t,e,n)=>{var o=n(3560),r=n(5346),i=n(3218),a=n(346),s=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,d=c.toString,l=u.hasOwnProperty,p=RegExp("^"+d.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!i(t)||r(t))&&(o(t)?p:s).test(a(t))}},5976:(t,e,n)=>{var o=n(6557),r=n(5357),i=n(61);t.exports=function(t,e){return i(r(t,e,o),t+"")}},6560:(t,e,n)=>{var o=n(5703),r=n(8777),i=n(6557),a=r?function(t,e){return r(t,"toString",{configurable:!0,enumerable:!1,value:o(e),writable:!0})}:i;t.exports=a},1717:t=>{t.exports=function(t){return function(e){return t(e)}}},4757:t=>{t.exports=function(t,e){return t.has(e)}},4429:(t,e,n)=>{var o=n(5639)["__core-js_shared__"];t.exports=o},8777:(t,e,n)=>{var o=n(852),r=function(){try{var t=o(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=r},1957:(t,e,n)=>{var o="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=o},5050:(t,e,n)=>{var o=n(7019);t.exports=function(t,e){var n=t.__data__;return o(e)?n["string"==typeof e?"string":"hash"]:n.map}},852:(t,e,n)=>{var o=n(8458),r=n(7801);t.exports=function(t,e){var n=r(t,e);return o(n)?n:void 0}},9607:(t,e,n)=>{var o=n(2705),r=Object.prototype,i=r.hasOwnProperty,a=r.toString,s=o?o.toStringTag:void 0;t.exports=function(t){var e=i.call(t,s),n=t[s];try{t[s]=void 0;var o=!0}catch(t){}var r=a.call(t);return o&&(e?t[s]=n:delete t[s]),r}},7801:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},1789:(t,e,n)=>{var o=n(4536);t.exports=function(){this.__data__=o?o(null):{},this.size=0}},401:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},7667:(t,e,n)=>{var o=n(4536),r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(o){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return r.call(e,t)?e[t]:void 0}},1327:(t,e,n)=>{var o=n(4536),r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return o?void 0!==e[t]:r.call(e,t)}},1866:(t,e,n)=>{var o=n(4536);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=o&&void 0===e?"__lodash_hash_undefined__":e,this}},7285:(t,e,n)=>{var o=n(2705),r=n(5694),i=n(1469),a=o?o.isConcatSpreadable:void 0;t.exports=function(t){return i(t)||r(t)||!!(a&&t&&t[a])}},7019:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},5346:(t,e,n)=>{var o,r=n(4429),i=(o=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+o:"";t.exports=function(t){return!!i&&i in t}},7040:t=>{t.exports=function(){this.__data__=[],this.size=0}},4125:(t,e,n)=>{var o=n(8470),r=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=o(e,t);return!(n<0||(n==e.length-1?e.pop():r.call(e,n,1),--this.size,0))}},2117:(t,e,n)=>{var o=n(8470);t.exports=function(t){var e=this.__data__,n=o(e,t);return n<0?void 0:e[n][1]}},7518:(t,e,n)=>{var o=n(8470);t.exports=function(t){return o(this.__data__,t)>-1}},4705:(t,e,n)=>{var o=n(8470);t.exports=function(t,e){var n=this.__data__,r=o(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}},4785:(t,e,n)=>{var o=n(1989),r=n(8407),i=n(7071);t.exports=function(){this.size=0,this.__data__={hash:new o,map:new(i||r),string:new o}}},1285:(t,e,n)=>{var o=n(5050);t.exports=function(t){var e=o(this,t).delete(t);return this.size-=e?1:0,e}},6e3:(t,e,n)=>{var o=n(5050);t.exports=function(t){return o(this,t).get(t)}},9916:(t,e,n)=>{var o=n(5050);t.exports=function(t){return o(this,t).has(t)}},5265:(t,e,n)=>{var o=n(5050);t.exports=function(t,e){var n=o(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}},4536:(t,e,n)=>{var o=n(852)(Object,"create");t.exports=o},2333:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},5357:(t,e,n)=>{var o=n(6874),r=Math.max;t.exports=function(t,e,n){return e=r(void 0===e?t.length-1:e,0),function(){for(var i=arguments,a=-1,s=r(i.length-e,0),c=Array(s);++a<s;)c[a]=i[e+a];a=-1;for(var u=Array(e+1);++a<e;)u[a]=i[a];return u[e]=n(c),o(t,this,u)}}},5639:(t,e,n)=>{var o=n(1957),r="object"==typeof self&&self&&self.Object===Object&&self,i=o||r||Function("return this")();t.exports=i},619:t=>{t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},2385:t=>{t.exports=function(t){return this.__data__.has(t)}},61:(t,e,n)=>{var o=n(6560),r=n(1275)(o);t.exports=r},1275:t=>{var e=Date.now;t.exports=function(t){var n=0,o=0;return function(){var r=e(),i=16-(r-o);if(o=r,i>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}},2351:t=>{t.exports=function(t,e,n){for(var o=n-1,r=t.length;++o<r;)if(t[o]===e)return o;return-1}},346:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},5703:t=>{t.exports=function(t){return function(){return t}}},1966:(t,e,n)=>{var o=n(731),r=n(1078),i=n(5976),a=n(9246),s=i((function(t,e){return a(t)?o(t,r(e,1,a,!0)):[]}));t.exports=s},7813:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},6557:t=>{t.exports=function(t){return t}},5694:(t,e,n)=>{var o=n(9454),r=n(7005),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable,c=o(function(){return arguments}())?o:function(t){return r(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=c},1469:t=>{var e=Array.isArray;t.exports=e},8612:(t,e,n)=>{var o=n(3560),r=n(1780);t.exports=function(t){return null!=t&&r(t.length)&&!o(t)}},9246:(t,e,n)=>{var o=n(8612),r=n(7005);t.exports=function(t){return r(t)&&o(t)}},3560:(t,e,n)=>{var o=n(4239),r=n(3218);t.exports=function(t){if(!r(t))return!1;var e=o(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},1780:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},3218:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},7005:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},2388:t=>{"use strict";var e=["hook","on","style","class","props","attrs","dataset"],n=Array.prototype.slice;function o(t,e,n,o){for(var r={ns:e},i=0,a=o.length;i<a;i++){var s=o[i];t[s]&&(r[s]=t[s])}for(var c in t)if("key"!==c&&"classNames"!==c&&"selector"!==c){var u=c.indexOf("-");u>0?d(c.slice(0,u),c.slice(u+1),t[c]):r[c]||d(n,c,t[c])}return r;function d(t,e,n){(r[t]||(r[t]={}))[e]=n}}function r(t,e,n){for(var o=e,i=t.length;o<i;o++){var a=t[o];Array.isArray(a)?r(a,0,n):n.push(a)}}function i(t,e,n,i,a,s){return a=a||{},s=function(t){if(t)for(var e=0,n=t.length;e<n;e++)if(Array.isArray(t[e])){var o=t.slice(0,e);r(t,e,o),t=o;break}return t}(s),"string"==typeof i?function(t,e,n,r,i,a){if(i.selector&&(r+=i.selector),i.classNames){var s=i.classNames;r=r+"."+(Array.isArray(s)?s.join("."):s.replace(/\s+/g,"."))}return{sel:r,data:o(i,t,e,n),children:a.map((function(t){return"string"==typeof(e=t)||"number"==typeof e||"boolean"==typeof e||"symbol"==typeof e||null==e?{text:t}:t;var e})),key:i.key}}(t,e,n,i,a,s):function(t,e,n,o,r,i){var a;if("function"==typeof o)a=o(r,i);else if(o&&"function"==typeof o.view)a=o.view(r,i);else{if(!o||"function"!=typeof o.render)throw"JSX tag must be either a string, a function or an object with 'view' or 'render' methods";a=o.render(r,i)}return a.key=r.key,a}(0,0,0,i,a,s)}function a(t,o,r){return function(a,s,c){return(arguments.length>3||!Array.isArray(c))&&(c=n.call(arguments,2)),i(t,o||"props",r||e,a,s,c)}}t.exports={html:a(void 0),svg:a("http://www.w3.org/2000/svg","attrs"),JSX:a}},1977:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(6700),a=n(1826),s=n(3136),c=n(1194),u=n(1198),d=n(2125),l=n(6404),p=n(152),f=function(){function t(){this.postponedActions=[],this.requests=new Map}return t.prototype.initialize=function(){var t=this;return this.initialized||(this.initialized=this.actionHandlerRegistryProvider().then((function(e){t.actionHandlerRegistry=e,t.handleAction(new d.SetModelAction(c.EMPTY_ROOT))}))),this.initialized},t.prototype.dispatch=function(t){var e=this;return this.initialize().then((function(){return void 0!==e.blockUntil?e.handleBlocked(t,e.blockUntil):e.diagramLocker.isAllowed(t)?e.handleAction(t):void 0}))},t.prototype.dispatchAll=function(t){var e=this;return Promise.all(t.map((function(t){return e.dispatch(t)})))},t.prototype.request=function(t){if(!t.requestId)return Promise.reject(new Error("Request without requestId"));var e=new s.Deferred;return this.requests.set(t.requestId,e),this.dispatch(t),e.promise},t.prototype.handleAction=function(t){if(t.kind===l.UndoAction.KIND)return this.commandStack.undo().then((function(){}));if(t.kind===l.RedoAction.KIND)return this.commandStack.redo().then((function(){}));if(p.isResponseAction(t)){if(void 0!==(o=this.requests.get(t.responseId))){if(this.requests.delete(t.responseId),t.kind===p.RejectAction.KIND){var e=t;o.reject(new Error(e.message)),this.logger.warn(this,"Request with id "+t.responseId+" failed.",e.message,e.detail)}else o.resolve(t);return Promise.resolve()}this.logger.log(this,"No matching request for response",t)}var n=this.actionHandlerRegistry.get(t.kind);if(0===n.length){this.logger.warn(this,"Missing handler for action",t);var o,r=new Error("Missing handler for action '"+t.kind+"'");return p.isRequestAction(t)&&void 0!==(o=this.requests.get(t.requestId))&&(this.requests.delete(t.requestId),o.reject(r)),Promise.reject(r)}this.logger.log(this,"Handle",t);for(var i=[],a=0,s=n;a<s.length;a++){var c=s[a].handle(t);p.isAction(c)?i.push(this.dispatch(c)):void 0!==c&&(i.push(this.commandStack.execute(c)),this.blockUntil=c.blockUntil)}return Promise.all(i)},t.prototype.handleBlocked=function(t,e){var n=this;if(e(t)){this.blockUntil=void 0;var o=this.handleAction(t),r=this.postponedActions;this.postponedActions=[];for(var i=0,a=r;i<a.length;i++){var s=a[i];this.dispatch(s.action).then(s.resolve,s.reject)}return o}return this.logger.log(this,"Action is postponed due to block condition",t),new Promise((function(e,o){n.postponedActions.push({action:t,resolve:e,reject:o})}))},o([i.inject(a.TYPES.ActionHandlerRegistryProvider),r("design:type",Function)],t.prototype,"actionHandlerRegistryProvider",void 0),o([i.inject(a.TYPES.ICommandStack),r("design:type",Object)],t.prototype,"commandStack",void 0),o([i.inject(a.TYPES.ILogger),r("design:type",Object)],t.prototype,"logger",void 0),o([i.inject(a.TYPES.AnimationFrameSyncer),r("design:type",u.AnimationFrameSyncer)],t.prototype,"syncer",void 0),o([i.inject(a.TYPES.IDiagramLocker),r("design:type",Object)],t.prototype,"diagramLocker",void 0),o([i.injectable()],t)}();e.ActionDispatcher=f},6529:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(6700),u=n(1826),d=n(6530),l=n(3392),p=function(t){function e(e,n){var o=t.call(this)||this;return e.forEach((function(t){return o.register(t.actionKind,t.factory())})),n.forEach((function(t){return o.initializeActionHandler(t)})),o}return r(e,t),e.prototype.initializeActionHandler=function(t){t.initialize(this)},i([c.injectable(),s(0,c.multiInject(u.TYPES.ActionHandlerRegistration)),s(0,c.optional()),s(1,c.multiInject(u.TYPES.IActionHandlerInitializer)),s(1,c.optional()),a("design:paramtypes",[Array,Array])],e)}(d.MultiInstanceRegistry);e.ActionHandlerRegistry=p,e.configureActionHandler=function(t,e,n){if("function"==typeof n){if(!l.isInjectable(n))throw new Error("Action handlers should be @injectable: "+n.name);t.isBound(n)||t.bind(n).toSelf()}t.bind(u.TYPES.ActionHandlerRegistration).toDynamicValue((function(t){return{actionKind:e,factory:function(){return t.container.get(n)}}}))}},152:(t,e)=>{"use strict";function n(t){return void 0!==t&&t.hasOwnProperty("kind")&&"string"==typeof t.kind}Object.defineProperty(e,"__esModule",{value:!0}),e.isAction=n,e.isRequestAction=function(t){return n(t)&&t.hasOwnProperty("requestId")&&"string"==typeof t.requestId};var o=1;e.generateRequestId=function(){return(o++).toString()},e.isResponseAction=function(t){return n(t)&&t.hasOwnProperty("responseId")&&"string"==typeof t.responseId&&""!==t.responseId};var r=function(){function t(e,n,o){this.message=e,this.responseId=n,this.detail=o,this.kind=t.KIND}return t.KIND="rejectRequest",t}();e.RejectAction=r;e.LabeledAction=function(t,e,n){this.label=t,this.actions=e,this.icon=n},e.isLabeledAction=function(t){return void 0!==t&&void 0!==t.label&&void 0!==t.actions}},3083:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var r=n(6700),i=function(){function t(){}return t.prototype.isAllowed=function(t){return!0},o([r.injectable()],t)}();e.DefaultDiagramLocker=i},1198:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var r=n(6700),i=function(){function t(){this.tasks=[],this.endTasks=[],this.triggered=!1}return t.prototype.isAvailable=function(){return"function"==typeof requestAnimationFrame},t.prototype.onNextFrame=function(t){this.tasks.push(t),this.trigger()},t.prototype.onEndOfNextFrame=function(t){this.endTasks.push(t),this.trigger()},t.prototype.trigger=function(){var t=this;this.triggered||(this.triggered=!0,this.isAvailable()?requestAnimationFrame((function(e){return t.run(e)})):setTimeout((function(e){return t.run(e)})))},t.prototype.run=function(t){var e=this.tasks,n=this.endTasks;this.triggered=!1,this.tasks=[],this.endTasks=[],e.forEach((function(e){return e.call(void 0,t)})),n.forEach((function(e){return e.call(void 0,t)}))},o([r.injectable()],t)}();e.AnimationFrameSyncer=i},6692:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(4370),a=function(){function t(t,e){void 0===e&&(e=i.easeInOut),this.context=t,this.ease=e}return t.prototype.start=function(){var t=this;return new Promise((function(e,n){var o=void 0,r=0,i=function(n){var a;r++,void 0===o?(o=n,a=0):a=n-o;var s=Math.min(1,a/t.context.duration),c=t.tween(t.ease(s),t.context);t.context.modelChanged.update(c),1===s?(t.context.logger.log(t,1e3*r/t.context.duration+" fps"),e(c)):t.context.syncer.onNextFrame(i)};if(t.context.syncer.isAvailable())t.context.syncer.onNextFrame(i);else{var a=t.tween(1,t.context);e(a)}}))},t}();e.Animation=a;var s=function(t){function e(e,n,o,r){void 0===o&&(o=[]),void 0===r&&(r=i.easeInOut);var a=t.call(this,n,r)||this;return a.model=e,a.context=n,a.components=o,a.ease=r,a}return r(e,t),e.prototype.include=function(t){return this.components.push(t),this},e.prototype.tween=function(t,e){for(var n=0,o=this.components;n<o.length;n++)o[n].tween(t,e);return this.model},e}(a);e.CompoundAnimation=s},4370:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.easeInOut=function(t){return t<.5?t*t*2:1-(1-t)*(1-t)*2}},2857:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(6700),s=n(3392),c=n(1826),u=function(){function t(t){this.commandRegistration=t}return t.prototype.handle=function(t){return this.commandRegistration.factory(t)},t}();e.CommandActionHandler=u;var d=function(){function t(t){this.registrations=t}return t.prototype.initialize=function(t){this.registrations.forEach((function(e){return t.register(e.kind,new u(e))}))},o([a.injectable(),i(0,a.multiInject(c.TYPES.CommandRegistration)),i(0,a.optional()),r("design:paramtypes",[Array])],t)}();e.CommandActionHandlerInitializer=d,e.configureCommand=function(t,e){if(!s.isInjectable(e))throw new Error("Commands should be @injectable: "+e.name);t.isBound(e)||t.bind(e).toSelf(),t.bind(c.TYPES.CommandRegistration).toDynamicValue((function(t){return{kind:e.KIND,factory:function(n){var o=new a.Container;return o.parent=t.container,o.bind(c.TYPES.Action).toConstantValue(n),o.get(e)}}}))}},6990:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1826);e.overrideCommandStackOptions=function(t,e){var n=t.get(o.TYPES.CommandStackOptions);for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}},7901:function(t,e,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(6700),s=n(1826),c=n(1194),u=n(6771),d=n(1198),l=n(1864),p=function(){function t(){this.undoStack=[],this.redoStack=[],this.offStack=[]}return t.prototype.initialize=function(){this.currentPromise=Promise.resolve({main:{model:this.modelFactory.createRoot(c.EMPTY_ROOT),modelChanged:!1},hidden:{model:this.modelFactory.createRoot(c.EMPTY_ROOT),modelChanged:!1},popup:{model:this.modelFactory.createRoot(c.EMPTY_ROOT),modelChanged:!1}})},Object.defineProperty(t.prototype,"currentModel",{get:function(){return this.currentPromise.then((function(t){return t.main.model}))},enumerable:!0,configurable:!0}),t.prototype.executeAll=function(t){var e=this;return t.forEach((function(t){e.logger.log(e,"Executing",t),e.handleCommand(t,t.execute,e.mergeOrPush)})),this.thenUpdate()},t.prototype.execute=function(t){return this.logger.log(this,"Executing",t),this.handleCommand(t,t.execute,this.mergeOrPush),this.thenUpdate()},t.prototype.undo=function(){var t=this;this.undoOffStackSystemCommands(),this.undoPreceedingSystemCommands();var e=this.undoStack[this.undoStack.length-1];return void 0===e||this.isBlockUndo(e)||(this.undoStack.pop(),this.logger.log(this,"Undoing",e),this.handleCommand(e,e.undo,(function(e,n){t.redoStack.push(e)}))),this.thenUpdate()},t.prototype.redo=function(){var t=this;this.undoOffStackSystemCommands();var e=this.redoStack.pop();return void 0!==e&&(this.logger.log(this,"Redoing",e),this.handleCommand(e,e.redo,(function(e,n){t.pushToUndoStack(e)}))),this.redoFollowingSystemCommands(),this.thenUpdate()},t.prototype.handleCommand=function(t,e,n){var o=this;this.currentPromise=this.currentPromise.then((function(r){return new Promise((function(i){var a;a=t instanceof l.HiddenCommand?"hidden":t instanceof l.PopupCommand?"popup":"main";var s,c=o.createContext(r.main.model);try{s=e.call(t,c)}catch(t){o.logger.error(o,"Failed to execute command:",t),s=r[a].model}var d=f(r);s instanceof Promise?s.then((function(e){"main"===a&&n.call(o,t,c),d[a]={model:e,modelChanged:!0},i(d)})):s instanceof u.SModelRoot?("main"===a&&n.call(o,t,c),d[a]={model:s,modelChanged:!0},i(d)):("main"===a&&n.call(o,t,c),d[a]={model:s.model,modelChanged:r[a].modelChanged||s.modelChanged,cause:s.cause},i(d))}))}))},t.prototype.pushToUndoStack=function(t){this.undoStack.push(t),this.options.undoHistoryLimit>=0&&this.undoStack.length>this.options.undoHistoryLimit&&this.undoStack.splice(0,this.undoStack.length-this.options.undoHistoryLimit)},t.prototype.thenUpdate=function(){var t=this;return this.currentPromise=this.currentPromise.then((function(e){var n=f(e);return e.hidden.modelChanged&&(t.updateHidden(e.hidden.model,e.hidden.cause),n.hidden.modelChanged=!1,n.hidden.cause=void 0),e.main.modelChanged&&(t.update(e.main.model,e.main.cause),n.main.modelChanged=!1,n.main.cause=void 0),e.popup.modelChanged&&(t.updatePopup(e.popup.model,e.popup.cause),n.popup.modelChanged=!1,n.popup.cause=void 0),n})),this.currentModel},t.prototype.update=function(t,e){void 0===this.modelViewer&&(this.modelViewer=this.viewerProvider.modelViewer),this.modelViewer.update(t,e)},t.prototype.updateHidden=function(t,e){void 0===this.hiddenModelViewer&&(this.hiddenModelViewer=this.viewerProvider.hiddenModelViewer),this.hiddenModelViewer.update(t,e)},t.prototype.updatePopup=function(t,e){void 0===this.popupModelViewer&&(this.popupModelViewer=this.viewerProvider.popupModelViewer),this.popupModelViewer.update(t,e)},t.prototype.mergeOrPush=function(t,e){var n=this;if(this.isBlockUndo(t))return this.undoStack=[],this.redoStack=[],this.offStack=[],void this.pushToUndoStack(t);if(this.isPushToOffStack(t)&&this.redoStack.length>0){if(this.offStack.length>0&&(o=this.offStack[this.offStack.length-1])instanceof l.MergeableCommand&&o.merge(t,e))return;this.offStack.push(t)}else if(this.isPushToUndoStack(t)){var o;if(this.offStack.forEach((function(t){return n.undoStack.push(t)})),this.offStack=[],this.redoStack=[],this.undoStack.length>0&&(o=this.undoStack[this.undoStack.length-1])instanceof l.MergeableCommand&&o.merge(t,e))return;this.pushToUndoStack(t)}},t.prototype.undoOffStackSystemCommands=function(){for(var t=this.offStack.pop();void 0!==t;)this.logger.log(this,"Undoing off-stack",t),this.handleCommand(t,t.undo,(function(){})),t=this.offStack.pop()},t.prototype.undoPreceedingSystemCommands=function(){for(var t=this,e=this.undoStack[this.undoStack.length-1];void 0!==e&&this.isPushToOffStack(e);)this.undoStack.pop(),this.logger.log(this,"Undoing",e),this.handleCommand(e,e.undo,(function(e,n){t.redoStack.push(e)})),e=this.undoStack[this.undoStack.length-1]},t.prototype.redoFollowingSystemCommands=function(){for(var t=this,e=this.redoStack[this.redoStack.length-1];void 0!==e&&this.isPushToOffStack(e);)this.redoStack.pop(),this.logger.log(this,"Redoing ",e),this.handleCommand(e,e.redo,(function(e,n){t.pushToUndoStack(e)})),e=this.redoStack[this.redoStack.length-1]},t.prototype.createContext=function(t){return{root:t,modelChanged:this,modelFactory:this.modelFactory,duration:this.options.defaultDuration,logger:this.logger,syncer:this.syncer}},t.prototype.isPushToOffStack=function(t){return t instanceof l.SystemCommand},t.prototype.isPushToUndoStack=function(t){return!(t instanceof l.HiddenCommand)},t.prototype.isBlockUndo=function(t){return t instanceof l.ResetCommand},r([a.inject(s.TYPES.IModelFactory),i("design:type",Object)],t.prototype,"modelFactory",void 0),r([a.inject(s.TYPES.IViewerProvider),i("design:type",Object)],t.prototype,"viewerProvider",void 0),r([a.inject(s.TYPES.ILogger),i("design:type",Object)],t.prototype,"logger",void 0),r([a.inject(s.TYPES.AnimationFrameSyncer),i("design:type",d.AnimationFrameSyncer)],t.prototype,"syncer",void 0),r([a.inject(s.TYPES.CommandStackOptions),i("design:type",Object)],t.prototype,"options",void 0),r([a.postConstruct(),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"initialize",null),r([a.injectable()],t)}();function f(t){return{main:o({},t.main),hidden:o({},t.hidden),popup:o({},t.popup)}}e.CommandStack=p},1864:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var a=n(6700),s=function(){function t(){}return i([a.injectable()],t)}();e.Command=s;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.merge=function(t,e){return!1},i([a.injectable()],e)}(s);e.MergeableCommand=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.undo=function(t){return t.logger.error(this,"Cannot undo a hidden command"),t.root},e.prototype.redo=function(t){return t.logger.error(this,"Cannot redo a hidden command"),t.root},i([a.injectable()],e)}(s);e.HiddenCommand=u;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),i([a.injectable()],e)}(s);e.PopupCommand=d;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),i([a.injectable()],e)}(s);e.SystemCommand=l;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),i([a.injectable()],e)}(s);e.ResetCommand=p},9470:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var s=n(6700),c=n(1826),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.execute=function(t){var e=this.retrieveResult(t);return this.actionDispatcher.dispatch(e),{model:t.root,modelChanged:!1}},e.prototype.undo=function(t){return{model:t.root,modelChanged:!1}},e.prototype.redo=function(t){return{model:t.root,modelChanged:!1}},i([s.inject(c.TYPES.IActionDispatcher),a("design:type",Object)],e.prototype,"actionDispatcher",void 0),i([s.injectable()],e)}(n(1864).SystemCommand);e.ModelRequestCommand=u},2635:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6700),r=n(1826),i=n(5917),a=n(8049),s=n(1977),c=n(6529),u=n(7901),d=n(1194),l=n(1198),p=n(9600),f=n(2233),h=n(6589),y=n(6004),g=n(5055),v=n(6708),m=n(6265),b=n(5509),_=n(6143),w=n(2857),P=n(6714),S=n(9888),O=n(3075),E=n(2125),x=n(8842),R=n(3083),I=new o.ContainerModule((function(t,e,n){t(r.TYPES.ILogger).to(a.NullLogger).inSingletonScope(),t(r.TYPES.LogLevel).toConstantValue(a.LogLevel.warn),t(r.TYPES.SModelRegistry).to(d.SModelRegistry).inSingletonScope(),t(c.ActionHandlerRegistry).toSelf().inSingletonScope(),t(r.TYPES.ActionHandlerRegistryProvider).toProvider((function(t){return function(){return new Promise((function(e){e(t.container.get(c.ActionHandlerRegistry))}))}})),t(r.TYPES.ViewRegistry).to(v.ViewRegistry).inSingletonScope(),t(r.TYPES.IModelFactory).to(d.SModelFactory).inSingletonScope(),t(r.TYPES.IActionDispatcher).to(s.ActionDispatcher).inSingletonScope(),t(r.TYPES.IActionDispatcherProvider).toProvider((function(t){return function(){return new Promise((function(e){e(t.container.get(r.TYPES.IActionDispatcher))}))}})),t(r.TYPES.IDiagramLocker).to(R.DefaultDiagramLocker).inSingletonScope(),t(r.TYPES.IActionHandlerInitializer).to(w.CommandActionHandlerInitializer),t(r.TYPES.ICommandStack).to(u.CommandStack).inSingletonScope(),t(r.TYPES.ICommandStackProvider).toProvider((function(t){return function(){return new Promise((function(e){e(t.container.get(r.TYPES.ICommandStack))}))}})),t(r.TYPES.CommandStackOptions).toConstantValue({defaultDuration:250,undoHistoryLimit:50}),t(p.ModelViewer).toSelf().inSingletonScope(),t(p.HiddenModelViewer).toSelf().inSingletonScope(),t(p.PopupModelViewer).toSelf().inSingletonScope(),t(r.TYPES.ModelViewer).toDynamicValue((function(t){var e=t.container.createChild();return e.bind(r.TYPES.IViewer).toService(p.ModelViewer),e.bind(m.ViewerCache).toSelf(),e.get(m.ViewerCache)})).inSingletonScope(),t(r.TYPES.PopupModelViewer).toDynamicValue((function(t){var e=t.container.createChild();return e.bind(r.TYPES.IViewer).toService(p.PopupModelViewer),e.bind(m.ViewerCache).toSelf(),e.get(m.ViewerCache)})).inSingletonScope(),t(r.TYPES.HiddenModelViewer).toService(p.HiddenModelViewer),t(r.TYPES.IViewerProvider).toDynamicValue((function(t){return{get modelViewer(){return t.container.get(r.TYPES.ModelViewer)},get hiddenModelViewer(){return t.container.get(r.TYPES.HiddenModelViewer)},get popupModelViewer(){return t.container.get(r.TYPES.PopupModelViewer)}}})),t(r.TYPES.ViewerOptions).toConstantValue(f.defaultViewerOptions()),t(r.TYPES.PatcherProvider).to(p.PatcherProvider).inSingletonScope(),t(r.TYPES.DOMHelper).to(b.DOMHelper).inSingletonScope(),t(r.TYPES.ModelRendererFactory).toFactory((function(t){return function(e,n){var o=t.container.get(r.TYPES.ViewRegistry);return new p.ModelRenderer(o,e,n)}})),t(_.IdPostprocessor).toSelf().inSingletonScope(),t(r.TYPES.IVNodePostprocessor).toService(_.IdPostprocessor),t(r.TYPES.HiddenVNodePostprocessor).toService(_.IdPostprocessor),t(P.CssClassPostprocessor).toSelf().inSingletonScope(),t(r.TYPES.IVNodePostprocessor).toService(P.CssClassPostprocessor),t(r.TYPES.HiddenVNodePostprocessor).toService(P.CssClassPostprocessor),t(h.MouseTool).toSelf().inSingletonScope(),t(r.TYPES.IVNodePostprocessor).toService(h.MouseTool),t(y.KeyTool).toSelf().inSingletonScope(),t(r.TYPES.IVNodePostprocessor).toService(y.KeyTool),t(g.FocusFixPostprocessor).toSelf().inSingletonScope(),t(r.TYPES.IVNodePostprocessor).toService(g.FocusFixPostprocessor),t(r.TYPES.PopupVNodePostprocessor).toService(_.IdPostprocessor),t(h.PopupMouseTool).toSelf().inSingletonScope(),t(r.TYPES.PopupVNodePostprocessor).toService(h.PopupMouseTool),t(r.TYPES.AnimationFrameSyncer).to(l.AnimationFrameSyncer).inSingletonScope();var o={bind:t,isBound:n};w.configureCommand(o,i.InitializeCanvasBoundsCommand),t(i.CanvasBoundsInitializer).toSelf().inSingletonScope(),t(r.TYPES.IVNodePostprocessor).toService(i.CanvasBoundsInitializer),w.configureCommand(o,E.SetModelCommand),t(r.TYPES.IToolManager).to(S.ToolManager).inSingletonScope(),t(r.TYPES.KeyListener).to(S.DefaultToolsEnablingKeyListener),t(S.ToolManagerActionHandler).toSelf().inSingletonScope(),c.configureActionHandler(o,O.EnableDefaultToolsAction.KIND,S.ToolManagerActionHandler),c.configureActionHandler(o,O.EnableToolsAction.KIND,S.ToolManagerActionHandler),t(r.TYPES.UIExtensionRegistry).to(x.UIExtensionRegistry).inSingletonScope(),w.configureCommand(o,x.SetUIExtensionVisibilityCommand),t(h.MousePositionTracker).toSelf().inSingletonScope(),t(r.TYPES.MouseListener).toService(h.MousePositionTracker)}));e.default=I},5917:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(6700),u=n(1826),d=n(7073),l=n(6771),p=n(1864),f=n(5824),h=function(){function t(){}return t.prototype.decorate=function(t,e){return e instanceof l.SModelRoot&&!d.isValidDimension(e.canvasBounds)&&(this.rootAndVnode=[e,t]),t},t.prototype.postUpdate=function(){if(void 0!==this.rootAndVnode){var t=this.rootAndVnode[1].elm,e=this.rootAndVnode[0].canvasBounds;if(void 0!==t){var n=this.getBoundsInPage(t);d.almostEquals(n.x,e.x)&&d.almostEquals(n.y,e.y)&&d.almostEquals(n.width,e.width)&&d.almostEquals(n.height,e.width)||this.actionDispatcher.dispatch(new y(n))}this.rootAndVnode=void 0}},t.prototype.getBoundsInPage=function(t){var e=t.getBoundingClientRect(),n=f.getWindowScroll();return{x:e.left+n.x,y:e.top+n.y,width:e.width,height:e.height}},i([c.inject(u.TYPES.IActionDispatcher),a("design:type",Object)],t.prototype,"actionDispatcher",void 0),i([c.injectable()],t)}();e.CanvasBoundsInitializer=h;var y=function(){function t(e){this.newCanvasBounds=e,this.kind=t.KIND}return t.KIND="initializeCanvasBounds",t}();e.InitializeCanvasBoundsAction=y;var g=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return r(e,t),e.prototype.execute=function(t){return this.newCanvasBounds=this.action.newCanvasBounds,t.root.canvasBounds=this.newCanvasBounds,t.root},e.prototype.undo=function(t){return t.root},e.prototype.redo=function(t){return t.root},e.KIND=y.KIND,i([c.injectable(),s(0,c.inject(u.TYPES.Action)),a("design:paramtypes",[y])],e)}(p.SystemCommand);e.InitializeCanvasBoundsCommand=g},2125:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(6700),u=n(152),d=n(1864),l=n(1826),p=n(5917),f=function(){function t(e,n){void 0===n&&(n=""),this.options=e,this.requestId=n,this.kind=t.KIND}return t.create=function(e){return new t(e,u.generateRequestId())},t.KIND="requestModel",t}();e.RequestModelAction=f;var h=function(){function t(e,n){void 0===n&&(n=""),this.newRoot=e,this.responseId=n,this.kind=t.KIND}return t.KIND="setModel",t}();e.SetModelAction=h;var y=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return r(e,t),e.prototype.execute=function(t){return this.oldRoot=t.modelFactory.createRoot(t.root),this.newRoot=t.modelFactory.createRoot(this.action.newRoot),this.newRoot},e.prototype.undo=function(t){return this.oldRoot},e.prototype.redo=function(t){return this.newRoot},Object.defineProperty(e.prototype,"blockUntil",{get:function(){return function(t){return t.kind===p.InitializeCanvasBoundsCommand.KIND}},enumerable:!0,configurable:!0}),e.KIND=h.KIND,i([c.injectable(),s(0,c.inject(l.TYPES.Action)),a("design:paramtypes",[h])],e)}(d.ResetCommand);e.SetModelCommand=y},1194:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(6700),u=n(1826),d=n(6530),l=n(6771),p=function(){function t(){}return t.prototype.createElement=function(t,e){var n;if(this.registry.hasKey(t.type)){var o=this.registry.get(t.type,void 0);if(!(o instanceof l.SChildElement))throw new Error("Element with type "+t.type+" was expected to be an SChildElement.");n=o}else n=new l.SChildElement;return this.initializeChild(n,t,e)},t.prototype.createRoot=function(t){var e;if(this.registry.hasKey(t.type)){var n=this.registry.get(t.type,void 0);if(!(n instanceof l.SModelRoot))throw new Error("Element with type "+t.type+" was expected to be an SModelRoot.");e=n}else e=new l.SModelRoot;return this.initializeRoot(e,t)},t.prototype.createSchema=function(t){var e=this,n={};for(var o in t)if(!this.isReserved(t,o)){var r=t[o];"function"!=typeof r&&(n[o]=r)}return t instanceof l.SParentElement&&(n.children=t.children.map((function(t){return e.createSchema(t)}))),n},t.prototype.initializeElement=function(t,e){for(var n in e)if(!this.isReserved(t,n)){var o=e[n];"function"!=typeof o&&(t[n]=o)}return t},t.prototype.isReserved=function(t,e){if(["children","parent","index"].indexOf(e)>=0)return!0;var n=t;do{var o=Object.getOwnPropertyDescriptor(n,e);if(void 0!==o)return void 0!==o.get;n=Object.getPrototypeOf(n)}while(n);return!1},t.prototype.initializeParent=function(t,e){var n=this;return this.initializeElement(t,e),l.isParent(e)&&(t.children=e.children.map((function(e){return n.createElement(e,t)}))),t},t.prototype.initializeChild=function(t,e,n){return this.initializeParent(t,e),void 0!==n&&(t.parent=n),t},t.prototype.initializeRoot=function(t,e){return this.initializeParent(t,e),t.index.add(t),t},i([c.inject(u.TYPES.SModelRegistry),a("design:type",f)],t.prototype,"registry",void 0),i([c.injectable()],t)}();e.SModelFactory=p,e.EMPTY_ROOT=Object.freeze({type:"NONE",id:"EMPTY"});var f=function(t){function e(e){var n=t.call(this)||this;return e.forEach((function(t){var e=n.getDefaultFeatures(t.constr);if(!e&&t.features&&t.features.enable&&(e=[]),e){var o=h(e,t.features);n.register(t.type,(function(){var e=new t.constr;return e.features=o,e}))}else n.register(t.type,(function(){return new t.constr}))})),n}return r(e,t),e.prototype.getDefaultFeatures=function(t){var e=t;do{var n=e.DEFAULT_FEATURES;if(n)return n;e=Object.getPrototypeOf(e)}while(e)},i([c.injectable(),s(0,c.multiInject(u.TYPES.SModelElementRegistration)),s(0,c.optional()),a("design:paramtypes",[Array])],e)}(d.FactoryRegistry);function h(t,e){var n=new Set(t);if(e&&e.enable)for(var o=0,r=e.enable;o<r.length;o++){var i=r[o];n.add(i)}if(e&&e.disable)for(var a=0,s=e.disable;a<s.length;a++)i=s[a],n.delete(i);return n}e.SModelRegistry=f,e.createFeatureSet=h},8558:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1826),r=n(6771);function i(t,e,n){if(e!==n){for(;e instanceof r.SChildElement;)if(t=e.localToParent(t),(e=e.parent)===n)return t;for(var o=[];n instanceof r.SChildElement;)o.push(n),n=n.parent;if(e!==n)throw new Error("Incompatible source and target: "+e.id+", "+n.id);for(var i=o.length-1;i>=0;i--)t=o[i].parentToLocal(t)}return t}e.registerModelElement=function(t,e,n,r){t.bind(o.TYPES.SModelElementRegistration).toConstantValue({type:e,constr:n,features:r})},e.getBasicType=function(t){if(!t.type)return"";var e=t.type.indexOf(":");return e>=0?t.type.substring(0,e):t.type},e.getSubType=function(t){if(!t.type)return"";var e=t.type.indexOf(":");return e>=0?t.type.substring(e+1):t.type},e.findElement=function t(e,n){if(e.id===n)return e;if(void 0!==e.children)for(var o=0,r=e.children;o<r.length;o++){var i=t(r[o],n);if(void 0!==i)return i}},e.findParent=function(t,e){for(var n=t;void 0!==n;){if(e(n))return n;n=n instanceof r.SChildElement?n.parent:void 0}return n},e.findParentByFeature=function(t,e){for(var n=t;void 0!==n;){if(e(n))return n;n=n instanceof r.SChildElement?n.parent:void 0}return n},e.translatePoint=i,e.translateBounds=function(t,e,n){var o=i(t,e,n),r=i({x:t.x+t.width,y:t.y+t.height},e,n);return{x:o.x,y:o.y,width:r.x-o.x,height:r.y-o.y}}},6771:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(7073),a=n(9140),s=function(){function t(){}return Object.defineProperty(t.prototype,"root",{get:function(){for(var t=this;t;){if(t instanceof d)return t;t=t instanceof u?t.parent:void 0}throw new Error("Element has no root")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this.root.index},enumerable:!0,configurable:!0}),t.prototype.hasFeature=function(t){return void 0!==this.features&&this.features.has(t)},t}();e.SModelElement=s,e.isParent=function(t){var e=t.children;return void 0!==e&&e.constructor===Array};var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.children=[],e}return r(e,t),e.prototype.add=function(t,e){var n=this.children;if(void 0===e)n.push(t);else{if(e<0||e>this.children.length)throw new Error("Child index "+e+" out of bounds (0.."+n.length+")");n.splice(e,0,t)}t.parent=this,this.index.add(t)},e.prototype.remove=function(t){var e=this.children,n=e.indexOf(t);if(n<0)throw new Error("No such child "+t.id);e.splice(n,1),delete t.parent,this.index.remove(t)},e.prototype.removeAll=function(t){var e=this,n=this.children;if(void 0!==t){for(var o=n.length-1;o>=0;o--)if(t(n[o])){var r=n.splice(o,1)[0];delete r.parent,this.index.remove(r)}}else n.forEach((function(t){delete t.parent,e.index.remove(t)})),n.splice(0,n.length)},e.prototype.move=function(t,e){var n=this.children,o=n.indexOf(t);if(-1===o)throw new Error("No such child "+t.id);if(e<0||e>n.length-1)throw new Error("Child index "+e+" out of bounds (0.."+n.length+")");n.splice(o,1),n.splice(e,0,t)},e.prototype.localToParent=function(t){return i.isBounds(t)?t:{x:t.x,y:t.y,width:-1,height:-1}},e.prototype.parentToLocal=function(t){return i.isBounds(t)?t:{x:t.x,y:t.y,width:-1,height:-1}},e}(s);e.SParentElement=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(c);e.SChildElement=u;var d=function(t){function e(e){void 0===e&&(e=new f);var n=t.call(this)||this;return n.canvasBounds=i.EMPTY_BOUNDS,Object.defineProperty(n,"index",{value:e,writable:!1}),n}return r(e,t),e}(c);e.SModelRoot=d;var l="0123456789abcdefghijklmnopqrstuvwxyz";function p(t){void 0===t&&(t=8);for(var e="",n=0;n<t;n++)e+=l.charAt(Math.floor(Math.random()*l.length));return e}e.createRandomId=p;var f=function(){function t(){this.id2element=new Map}return t.prototype.add=function(t){if(t.id){if(this.contains(t))throw new Error("Duplicate ID in model: "+t.id)}else do{t.id=p()}while(this.contains(t));if(this.id2element.set(t.id,t),void 0!==t.children&&t.children.constructor===Array)for(var e=0,n=t.children;e<n.length;e++){var o=n[e];this.add(o),o instanceof u||(void 0===this.id2parent&&(this.id2parent=new Map),this.id2parent.set(o.id,t))}},t.prototype.remove=function(t){if(this.id2element.delete(t.id),void 0!==t.children&&t.children.constructor===Array)for(var e=0,n=t.children;e<n.length;e++){var o=n[e];o instanceof u||(void 0===this.id2parent&&(this.id2parent=new Map),this.id2parent.delete(o.id)),this.remove(o)}},t.prototype.contains=function(t){return this.id2element.has(t.id)},t.prototype.getById=function(t){return this.id2element.get(t)},t.prototype.getParent=function(t){if(void 0!==this.id2parent)return this.id2parent.get(t);var e=this.getById(t);return e instanceof u?e.parent:void 0},t.prototype.getRoot=function(t){if(void 0!==this.id2parent)for(var e=t;e;){var n=this.id2parent.get(e.id);if(void 0===n)return e;e=n}if(t instanceof u)return t.root;throw new Error("Element has no root")},t.prototype.getAttachedElements=function(t){return[]},t.prototype.all=function(){return a.mapIterable(this.id2element,(function(t){return t[0],t[1]}))},t}();e.SModelIndex=f},9888:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var s=n(6700),c=n(1826),u=n(3075),d=n(6004),l=n(8611),p=function(){function t(){this.tools=[],this.defaultTools=[],this.actives=[]}return Object.defineProperty(t.prototype,"managedTools",{get:function(){return this.defaultTools.concat(this.tools)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activeTools",{get:function(){return this.actives},enumerable:!0,configurable:!0}),t.prototype.disableActiveTools=function(){this.actives.forEach((function(t){return t.disable()})),this.actives.splice(0,this.actives.length)},t.prototype.enableDefaultTools=function(){this.enable(this.defaultTools.map((function(t){return t.id})))},t.prototype.enable=function(t){var e=this;this.disableActiveTools(),t.map((function(t){return e.tool(t)})).forEach((function(t){void 0!==t&&(t.enable(),e.actives.push(t))}))},t.prototype.tool=function(t){return this.managedTools.find((function(e){return e.id===t}))},t.prototype.registerDefaultTools=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,o=t;n<o.length;n++){var r=o[n];this.defaultTools.push(r)}},t.prototype.registerTools=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,o=t;n<o.length;n++){var r=o[n];this.tools.push(r)}},i([s.injectable()],t)}();e.ToolManager=p;var f=function(){function t(){}return t.prototype.handle=function(t){switch(t.kind){case u.EnableDefaultToolsAction.KIND:this.toolManager.enableDefaultTools();break;case u.EnableToolsAction.KIND:this.toolManager.enable(t.toolIds)}},i([s.inject(c.TYPES.IToolManager),a("design:type",Object)],t.prototype,"toolManager",void 0),i([s.injectable()],t)}();e.ToolManagerActionHandler=f;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.keyDown=function(t,e){return l.matchesKeystroke(e,"Escape")?[new u.EnableDefaultToolsAction]:[]},i([s.injectable()],e)}(d.KeyListener);e.DefaultToolsEnablingKeyListener=h},3075:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(e){this.toolIds=e,this.kind=t.KIND}return t.KIND="enable-tools",t}();e.EnableToolsAction=n;var o=function(){function t(){this.kind=t.KIND}return t.KIND="enable-default-tools",t}();e.EnableDefaultToolsAction=o},1826:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TYPES={Action:Symbol("Action"),IActionDispatcher:Symbol("IActionDispatcher"),IActionDispatcherProvider:Symbol("IActionDispatcherProvider"),IActionHandlerInitializer:Symbol("IActionHandlerInitializer"),ActionHandlerRegistration:Symbol("ActionHandlerRegistration"),ActionHandlerRegistryProvider:Symbol("ActionHandlerRegistryProvider"),IAnchorComputer:Symbol("IAnchor"),AnimationFrameSyncer:Symbol("AnimationFrameSyncer"),IButtonHandler:Symbol("IButtonHandler"),ICommandPaletteActionProvider:Symbol("ICommandPaletteActionProvider"),ICommandPaletteActionProviderRegistry:Symbol("ICommandPaletteActionProviderRegistry"),CommandRegistration:Symbol("CommandRegistration"),ICommandStack:Symbol("ICommandStack"),CommandStackOptions:Symbol("CommandStackOptions"),ICommandStackProvider:Symbol("ICommandStackProvider"),IContextMenuItemProvider:Symbol.for("IContextMenuProvider"),IContextMenuProviderRegistry:Symbol.for("IContextMenuProviderRegistry"),IContextMenuService:Symbol.for("IContextMenuService"),IContextMenuServiceProvider:Symbol.for("IContextMenuServiceProvider"),DOMHelper:Symbol("DOMHelper"),IDiagramLocker:Symbol("IDiagramLocker"),IEdgeRouter:Symbol("IEdgeRouter"),IEditLabelValidationDecorator:Symbol("IEditLabelValidationDecorator"),IEditLabelValidator:Symbol("IEditLabelValidator"),HiddenModelViewer:Symbol("HiddenModelViewer"),HiddenVNodePostprocessor:Symbol("HiddenVNodeDecorator"),HoverState:Symbol("HoverState"),KeyListener:Symbol("KeyListener"),LayoutRegistry:Symbol("LayoutRegistry"),Layouter:Symbol("Layouter"),LogLevel:Symbol("LogLevel"),ILogger:Symbol("ILogger"),IModelFactory:Symbol("IModelFactory"),IModelLayoutEngine:Symbol("IModelLayoutEngine"),ModelRendererFactory:Symbol("ModelRendererFactory"),ModelSource:Symbol("ModelSource"),ModelSourceProvider:Symbol("ModelSourceProvider"),ModelViewer:Symbol("ModelViewer"),MouseListener:Symbol("MouseListener"),PatcherProvider:Symbol("PatcherProvider"),IPopupModelProvider:Symbol("IPopupModelProvider"),PopupModelViewer:Symbol("PopupModelViewer"),PopupMouseListener:Symbol("PopupMouseListener"),PopupVNodePostprocessor:Symbol("PopupVNodeDecorator"),SModelElementRegistration:Symbol("SModelElementRegistration"),SModelRegistry:Symbol("SModelRegistry"),ISnapper:Symbol("ISnapper"),SvgExporter:Symbol("SvgExporter"),IToolManager:Symbol("IToolManager"),IUIExtension:Symbol("IUIExtension"),UIExtensionRegistry:Symbol("UIExtensionRegistry"),IVNodePostprocessor:Symbol("IVNodePostprocessor"),ViewRegistration:Symbol("ViewRegistration"),ViewRegistry:Symbol("ViewRegistry"),IViewer:Symbol("IViewer"),ViewerOptions:Symbol("ViewerOptions"),IViewerProvider:Symbol("IViewerProvider")}},8842:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}},c=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o};Object.defineProperty(e,"__esModule",{value:!0});var u=n(6700),d=n(6530),l=n(1864),p=n(1826),f=function(t){function e(e){void 0===e&&(e=[]);var n=t.call(this)||this;return e.forEach((function(t){return n.register(t.id(),t)})),n}return r(e,t),i([u.injectable(),s(0,u.multiInject(p.TYPES.IUIExtension)),s(0,u.optional()),a("design:paramtypes",[Array])],e)}(d.InstanceRegistry);e.UIExtensionRegistry=f;var h=function(){function t(e,n,o){void 0===o&&(o=[]),this.extensionId=e,this.visible=n,this.contextElementsId=o,this.kind=t.KIND}return t.KIND="setUIExtensionVisibility",t}();e.SetUIExtensionVisibilityAction=h;var y=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return r(e,t),e.prototype.execute=function(t){var e=this.registry.get(this.action.extensionId);return e&&(this.action.visible?e.show.apply(e,c([t.root],this.action.contextElementsId)):e.hide()),{model:t.root,modelChanged:!1}},e.prototype.undo=function(t){return{model:t.root,modelChanged:!1}},e.prototype.redo=function(t){return{model:t.root,modelChanged:!1}},e.KIND=h.KIND,i([u.inject(p.TYPES.UIExtensionRegistry),a("design:type",f)],e.prototype,"registry",void 0),i([u.injectable(),s(0,u.inject(p.TYPES.Action)),a("design:paramtypes",[h])],e)}(l.SystemCommand);e.SetUIExtensionVisibilityCommand=y},3999:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o};Object.defineProperty(e,"__esModule",{value:!0});var a=n(6700),s=n(1826),c=function(){function t(){}return t.prototype.show=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.activeElement=document.activeElement,(this.containerElement||this.initialize())&&(this.onBeforeShow.apply(this,i([this.containerElement,t],e)),this.setContainerVisible(!0))},t.prototype.hide=function(){this.setContainerVisible(!1),this.restoreFocus(),this.activeElement=null},t.prototype.restoreFocus=function(){var t=this.activeElement;t&&t.focus()},t.prototype.initialize=function(){var t=document.getElementById(this.options.baseDiv);return t?(this.containerElement=this.getOrCreateContainer(t.id),this.initializeContents(this.containerElement),t&&t.insertBefore(this.containerElement,t.firstChild),!0):(this.logger.warn(this,"Could not obtain sprotty base container for initializing UI extension "+this.id,this),!1)},t.prototype.getOrCreateContainer=function(t){var e=document.getElementById(this.id());return null===e&&((e=document.createElement("div")).id=t+"_"+this.id(),e.classList.add(this.containerClass())),e},t.prototype.setContainerVisible=function(t){this.containerElement&&(t?(this.containerElement.style.visibility="visible",this.containerElement.style.opacity="1"):(this.containerElement.style.visibility="hidden",this.containerElement.style.opacity="0"))},t.prototype.onBeforeShow=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o]},o([a.inject(s.TYPES.ViewerOptions),r("design:type",Object)],t.prototype,"options",void 0),o([a.inject(s.TYPES.ILogger),r("design:type",Object)],t.prototype,"logger",void 0),o([a.injectable()],t)}();e.AbstractUIExtension=c},6714:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var r=n(4626),i=n(6700),a=n(8558),s=function(){function t(){}return t.prototype.decorate=function(t,e){if(e.cssClasses)for(var n=0,o=e.cssClasses;n<o.length;n++){var i=o[n];r.setClass(t,i,!0)}var s=a.getSubType(e);return s&&s!==e.type&&r.setClass(t,s,!0),t},t.prototype.postUpdate=function(){},o([i.injectable()],t)}();e.CssClassPostprocessor=s},5509:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(6700),a=n(1826),s=function(){function t(){}return t.prototype.getPrefix=function(){return void 0!==this.viewerOptions&&void 0!==this.viewerOptions.baseDiv?this.viewerOptions.baseDiv+"_":""},t.prototype.createUniqueDOMElementId=function(t){return this.getPrefix()+t.id},t.prototype.findSModelIdByDOMElement=function(t){return t.id.replace(this.getPrefix(),"")},o([i.inject(a.TYPES.ViewerOptions),r("design:type",Object)],t.prototype,"viewerOptions",void 0),o([i.injectable()],t)}();e.DOMHelper=s},6143:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(6700),a=n(1826),s=n(5509),c=n(4626),u=function(){function t(){}return t.prototype.decorate=function(t,e){var n=c.getAttrs(t);return void 0!==n.id&&this.logger.warn(t,"Overriding id of vnode ("+n.id+"). Make sure not to set it manually in view."),n.id=this.domHelper.createUniqueDOMElementId(e),t.key||(t.key=e.id),t},t.prototype.postUpdate=function(){},o([i.inject(a.TYPES.ILogger),r("design:type",Object)],t.prototype,"logger",void 0),o([i.inject(a.TYPES.DOMHelper),r("design:type",s.DOMHelper)],t.prototype,"domHelper",void 0),o([i.injectable()],t)}();e.IdPostprocessor=u},6004:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(6700),s=n(1826),c=n(6771),u=n(4626),d=function(){function t(t){void 0===t&&(t=[]),this.keyListeners=t}return t.prototype.register=function(t){this.keyListeners.push(t)},t.prototype.deregister=function(t){var e=this.keyListeners.indexOf(t);e>=0&&this.keyListeners.splice(e,1)},t.prototype.handleEvent=function(t,e,n){var o=this.keyListeners.map((function(o){return o[t].apply(o,[e,n])})).reduce((function(t,e){return t.concat(e)}));o.length>0&&(n.preventDefault(),this.actionDispatcher.dispatchAll(o))},t.prototype.keyDown=function(t,e){this.handleEvent("keyDown",t,e)},t.prototype.keyUp=function(t,e){this.handleEvent("keyUp",t,e)},t.prototype.focus=function(){},t.prototype.decorate=function(t,e){return e instanceof c.SModelRoot&&(u.on(t,"focus",this.focus.bind(this),e),u.on(t,"keydown",this.keyDown.bind(this),e),u.on(t,"keyup",this.keyUp.bind(this),e)),t},t.prototype.postUpdate=function(){},o([a.inject(s.TYPES.IActionDispatcher),r("design:type",Object)],t.prototype,"actionDispatcher",void 0),o([a.injectable(),i(0,a.multiInject(s.TYPES.KeyListener)),i(0,a.optional()),r("design:paramtypes",[Array])],t)}();e.KeyTool=d;var l=function(){function t(){}return t.prototype.keyDown=function(t,e){return[]},t.prototype.keyUp=function(t,e){return[]},o([a.injectable()],t)}();e.KeyListener=l},6589:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(6700),u=n(152),d=n(6771),l=n(1826),p=n(5509),f=n(4626),h=function(){function t(t){void 0===t&&(t=[]),this.mouseListeners=t}return t.prototype.register=function(t){this.mouseListeners.push(t)},t.prototype.deregister=function(t){var e=this.mouseListeners.indexOf(t);e>=0&&this.mouseListeners.splice(e,1)},t.prototype.getTargetElement=function(t,e){for(var n=e.target,o=t.index;n;){if(n.id){var r=o.getById(this.domHelper.findSModelIdByDOMElement(n));if(void 0!==r)return r}n=n.parentNode}},t.prototype.handleEvent=function(t,e,n){var o=this;this.focusOnMouseEvent(t,e);var r=this.getTargetElement(e,n);if(r){var i=this.mouseListeners.map((function(e){return e[t].apply(e,[r,n])})).reduce((function(t,e){return t.concat(e)}));if(i.length>0){n.preventDefault();for(var a=0,s=i;a<s.length;a++){var c=s[a];u.isAction(c)?this.actionDispatcher.dispatch(c):c.then((function(t){o.actionDispatcher.dispatch(t)}))}}}},t.prototype.focusOnMouseEvent=function(t,e){if(document){var n=document.getElementById(this.domHelper.createUniqueDOMElementId(e));"mouseDown"===t&&null!==n&&"function"==typeof n.focus&&n.focus()}},t.prototype.mouseOver=function(t,e){this.handleEvent("mouseOver",t,e)},t.prototype.mouseOut=function(t,e){this.handleEvent("mouseOut",t,e)},t.prototype.mouseEnter=function(t,e){this.handleEvent("mouseEnter",t,e)},t.prototype.mouseLeave=function(t,e){this.handleEvent("mouseLeave",t,e)},t.prototype.mouseDown=function(t,e){this.handleEvent("mouseDown",t,e)},t.prototype.mouseMove=function(t,e){this.handleEvent("mouseMove",t,e)},t.prototype.mouseUp=function(t,e){this.handleEvent("mouseUp",t,e)},t.prototype.wheel=function(t,e){this.handleEvent("wheel",t,e)},t.prototype.doubleClick=function(t,e){this.handleEvent("doubleClick",t,e)},t.prototype.decorate=function(t,e){return e instanceof d.SModelRoot&&(f.on(t,"mouseover",this.mouseOver.bind(this),e),f.on(t,"mouseout",this.mouseOut.bind(this),e),f.on(t,"mouseenter",this.mouseEnter.bind(this),e),f.on(t,"mouseleave",this.mouseLeave.bind(this),e),f.on(t,"mousedown",this.mouseDown.bind(this),e),f.on(t,"mouseup",this.mouseUp.bind(this),e),f.on(t,"mousemove",this.mouseMove.bind(this),e),f.on(t,"wheel",this.wheel.bind(this),e),f.on(t,"contextmenu",(function(t,e){e.preventDefault()}),e),f.on(t,"dblclick",this.doubleClick.bind(this),e)),this.mouseListeners.reduce((function(t,n){return n.decorate(t,e)}),t)},t.prototype.postUpdate=function(){},i([c.inject(l.TYPES.IActionDispatcher),a("design:type",Object)],t.prototype,"actionDispatcher",void 0),i([c.inject(l.TYPES.DOMHelper),a("design:type",p.DOMHelper)],t.prototype,"domHelper",void 0),i([c.injectable(),s(0,c.multiInject(l.TYPES.MouseListener)),s(0,c.optional()),a("design:paramtypes",[Array])],t)}();e.MouseTool=h;var y=function(t){function e(e){void 0===e&&(e=[]);var n=t.call(this,e)||this;return n.mouseListeners=e,n}return r(e,t),i([c.injectable(),s(0,c.multiInject(l.TYPES.PopupMouseListener)),s(0,c.optional()),a("design:paramtypes",[Array])],e)}(h);e.PopupMouseTool=y;var g=function(){function t(){}return t.prototype.mouseOver=function(t,e){return[]},t.prototype.mouseOut=function(t,e){return[]},t.prototype.mouseEnter=function(t,e){return[]},t.prototype.mouseLeave=function(t,e){return[]},t.prototype.mouseDown=function(t,e){return[]},t.prototype.mouseMove=function(t,e){return[]},t.prototype.mouseUp=function(t,e){return[]},t.prototype.wheel=function(t,e){return[]},t.prototype.doubleClick=function(t,e){return[]},t.prototype.decorate=function(t,e){return t},i([c.injectable()],t)}();e.MouseListener=g;var v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.mouseMove=function(t,e){return this.lastPosition=t.root.parentToLocal({x:e.offsetX,y:e.offsetY}),[]},Object.defineProperty(e.prototype,"lastPositionOnDiagram",{get:function(){return this.lastPosition},enumerable:!0,configurable:!0}),i([c.injectable()],e)}(g);e.MousePositionTracker=v},1677:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var r=n(1008),i=n(6700),a=function(){function t(){}return t.prototype.render=function(t,e){var n=this;return r.h(this.selector(t),{key:t.id,hook:{init:this.init.bind(this),prepatch:this.prepatch.bind(this)},fn:function(){return n.renderAndDecorate(t,e)},args:this.watchedArgs(t),thunk:!0})},t.prototype.renderAndDecorate=function(t,e){var n=this.doRender(t,e);return e.decorate(n,t),n},t.prototype.copyToThunk=function(t,e){e.elm=t.elm,t.data.fn=e.data.fn,t.data.args=e.data.args,e.data=t.data,e.children=t.children,e.text=t.text,e.elm=t.elm},t.prototype.init=function(t){var e=t.data,n=e.fn.apply(void 0,e.args);this.copyToThunk(n,t)},t.prototype.prepatch=function(t,e){var n=t.data,o=e.data;this.equals(n.args,o.args)?this.copyToThunk(t,e):this.copyToThunk(o.fn.apply(void 0,o.args),e)},t.prototype.equals=function(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(var n=0;n<e.length;++n)if(!this.equals(t[n],e[n]))return!1}else if("object"==typeof t&&"object"==typeof e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var o in t)if(!("parent"===o||"root"===o||o in e&&this.equals(t[o],e[o])))return!1}else if(t!==e)return!1;return!0},o([i.injectable()],t)}();e.ThunkView=a,e.isThunk=function(t){return"thunk"in t}},6708:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(2388),u=n(6700),d=n(1826),l=n(6530),p=n(7073),f=n(3392),h=n(1194),y=n(8558),g=function(t){function e(e){var n=t.call(this)||this;return n.registerDefaults(),e.forEach((function(t){return n.register(t.type,t.factory())})),n}return r(e,t),e.prototype.registerDefaults=function(){this.register(h.EMPTY_ROOT.type,new m)},e.prototype.missing=function(t){return new b},i([u.injectable(),s(0,u.multiInject(d.TYPES.ViewRegistration)),s(0,u.optional()),a("design:paramtypes",[Array])],e)}(l.InstanceRegistry);function v(t,e,n){if("function"==typeof n){if(!f.isInjectable(n))throw new Error("Views should be @injectable: "+n.name);t.isBound(n)||t.bind(n).toSelf()}t.bind(d.TYPES.ViewRegistration).toDynamicValue((function(t){return{type:e,factory:function(){return t.container.get(n)}}}))}e.ViewRegistry=g,e.configureModelElement=function(t,e,n,o,r){y.registerModelElement(t,e,n,r),v(t,e,o)},e.configureView=v;var m=function(){function t(){}return t.prototype.render=function(t,e){return c.svg("svg",{"class-sprotty-empty":!0})},i([u.injectable()],t)}();e.EmptyView=m;var b=function(){function t(){}return t.prototype.render=function(t,e){var n=t.position||p.ORIGIN_POINT;return c.svg("text",{"class-sprotty-missing":!0,x:n.x,y:n.y},"?",t.id,"?")},i([u.injectable()],t)}();e.MissingView=b},6265:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(6700),a=n(1826),s=n(1198),c=function(){function t(){}return t.prototype.update=function(t,e){if(void 0!==e)this.delegate.update(t,e),this.cachedModel=void 0;else{var n=void 0===this.cachedModel;this.cachedModel=t,n&&this.scheduleUpdate()}},t.prototype.scheduleUpdate=function(){var t=this;this.syncer.onEndOfNextFrame((function(){t.cachedModel&&(t.delegate.update(t.cachedModel),t.cachedModel=void 0)}))},o([i.inject(a.TYPES.IViewer),r("design:type",Object)],t.prototype,"delegate",void 0),o([i.inject(a.TYPES.AnimationFrameSyncer),r("design:type",s.AnimationFrameSyncer)],t.prototype,"syncer",void 0),o([i.injectable()],t)}();e.ViewerCache=c},2233:function(t,e,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r=n(1826);e.defaultViewerOptions=function(){return{baseDiv:"sprotty",baseClass:"sprotty",hiddenDiv:"sprotty-hidden",hiddenClass:"sprotty-hidden",popupDiv:"sprotty-popup",popupClass:"sprotty-popup",popupClosedClass:"sprotty-popup-closed",needsClientLayout:!0,needsServerLayout:!1,popupOpenDelay:1e3,popupCloseDelay:300}},e.configureViewerOptions=function(t,n){var i=o(o({},e.defaultViewerOptions()),n);t.isBound(r.TYPES.ViewerOptions)?t.rebind(r.TYPES.ViewerOptions).toConstantValue(i):t.bind(r.TYPES.ViewerOptions).toConstantValue(i)},e.overrideViewerOptions=function(t,e){var n=t.get(r.TYPES.ViewerOptions);for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);return n}},9600:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(2388),s=n(1008),c=n(4958),u=n(6436),d=n(4548),l=n(4767),p=n(5542),f=n(6700),h=n(1826),y=n(5824),g=n(5917),v=n(4626),m=n(1677),b=n(1194),_=function(){function t(t,e,n){this.viewRegistry=t,this.targetKind=e,this.postprocessors=n}return t.prototype.decorate=function(t,e){return m.isThunk(t)?t:this.postprocessors.reduce((function(t,n){return n.decorate(t,e)}),t)},t.prototype.renderElement=function(t,e){var n=this.viewRegistry.get(t.type).render(t,this,e);return n?this.decorate(n,t):void 0},t.prototype.renderChildren=function(t,e){var n=this;return t.children.map((function(t){return n.renderElement(t,e)})).filter((function(t){return void 0!==t}))},t.prototype.postUpdate=function(t){this.postprocessors.forEach((function(e){return e.postUpdate(t)}))},t}();e.ModelRenderer=_;var w=function(){function t(){this.patcher=s.init(this.createModules())}return t.prototype.createModules=function(){return[c.propsModule,u.attributesModule,p.classModule,d.styleModule,l.eventListenersModule]},o([f.injectable(),r("design:paramtypes",[])],t)}();e.PatcherProvider=w;var P=function(){function t(t,e,n){var o=this;this.onWindowResize=function(t){var e=document.getElementById(o.options.baseDiv);if(null!==e){var n=o.getBoundsInPage(e);o.actiondispatcher.dispatch(new g.InitializeCanvasBoundsAction(n))}},this.renderer=t("main",n),this.patcher=e.patcher}return t.prototype.update=function(t,e){var n=this;this.logger.log(this,"rendering",t);var o=a.html("div",{id:this.options.baseDiv},this.renderer.renderElement(t));if(void 0!==this.lastVDOM){var r=this.hasFocus();v.copyClassesFromVNode(this.lastVDOM,o),this.lastVDOM=this.patcher.call(this,this.lastVDOM,o),this.restoreFocus(r)}else if("undefined"!=typeof document){var i=document.getElementById(this.options.baseDiv);null!==i?("undefined"!=typeof window&&window.addEventListener("resize",(function(){n.onWindowResize(o)})),v.copyClassesFromElement(i,o),v.setClass(o,this.options.baseClass,!0),this.lastVDOM=this.patcher.call(this,i,o)):this.logger.error(this,"element not in DOM:",this.options.baseDiv)}this.renderer.postUpdate(e)},t.prototype.hasFocus=function(){if("undefined"!=typeof document&&document.activeElement&&this.lastVDOM.children&&this.lastVDOM.children.length>0){var t=this.lastVDOM.children[0];if("object"==typeof t){var e=t.elm;return document.activeElement===e}}return!1},t.prototype.restoreFocus=function(t){if(t&&this.lastVDOM.children&&this.lastVDOM.children.length>0){var e=this.lastVDOM.children[0];if("object"==typeof e){var n=e.elm;n&&"function"==typeof n.focus&&n.focus()}}},t.prototype.getBoundsInPage=function(t){var e=t.getBoundingClientRect(),n=y.getWindowScroll();return{x:e.left+n.x,y:e.top+n.y,width:e.width,height:e.height}},o([f.inject(h.TYPES.ViewerOptions),r("design:type",Object)],t.prototype,"options",void 0),o([f.inject(h.TYPES.ILogger),r("design:type",Object)],t.prototype,"logger",void 0),o([f.inject(h.TYPES.IActionDispatcher),r("design:type",Object)],t.prototype,"actiondispatcher",void 0),o([f.injectable(),i(0,f.inject(h.TYPES.ModelRendererFactory)),i(1,f.inject(h.TYPES.PatcherProvider)),i(2,f.multiInject(h.TYPES.IVNodePostprocessor)),i(2,f.optional()),r("design:paramtypes",[Function,w,Array])],t)}();e.ModelViewer=P;var S=function(){function t(t,e,n){this.hiddenRenderer=t("hidden",n),this.patcher=e.patcher}return t.prototype.update=function(t,e){var n;if(this.logger.log(this,"rendering hidden"),t.type===b.EMPTY_ROOT.type)n=a.html("div",{id:this.options.hiddenDiv});else{var o=this.hiddenRenderer.renderElement(t);o&&v.setAttr(o,"opacity",0),n=a.html("div",{id:this.options.hiddenDiv},o)}if(void 0!==this.lastHiddenVDOM)v.copyClassesFromVNode(this.lastHiddenVDOM,n),this.lastHiddenVDOM=this.patcher.call(this,this.lastHiddenVDOM,n);else{var r=document.getElementById(this.options.hiddenDiv);null===r?(r=document.createElement("div"),document.body.appendChild(r)):v.copyClassesFromElement(r,n),v.setClass(n,this.options.baseClass,!0),v.setClass(n,this.options.hiddenClass,!0),this.lastHiddenVDOM=this.patcher.call(this,r,n)}this.hiddenRenderer.postUpdate(e)},o([f.inject(h.TYPES.ViewerOptions),r("design:type",Object)],t.prototype,"options",void 0),o([f.inject(h.TYPES.ILogger),r("design:type",Object)],t.prototype,"logger",void 0),o([f.injectable(),i(0,f.inject(h.TYPES.ModelRendererFactory)),i(1,f.inject(h.TYPES.PatcherProvider)),i(2,f.multiInject(h.TYPES.HiddenVNodePostprocessor)),i(2,f.optional()),r("design:paramtypes",[Function,w,Array])],t)}();e.HiddenModelViewer=S;var O=function(){function t(t,e,n){this.modelRendererFactory=t,this.popupRenderer=this.modelRendererFactory("popup",n),this.patcher=e.patcher}return t.prototype.update=function(t,e){this.logger.log(this,"rendering popup",t);var n,o=t.type===b.EMPTY_ROOT.type;if(o)n=a.html("div",{id:this.options.popupDiv});else{var r=t.canvasBounds,i={top:r.y+"px",left:r.x+"px"};n=a.html("div",{id:this.options.popupDiv,style:i},this.popupRenderer.renderElement(t))}if(void 0!==this.lastPopupVDOM)v.copyClassesFromVNode(this.lastPopupVDOM,n),v.setClass(n,this.options.popupClosedClass,o),this.lastPopupVDOM=this.patcher.call(this,this.lastPopupVDOM,n);else if("undefined"!=typeof document){var s=document.getElementById(this.options.popupDiv);null===s?(s=document.createElement("div"),document.body.appendChild(s)):v.copyClassesFromElement(s,n),v.setClass(n,this.options.popupClass,!0),v.setClass(n,this.options.popupClosedClass,o),this.lastPopupVDOM=this.patcher.call(this,s,n)}this.popupRenderer.postUpdate(e)},o([f.inject(h.TYPES.ViewerOptions),r("design:type",Object)],t.prototype,"options",void 0),o([f.inject(h.TYPES.ILogger),r("design:type",Object)],t.prototype,"logger",void 0),o([f.injectable(),i(0,f.inject(h.TYPES.ModelRendererFactory)),i(1,f.inject(h.TYPES.PatcherProvider)),i(2,f.multiInject(h.TYPES.PopupVNodePostprocessor)),i(2,f.optional()),r("design:paramtypes",[Function,w,Array])],t)}();e.PopupModelViewer=O},5055:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var r=n(6700),i=n(4626),a=function(){function t(){}return t.prototype.decorate=function(t,e){return t.sel&&t.sel.startsWith("svg")&&i.setAttr(t,"tabindex",0),t},t.prototype.postUpdate=function(){},o([r.injectable()],t)}();e.FocusFixPostprocessor=a},4626:function(t,e){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function o(t,e,n){a(t)[e]=n}function r(t){var e=i(t);return e.attrs||(e.attrs={}),e.attrs}function i(t){return t.data||(t.data={}),t.data}function a(t){var e=i(t);return e.class||(e.class={}),e.class}Object.defineProperty(e,"__esModule",{value:!0}),e.setAttr=function(t,e,n){r(t)[e]=n},e.setClass=o,e.setNamespace=function t(e,n){void 0===e.data&&(e.data={}),e.data.ns=n;var o=e.children;if(void 0!==o)for(var r=0;r<o.length;r++){var i=o[r];"string"!=typeof i&&t(i,n)}},e.copyClassesFromVNode=function(t,e){var n=a(t);for(var r in n)n.hasOwnProperty(r)&&o(e,r,!0)},e.copyClassesFromElement=function(t,e){for(var n=t.classList,r=0;r<n.length;r++){var i=n.item(r);i&&o(e,i,!0)}},e.mergeStyle=function(t,e){i(t).style=n(n({},i(t).style||{}),e)},e.on=function(t,e,n,o){var r=function(t){var e=i(t);return e.on||(e.on={}),e.on}(t);if(r[e])throw new Error("EventListener for "+e+" already registered on VNode");r[e]=[n,o]},e.getAttrs=r},4874:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(7073),r=n(6771),i=n(9046),a=function(){function t(){}return t.prototype.layout=function(t,e){var n=e.getBoundsData(t),o=this.getLayoutOptions(t),r=this.getChildrenSize(t,o,e),i=o.paddingFactor*(o.resizeContainer?r.width:Math.max(0,this.getFixedContainerBounds(t,o,e).width)-o.paddingLeft-o.paddingRight),a=o.paddingFactor*(o.resizeContainer?r.height:Math.max(0,this.getFixedContainerBounds(t,o,e).height)-o.paddingTop-o.paddingBottom);if(i>0&&a>0){var s=this.layoutChildren(t,e,o,i,a);n.bounds=this.getFinalContainerBounds(t,s,o,i,a),n.boundsChanged=!0}},t.prototype.getFinalContainerBounds=function(t,e,n,o,r){return{x:t.bounds.x,y:t.bounds.y,width:Math.max(n.minWidth,o+n.paddingLeft+n.paddingRight),height:Math.max(n.minHeight,r+n.paddingTop+n.paddingBottom)}},t.prototype.getFixedContainerBounds=function(t,e,n){for(var a=t;;){if(i.isBoundsAware(a)){var s=a.bounds;if(i.isLayoutContainer(a)&&e.resizeContainer&&n.log.error(a,"Resizable container found while detecting fixed bounds"),o.isValidDimension(s))return s}if(!(a instanceof r.SChildElement))return n.log.error(a,"Cannot detect fixed bounds"),o.EMPTY_BOUNDS;a=a.parent}},t.prototype.layoutChildren=function(t,e,n,r,a){var s=this,c={x:n.paddingLeft+.5*(r-r/n.paddingFactor),y:n.paddingTop+.5*(a-a/n.paddingFactor)};return t.children.forEach((function(t){if(i.isLayoutableChild(t)){var u=e.getBoundsData(t),d=u.bounds,l=s.getChildLayoutOptions(t,n);void 0!==d&&o.isValidDimension(d)&&(c=s.layoutChild(t,u,d,l,n,c,r,a))}})),c},t.prototype.getDx=function(t,e,n){switch(t){case"left":return 0;case"center":return.5*(n-e.width);case"right":return n-e.width}},t.prototype.getDy=function(t,e,n){switch(t){case"top":return 0;case"center":return.5*(n-e.height);case"bottom":return n-e.height}},t.prototype.getChildLayoutOptions=function(t,e){var n=t.layoutOptions;return void 0===n?e:this.spread(e,n)},t.prototype.getLayoutOptions=function(t){for(var e=this,n=t,o=[];void 0!==n;){var i=n.layoutOptions;if(void 0!==i&&o.push(i),!(n instanceof r.SChildElement))break;n=n.parent}return o.reverse().reduce((function(t,n){return e.spread(t,n)}),this.getDefaultLayoutOptions())},t}();e.AbstractLayout=a},1403:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},a=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(6700),d=n(152),l=n(1864),p=n(1826),f=n(9046),h=function(){function t(e){this.bounds=e,this.kind=t.KIND}return t.KIND="setBounds",t}();e.SetBoundsAction=h;var y=function(){function t(e,n){void 0===n&&(n=""),this.newRoot=e,this.requestId=n,this.kind=t.KIND}return t.create=function(e){return new t(e,d.generateRequestId())},t.KIND="requestBounds",t}();e.RequestBoundsAction=y;var g=function(){function t(e,n,o,r){void 0===r&&(r=""),this.bounds=e,this.revision=n,this.alignments=o,this.responseId=r,this.kind=t.KIND}return t.KIND="computedBounds",t}();e.ComputedBoundsAction=g;var v=function(){function t(){this.kind=t.KIND}return t.KIND="layout",t}();e.LayoutAction=v;var m=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.bounds=[],n}return r(e,t),e.prototype.execute=function(t){var e=this;return this.action.bounds.forEach((function(n){var o=t.root.index.getById(n.elementId);o&&f.isBoundsAware(o)&&e.bounds.push({element:o,oldBounds:o.bounds,newPosition:n.newPosition,newSize:n.newSize})})),this.redo(t)},e.prototype.undo=function(t){return this.bounds.forEach((function(t){return t.element.bounds=t.oldBounds})),t.root},e.prototype.redo=function(t){return this.bounds.forEach((function(t){t.newPosition?t.element.bounds=i(i({},t.newPosition),t.newSize):t.element.bounds=i({x:t.element.bounds.x,y:t.element.bounds.y},t.newSize)})),t.root},e.KIND=h.KIND,a([u.injectable(),c(0,u.inject(p.TYPES.Action)),s("design:paramtypes",[h])],e)}(l.SystemCommand);e.SetBoundsCommand=m;var b=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return r(e,t),e.prototype.execute=function(t){return{model:t.modelFactory.createRoot(this.action.newRoot),modelChanged:!0,cause:this.action}},Object.defineProperty(e.prototype,"blockUntil",{get:function(){return function(t){return t.kind===g.KIND}},enumerable:!0,configurable:!0}),e.KIND=y.KIND,a([u.injectable(),c(0,u.inject(p.TYPES.Action)),s("design:paramtypes",[y])],e)}(l.HiddenCommand);e.RequestBoundsCommand=b},4760:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6700),r=n(1826),i=n(1403),a=n(2463),s=n(1771),c=n(2857),u=new o.ContainerModule((function(t,e,n){c.configureCommand({bind:t,isBound:n},i.SetBoundsCommand),c.configureCommand({bind:t,isBound:n},i.RequestBoundsCommand),t(a.HiddenBoundsUpdater).toSelf().inSingletonScope(),t(r.TYPES.HiddenVNodePostprocessor).toService(a.HiddenBoundsUpdater),t(r.TYPES.Layouter).to(s.Layouter).inSingletonScope(),t(r.TYPES.LayoutRegistry).to(s.LayoutRegistry).inSingletonScope()}));e.default=u},7015:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(7073),s=n(4874),c=n(9046),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getChildrenSize=function(t,e,n){var o=0,r=-1,i=!0;return t.children.forEach((function(t){if(c.isLayoutableChild(t)){var s=n.getBoundsData(t).bounds;void 0!==s&&a.isValidDimension(s)&&(i?i=!1:o+=e.hGap,o+=s.width,r=Math.max(r,s.height))}})),{width:o,height:r}},e.prototype.layoutChild=function(t,e,n,o,r,i,a,s){var c=this.getDy(o.vAlign,n,s);return e.bounds={x:i.x+t.bounds.x-n.x,y:r.paddingTop+t.bounds.y-n.y+c,width:n.width,height:n.height},e.boundsChanged=!0,{x:i.x+n.width+r.hGap,y:i.y}},e.prototype.getDefaultLayoutOptions=function(){return{resizeContainer:!0,paddingTop:5,paddingBottom:5,paddingLeft:5,paddingRight:5,paddingFactor:1,hGap:1,vAlign:"center",minWidth:0,minHeight:0}},e.prototype.spread=function(t,e){return i(i({},t),e)},e.KIND="hbox",e}(s.AbstractLayout);e.HBoxLayouter=u},2463:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(6700),a=n(7073),s=n(6771),c=n(1826),u=n(1403),d=n(1771),l=n(9046);e.BoundsData=function(){};var p=function(){function t(){this.element2boundsData=new Map}return t.prototype.decorate=function(t,e){return(l.isSizeable(e)||l.isLayoutContainer(e))&&this.element2boundsData.set(e,{vnode:t,bounds:e.bounds,boundsChanged:!1,alignmentChanged:!1}),e instanceof s.SModelRoot&&(this.root=e),t},t.prototype.postUpdate=function(t){if(void 0!==t&&t.kind===u.RequestBoundsAction.KIND){var e=t;this.getBoundsFromDOM(),this.layouter.layout(this.element2boundsData);var n=[],o=[];this.element2boundsData.forEach((function(t,e){if(t.boundsChanged&&void 0!==t.bounds){var r={elementId:e.id,newSize:{width:t.bounds.width,height:t.bounds.height}};e instanceof s.SChildElement&&l.isLayoutContainer(e.parent)&&(r.newPosition={x:t.bounds.x,y:t.bounds.y}),n.push(r)}t.alignmentChanged&&void 0!==t.alignment&&o.push({elementId:e.id,newAlignment:t.alignment})}));var r=void 0!==this.root?this.root.revision:void 0;this.actionDispatcher.dispatch(new u.ComputedBoundsAction(n,r,o,e.requestId)),this.element2boundsData.clear()}},t.prototype.getBoundsFromDOM=function(){var t=this;this.element2boundsData.forEach((function(e,n){if(e.bounds&&l.isSizeable(n)){var o=e.vnode;if(o&&o.elm){var r=t.getBounds(o.elm,n);!l.isAlignable(n)||a.almostEquals(r.x,0)&&a.almostEquals(r.y,0)||(e.alignment={x:-r.x,y:-r.y},e.alignmentChanged=!0);var i={x:n.bounds.x,y:n.bounds.y,width:r.width,height:r.height};a.almostEquals(i.x,n.bounds.x)&&a.almostEquals(i.y,n.bounds.y)&&a.almostEquals(i.width,n.bounds.width)&&a.almostEquals(i.height,n.bounds.height)||(e.bounds=i,e.boundsChanged=!0)}}}))},t.prototype.getBounds=function(t,e){if("function"!=typeof t.getBBox)return this.logger.error(this,"Not an SVG element:",t),a.EMPTY_BOUNDS;var n=t.getBBox();return{x:n.x,y:n.y,width:n.width,height:n.height}},o([i.inject(c.TYPES.ILogger),r("design:type",Object)],t.prototype,"logger",void 0),o([i.inject(c.TYPES.IActionDispatcher),r("design:type",Object)],t.prototype,"actionDispatcher",void 0),o([i.inject(c.TYPES.Layouter),r("design:type",d.Layouter)],t.prototype,"layouter",void 0),o([i.injectable()],t)}();e.HiddenBoundsUpdater=p},1771:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var s=n(6700),c=n(1826),u=n(6530),d=n(7073),l=n(9046),p=n(594),f=n(7015),h=n(7987),y=function(t){function e(){var e=t.call(this)||this;return e.register(p.VBoxLayouter.KIND,new p.VBoxLayouter),e.register(f.HBoxLayouter.KIND,new f.HBoxLayouter),e.register(h.StackLayouter.KIND,new h.StackLayouter),e}return r(e,t),e}(u.InstanceRegistry);e.LayoutRegistry=y;var g=function(){function t(){}return t.prototype.layout=function(t){new v(t,this.layoutRegistry,this.logger).layout()},i([s.inject(c.TYPES.LayoutRegistry),a("design:type",y)],t.prototype,"layoutRegistry",void 0),i([s.inject(c.TYPES.ILogger),a("design:type",Object)],t.prototype,"logger",void 0),i([s.injectable()],t)}();e.Layouter=g;var v=function(){function t(t,e,n){var o=this;this.element2boundsData=t,this.layoutRegistry=e,this.log=n,this.toBeLayouted=[],t.forEach((function(t,e){l.isLayoutContainer(e)&&o.toBeLayouted.push(e)}))}return t.prototype.getBoundsData=function(t){var e=this.element2boundsData.get(t),n=t.bounds;return l.isLayoutContainer(t)&&this.toBeLayouted.indexOf(t)>=0&&(n=this.doLayout(t)),e||(e={bounds:n,boundsChanged:!1,alignmentChanged:!1},this.element2boundsData.set(t,e)),e},t.prototype.layout=function(){for(;this.toBeLayouted.length>0;){var t=this.toBeLayouted[0];this.doLayout(t)}},t.prototype.doLayout=function(t){var e=this.toBeLayouted.indexOf(t);e>=0&&this.toBeLayouted.splice(e,1);var n=this.layoutRegistry.get(t.layout);n&&n.layout(t,this);var o=this.element2boundsData.get(t);return void 0!==o&&void 0!==o.bounds?o.bounds:(this.log.error(t,"Layout failed"),d.EMPTY_BOUNDS)},t}();e.StatefulLayouter=v},9046:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(6771),a=n(8558),s=n(7073),c=n(5824);function u(t){return"bounds"in t}function d(t,e,n){t.children.forEach((function(t){if(u(t)&&s.includes(t.bounds,e)&&n.push(t),t instanceof i.SParentElement){var o=t.parentToLocal(e);d(t,o,n)}}))}e.boundsFeature=Symbol("boundsFeature"),e.layoutContainerFeature=Symbol("layoutContainerFeature"),e.layoutableChildFeature=Symbol("layoutableChildFeature"),e.alignFeature=Symbol("alignFeature"),e.isBoundsAware=u,e.isLayoutContainer=function(t){return u(t)&&t.hasFeature(e.layoutContainerFeature)&&"layout"in t},e.isLayoutableChild=function(t){return u(t)&&t.hasFeature(e.layoutableChildFeature)},e.isSizeable=function(t){return t.hasFeature(e.boundsFeature)&&u(t)},e.isAlignable=function(t){return t.hasFeature(e.alignFeature)&&"alignment"in t},e.getAbsoluteBounds=function(t){var e=a.findParentByFeature(t,u);if(void 0!==e){for(var n=e.bounds,o=e;o instanceof i.SChildElement;){var r=o.parent;n=r.localToParent(n),o=r}return n}if(t instanceof i.SModelRoot){var c=t.canvasBounds;return{x:0,y:0,width:c.width,height:c.height}}return s.EMPTY_BOUNDS},e.getAbsoluteClientBounds=function(t,e,n){var o=0,r=0,i=0,a=0,s=e.createUniqueDOMElementId(t),u=document.getElementById(s);if(u){var d=u.getBoundingClientRect(),l=c.getWindowScroll();o=d.left+l.x,r=d.top+l.y,i=d.width,a=d.height}var p=document.getElementById(n.baseDiv);if(p)for(;p.offsetParent instanceof HTMLElement&&(p=p.offsetParent);)o-=p.offsetLeft,r-=p.offsetTop;return{x:o,y:r,width:i,height:a}},e.findChildrenAtPosition=function(t,e){var n=[];return d(t,e,n),n};var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.position=s.ORIGIN_POINT,e.size=s.EMPTY_DIMENSION,e}return r(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return{x:this.position.x,y:this.position.y,width:this.size.width,height:this.size.height}},set:function(t){this.position={x:t.x,y:t.y},this.size={width:t.width,height:t.height}},enumerable:!0,configurable:!0}),e.prototype.localToParent=function(t){var e={x:t.x+this.position.x,y:t.y+this.position.y,width:-1,height:-1};return s.isBounds(t)&&(e.width=t.width,e.height=t.height),e},e.prototype.parentToLocal=function(t){var e={x:t.x-this.position.x,y:t.y-this.position.y,width:-1,height:-1};return s.isBounds(t)&&(e.width=t.width,e.height=t.height),e},e}(i.SChildElement);e.SShapeElement=l},7138:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n,o,r){void 0===r&&(r=!1);var i=t.call(this,o)||this;return i.model=e,i.elementResizes=n,i.reverse=r,i}return r(e,t),e.prototype.tween=function(t){var e=this;return this.elementResizes.forEach((function(n){var o=n.element,r=e.reverse?{width:(1-t)*n.toDimension.width+t*n.fromDimension.width,height:(1-t)*n.toDimension.height+t*n.fromDimension.height}:{width:(1-t)*n.fromDimension.width+t*n.toDimension.width,height:(1-t)*n.fromDimension.height+t*n.toDimension.height};o.bounds={x:o.bounds.x,y:o.bounds.y,width:r.width,height:r.height}})),this.model},e}(n(6692).Animation);e.ResizeAnimation=i},7987:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(7073),s=n(4874),c=n(9046),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getChildrenSize=function(t,e,n){var o=-1,r=-1;return t.children.forEach((function(t){if(c.isLayoutableChild(t)){var e=n.getBoundsData(t).bounds;void 0!==e&&a.isValidDimension(e)&&(o=Math.max(o,e.width),r=Math.max(r,e.height))}})),{width:o,height:r}},e.prototype.layoutChild=function(t,e,n,o,r,i,a,s){var c=this.getDx(o.hAlign,n,a),u=this.getDy(o.vAlign,n,s);return e.bounds={x:r.paddingLeft+t.bounds.x-n.x+c,y:r.paddingTop+t.bounds.y-n.y+u,width:n.width,height:n.height},e.boundsChanged=!0,i},e.prototype.getDefaultLayoutOptions=function(){return{resizeContainer:!0,paddingTop:5,paddingBottom:5,paddingLeft:5,paddingRight:5,paddingFactor:1,hAlign:"center",vAlign:"center",minWidth:0,minHeight:0}},e.prototype.spread=function(t,e){return i(i({},t),e)},e.KIND="stack",e}(s.AbstractLayout);e.StackLayouter=u},594:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(7073),s=n(4874),c=n(9046),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getChildrenSize=function(t,e,n){var o=-1,r=0,i=!0;return t.children.forEach((function(t){if(c.isLayoutableChild(t)){var s=n.getBoundsData(t).bounds;void 0!==s&&a.isValidDimension(s)&&(r+=s.height,i?i=!1:r+=e.vGap,o=Math.max(o,s.width))}})),{width:o,height:r}},e.prototype.layoutChild=function(t,e,n,o,r,i,a,s){var c=this.getDx(o.hAlign,n,a);return e.bounds={x:r.paddingLeft+t.bounds.x-n.x+c,y:i.y+t.bounds.y-n.y,width:n.width,height:n.height},e.boundsChanged=!0,{x:i.x,y:i.y+n.height+r.vGap}},e.prototype.getDefaultLayoutOptions=function(){return{resizeContainer:!0,paddingTop:5,paddingBottom:5,paddingLeft:5,paddingRight:5,paddingFactor:1,vGap:1,hAlign:"center",minWidth:0,minHeight:0}},e.prototype.spread=function(t,e){return i(i({},t),e)},e.KIND="vbox",e}(s.AbstractLayout);e.VBoxLayouter=u},2842:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var r=n(6700),i=n(7073),a=n(9046),s=function(){function t(){}return t.prototype.isVisible=function(t,e){if("hidden"===e.targetKind)return!0;if(!i.isValidDimension(t.bounds))return!0;var n=a.getAbsoluteBounds(t),o=t.root.canvasBounds;return n.x<=o.width&&n.x+n.width>=0&&n.y<=o.height&&n.y+n.height>=0},o([r.injectable()],t)}();e.ShapeView=s},1842:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(6530),u=n(6700),d=n(1826),l=function(t){function e(e){var n=t.call(this)||this;return e.forEach((function(t){return n.register(t.TYPE,new t)})),n}return r(e,t),i([u.injectable(),s(0,u.multiInject(d.TYPES.IButtonHandler)),s(0,u.optional()),a("design:paramtypes",[Array])],e)}(c.InstanceRegistry);e.ButtonHandlerRegistry=l},1992:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6700),r=n(1842),i=new o.ContainerModule((function(t){t(r.ButtonHandlerRegistry).toSelf().inSingletonScope()}));e.default=i},2011:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(9046),a=n(6793),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.enabled=!0,e}return r(e,t),e.DEFAULT_FEATURES=[i.boundsFeature,i.layoutableChildFeature,a.fadeFeature],e}(i.SShapeElement);e.SButton=s},8681:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(6700),s=n(152),c=n(1826),u=n(9140),d=n(5989),l=n(9774),p=n(7872),f=function(){function t(t){void 0===t&&(t=[]),this.actionProviders=t}return t.prototype.getActions=function(t,e,n,o){var r=this.actionProviders.map((function(r){return r.getActions(t,e,n,o)}));return Promise.all(r).then((function(t){return t.reduce((function(t,e){return void 0!==e?t.concat(e):t}))}))},o([a.injectable(),i(0,a.multiInject(c.TYPES.ICommandPaletteActionProvider)),i(0,a.optional()),r("design:paramtypes",[Array])],t)}();e.CommandPaletteActionProviderRegistry=f;var h=function(){function t(t){this.logger=t}return t.prototype.getActions=function(t,e,n,o){return void 0!==o&&o%2==0?Promise.resolve(this.createSelectActions(t)):Promise.resolve([new s.LabeledAction("Select all",[new l.SelectAllAction])])},t.prototype.createSelectActions=function(t){return u.toArray(t.index.all().filter((function(t){return d.isNameable(t)}))).map((function(t){return new s.LabeledAction("Reveal "+d.name(t),[new l.SelectAction([t.id]),new p.CenterAction([t.id])],"fa-eye")}))},o([a.injectable(),i(0,a.inject(c.TYPES.ILogger)),r("design:paramtypes",[Object])],t)}();e.RevealNamedElementActionProvider=h},2019:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o};Object.defineProperty(e,"__esModule",{value:!0});var c=n(6700),u=n(152),d=n(1826),l=n(3999),p=n(8842),f=n(5509),h=n(6004),y=n(9140),g=n(8611),v=n(9046),m=n(1982),b=n(8681),_=n(6589),w=n(7338),P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loadingIndicatorClasses=["loading"],e.xOffset=20,e.yOffset=20,e.defaultWidth=400,e.debounceWaitMs=100,e.noCommandsMsg="No commands available",e.paletteIndex=0,e}var n;return r(e,t),n=e,e.prototype.id=function(){return n.ID},e.prototype.containerClass=function(){return"command-palette"},e.prototype.show=function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];t.prototype.show.apply(this,s([e],n)),this.paletteIndex=0,this.contextActions=void 0,this.inputElement.value="",this.autoCompleteResult=w(this.autocompleteSettings(e)),this.inputElement.focus()},e.prototype.initializeContents=function(t){var e=this;t.style.position="absolute",this.inputElement=document.createElement("input"),this.inputElement.style.width="100%",this.inputElement.addEventListener("keydown",(function(t){return e.hideIfEscapeEvent(t)})),this.inputElement.addEventListener("keydown",(function(t){return e.cylceIfInvokePaletteKey(t)})),this.inputElement.onblur=function(){return window.setTimeout((function(){return e.hide()}),200)},t.appendChild(this.inputElement)},e.prototype.hideIfEscapeEvent=function(t){g.matchesKeystroke(t,"Escape")&&this.hide()},e.prototype.cylceIfInvokePaletteKey=function(t){n.isInvokePaletteKey(t)&&this.cycle()},e.prototype.cycle=function(){this.contextActions=void 0,this.paletteIndex++},e.prototype.onBeforeShow=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var r,i=this.xOffset,a=this.yOffset,s=y.toArray(e.index.all().filter((function(t){return m.isSelectable(t)&&t.selected})));1===s.length?(i+=(r=v.getAbsoluteClientBounds(s[0],this.domHelper,this.viewerOptions)).x+r.width,a+=r.y):(i+=(r=v.getAbsoluteClientBounds(e,this.domHelper,this.viewerOptions)).x,a+=r.y),t.style.left=i+"px",t.style.top=a+"px",t.style.width=this.defaultWidth+"px"},e.prototype.autocompleteSettings=function(t){var e=this;return{input:this.inputElement,emptyMsg:this.noCommandsMsg,className:"command-palette-suggestions",debounceWaitMs:this.debounceWaitMs,showOnFocus:!0,minLength:-1,fetch:function(n,o){return e.updateAutoCompleteActions(o,n,t)},onSelect:function(t){return e.onSelect(t)},render:function(t,n){return e.renderLabeledActionSuggestion(t,n)},customize:function(t,n,o,r){e.customizeSuggestionContainer(o,n,r)}}},e.prototype.onSelect=function(t){this.executeAction(t),this.hide()},e.prototype.updateAutoCompleteActions=function(t,e,n){var o=this;this.onLoading(),this.contextActions?(t(this.filterActions(e,this.contextActions)),this.onLoaded("success")):this.actionProviderRegistry.getActions(n,e,this.mousePositionTracker.lastPositionOnDiagram,this.paletteIndex).then((function(n){o.contextActions=n,t(o.filterActions(e,n)),o.onLoaded("success")})).catch((function(t){o.logger.error(o,"Failed to obtain actions from command palette action providers",t),o.onLoaded("error")}))},e.prototype.onLoading=function(){var t;this.loadingIndicator&&this.containerElement.contains(this.loadingIndicator)||(this.loadingIndicator=document.createElement("span"),(t=this.loadingIndicator.classList).add.apply(t,this.loadingIndicatorClasses),this.containerElement.appendChild(this.loadingIndicator))},e.prototype.onLoaded=function(t){this.containerElement.contains(this.loadingIndicator)&&this.containerElement.removeChild(this.loadingIndicator)},e.prototype.renderLabeledActionSuggestion=function(t,e){var n=document.createElement("div"),o=function(t){return t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}(e).split(" ").join("|"),r=new RegExp(o,"gi");return t.icon&&this.renderIcon(n,t.icon),n.innerHTML+=t.label.replace(r,(function(t){return"<em>"+t+"</em>"})),n},e.prototype.renderIcon=function(t,e){t.innerHTML+='<span class="icon fa '+e+'"></span>'},e.prototype.filterActions=function(t,e){return y.toArray(e.filter((function(e){var n=e.label.toLowerCase();return t.split(" ").every((function(t){return-1!==n.indexOf(t.toLowerCase())}))})))},e.prototype.customizeSuggestionContainer=function(t,e,n){this.containerElement&&this.containerElement.appendChild(t)},e.prototype.hide=function(){t.prototype.hide.call(this),this.autoCompleteResult&&this.autoCompleteResult.destroy()},e.prototype.executeAction=function(t){var e=this;this.actionDispatcherProvider().then((function(e){return e.dispatchAll(function(t){return u.isLabeledAction(t)?t.actions:u.isAction(t)?[t]:[]}(t))})).catch((function(t){return e.logger.error(e,"No action dispatcher available to execute command palette action",t)}))},e.ID="command-palette",e.isInvokePaletteKey=function(t){return g.matchesKeystroke(t,"Space","ctrl")},i([c.inject(d.TYPES.IActionDispatcherProvider),a("design:type",Function)],e.prototype,"actionDispatcherProvider",void 0),i([c.inject(d.TYPES.ICommandPaletteActionProviderRegistry),a("design:type",b.CommandPaletteActionProviderRegistry)],e.prototype,"actionProviderRegistry",void 0),i([c.inject(d.TYPES.ViewerOptions),a("design:type",Object)],e.prototype,"viewerOptions",void 0),i([c.inject(d.TYPES.DOMHelper),a("design:type",f.DOMHelper)],e.prototype,"domHelper",void 0),i([c.inject(_.MousePositionTracker),a("design:type",_.MousePositionTracker)],e.prototype,"mousePositionTracker",void 0),n=i([c.injectable()],e)}(l.AbstractUIExtension);e.CommandPalette=P;var S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.keyDown=function(t,e){if(g.matchesKeystroke(e,"Escape"))return[new p.SetUIExtensionVisibilityAction(P.ID,!1,[])];if(P.isInvokePaletteKey(e)){var n=y.toArray(t.index.all().filter((function(t){return m.isSelectable(t)&&t.selected})).map((function(t){return t.id})));return[new p.SetUIExtensionVisibilityAction(P.ID,!0,n)]}return[]},e}(h.KeyListener);e.CommandPaletteKeyListener=S},5408:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6700),r=n(1826),i=n(8681),a=n(2019),s=new o.ContainerModule((function(t){t(a.CommandPalette).toSelf().inSingletonScope(),t(r.TYPES.IUIExtension).toService(a.CommandPalette),t(r.TYPES.KeyListener).to(a.CommandPaletteKeyListener),t(i.CommandPaletteActionProviderRegistry).toSelf().inSingletonScope(),t(r.TYPES.ICommandPaletteActionProviderRegistry).toService(i.CommandPaletteActionProviderRegistry)}));e.default=s},187:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toAnchor=function(t){return t instanceof HTMLElement?{x:t.offsetLeft,y:t.offsetTop}:t}},2783:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6700),r=n(2200),i=n(7854),a=n(1826),s=new o.ContainerModule((function(t){t(a.TYPES.IContextMenuServiceProvider).toProvider((function(t){return function(){return new Promise((function(e,n){t.container.isBound(a.TYPES.IContextMenuService)?e(t.container.get(a.TYPES.IContextMenuService)):n()}))}})),t(a.TYPES.MouseListener).to(i.ContextMenuMouseListener),t(a.TYPES.IContextMenuProviderRegistry).to(r.ContextMenuProviderRegistry)}));e.default=s},2200:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(6700),s=n(1826),c=n(3344),u=n(1982),d=function(){function t(t){void 0===t&&(t=[]),this.menuProviders=t}return t.prototype.getItems=function(t,e){var n=this.menuProviders.map((function(n){return n.getItems(t,e)}));return Promise.all(n).then(this.flattenAndRestructure)},t.prototype.flattenAndRestructure=function(t){for(var e=t.reduce((function(t,e){return void 0!==e?t.concat(e):t}),[]),n=function(t){if(t.parentId){for(var n=t.parentId.split("."),o=void 0,r=e,i=function(t){(o=r.find((function(e){return t===e.id})))&&o.children&&(r=o.children)},a=0,s=n;a<s.length;a++)i(s[a]);o&&(o.children?o.children.push(t):o.children=[t],e=e.filter((function(e){return e!==t})))}},o=0,r=e.filter((function(t){return t.parentId}));o<r.length;o++)n(r[o]);return e},o([a.injectable(),i(0,a.multiInject(s.TYPES.IContextMenuItemProvider)),i(0,a.optional()),r("design:paramtypes",[Array])],t)}();e.ContextMenuProviderRegistry=d;var l=function(){function t(){}return t.prototype.getItems=function(t,e){var n=Array.from(t.index.all().filter(u.isSelected).filter(c.isDeletable));return Promise.resolve([{id:"delete",label:"Delete",sortString:"d",group:"edit",actions:[new c.DeleteElementAction(n.map((function(t){return t.id})))],isEnabled:function(){return n.length>0}}])},o([a.injectable()],t)}();e.DeleteContextMenuItemProvider=l},7854:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}},c=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((o=o.apply(t,e||[])).next())}))},u=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var d=n(6700),l=n(2200),p=n(6589),f=n(1826),h=n(1982),y=n(8558),g=function(t){function e(e,n){var o=t.call(this)||this;return o.contextMenuService=e,o.menuProvider=n,o}return r(e,t),e.prototype.mouseDown=function(t,e){return 2===e.button&&this.showContextMenu(t,e),[]},e.prototype.showContextMenu=function(t,e){return c(this,void 0,void 0,(function(){var n,o,r,i,a,s;return u(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,this.contextMenuService()];case 1:return n=c.sent(),[3,3];case 2:return c.sent(),[2];case 3:return o={x:e.x,y:e.y},r=!1,(i=y.findParentByFeature(t,h.isSelectable))&&(r=i.selected,i.selected=!0),a=function(){i&&(i.selected=r)},[4,this.menuProvider.getItems(t.root,o)];case 4:return s=c.sent(),n.show(s,o,a),[2]}}))}))},i([s(0,d.inject(f.TYPES.IContextMenuServiceProvider)),s(1,d.inject(f.TYPES.IContextMenuProviderRegistry)),a("design:paramtypes",[Function,l.ContextMenuProviderRegistry])],e)}(p.MouseListener);e.ContextMenuMouseListener=g},5714:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(6700),a=n(6771),s=n(9294),c=n(4626),u=n(7073),d=n(9046),l=n(6283),p=n(4096),f=function(){function t(){}return t.prototype.decorate=function(t,e){if(s.isDecoration(e)){var n=this.getPosition(e),o="translate("+n.x+", "+n.y+")";c.setAttr(t,"transform",o)}return t},t.prototype.getPosition=function(t){if(t instanceof a.SChildElement&&t.parent instanceof l.SRoutableElement){var e=this.edgeRouterRegistry.get(t.parent.routerKind).route(t.parent);if(e.length>1){var n=Math.floor(.5*(e.length-1)),o=d.isSizeable(t)?{x:-.5*t.bounds.width,y:-.5*t.bounds.width}:u.ORIGIN_POINT;return{x:.5*(e[n].x+e[n+1].x)+o.x,y:.5*(e[n].y+e[n+1].y)+o.y}}}return d.isSizeable(t)?{x:-.666*t.bounds.width,y:-.666*t.bounds.height}:u.ORIGIN_POINT},t.prototype.postUpdate=function(){},o([i.inject(p.EdgeRouterRegistry),r("design:type",p.EdgeRouterRegistry)],t.prototype,"edgeRouterRegistry",void 0),o([i.injectable()],t)}();e.DecorationPlacer=f},2849:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6708),r=n(6700),i=n(9294),a=n(2380),s=n(1826),c=n(5714),u=new r.ContainerModule((function(t,e,n){o.configureModelElement({bind:t,isBound:n},"marker",i.SIssueMarker,a.IssueMarkerView),t(c.DecorationPlacer).toSelf().inSingletonScope(),t(s.TYPES.IVNodePostprocessor).toService(c.DecorationPlacer)}));e.default=u},9294:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(6211),a=n(9046);e.decorationFeature=Symbol("decorationFeature"),e.isDecoration=function(t){return t.hasFeature(e.decorationFeature)};var s=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return r(n,t),n.DEFAULT_FEATURES=[e.decorationFeature,a.boundsFeature,i.hoverFeedbackFeature,i.popupFeature],n}(a.SShapeElement);e.SDecoration=s;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(s);e.SIssueMarker=c;e.SIssue=function(){}},2380:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var r=n(2388),i=n(4626),a=n(6700),s=function(){function t(){}return t.prototype.render=function(t,e){var n=this.getMaxSeverity(t),o=r.svg("g",{"class-sprotty-issue":!0},r.svg("g",{transform:"scale(0.008928571428571428, 0.008928571428571428)"},r.svg("path",{d:this.getPath(n)})));return i.setClass(o,"sprotty-"+n,!0),o},t.prototype.getMaxSeverity=function(t){for(var e="info",n=0,o=t.issues.map((function(t){return t.severity}));n<o.length;n++){var r=o[n];("error"===r||"warning"===r&&"info"===e)&&(e=r)}return e},t.prototype.getPath=function(t){switch(t){case"error":case"warning":return"M768 128q209 0 385.5 103t279.5 279.5 103 385.5-103 385.5-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103zm128 1247v-190q0-14-9-23.5t-22-9.5h-192q-13 0-23 10t-10 23v190q0 13 10 23t23 10h192q13 0 22-9.5t9-23.5zm-2-344l18-621q0-12-10-18-10-8-24-8h-220q-14 0-24 8-10 6-10 18l17 621q0 10 10 17.5t24 7.5h185q14 0 23.5-7.5t10.5-17.5z";case"info":return"M1024 1376v-160q0-14-9-23t-23-9h-96v-512q0-14-9-23t-23-9h-320q-14 0-23 9t-9 23v160q0 14 9 23t23 9h96v320h-96q-14 0-23 9t-9 23v160q0 14 9 23t23 9h448q14 0 23-9t9-23zm-128-896v-160q0-14-9-23t-23-9h-192q-14 0-23 9t-9 23v160q0 14 9 23t23 9h192q14 0 23-9t9-23zm640 416q0 209-103 385.5t-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103 385.5 103 279.5 279.5 103 385.5z"}},o([a.injectable()],t)}();e.IssueMarkerView=s},1661:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6700),r=n(1826),i=n(1022),a=new o.ContainerModule((function(t){t(i.EdgeLayoutPostprocessor).toSelf().inSingletonScope(),t(r.TYPES.IVNodePostprocessor).toService(i.EdgeLayoutPostprocessor),t(r.TYPES.HiddenVNodePostprocessor).toService(i.EdgeLayoutPostprocessor)}));e.default=a},1022:function(t,e,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(6700),s=n(6771),c=n(4626),u=n(6054),d=n(7073),l=n(9046),p=n(8971),f=n(4096),h=function(){function t(){}return t.prototype.decorate=function(t,e){if(p.isEdgeLayoutable(e)&&e.parent instanceof u.SEdge&&e.bounds!==d.EMPTY_BOUNDS){var n=this.getEdgePlacement(e),o=e.parent,r=Math.min(1,Math.max(0,n.position)),i=this.edgeRouterRegistry.get(o.routerKind),a=i.pointAt(o,r),s=i.derivativeAt(o,r),l="";if(a&&s){l+="translate("+a.x+", "+a.y+")";var f=d.toDegrees(Math.atan2(s.y,s.x));if(n.rotate){var h=f;Math.abs(f)>90&&(f<0?h+=180:f>0&&(h-=180)),l+=" rotate("+h+")",l+=" translate("+(y=this.getRotatedAlignment(e,n,h!==f)).x+", "+y.y+")"}else{var y;l+=" translate("+(y=this.getAlignment(e,n,f)).x+", "+y.y+")"}c.setAttr(t,"transform",l)}}return t},t.prototype.getRotatedAlignment=function(t,e,n){var o=l.isAlignable(t)?t.alignment.x:0,r=l.isAlignable(t)?t.alignment.y:0,i=t.bounds;if("on"===e.side)return{x:o-.5*i.height,y:r-.5*i.height};if(n)switch(e.position<.3333333?o-=i.width+e.offset:e.position<.6666666?o-=.5*i.width:o+=e.offset,e.side){case"left":case"bottom":r-=e.offset+i.height;break;case"right":case"top":r+=e.offset}else switch(e.position<.3333333?o+=e.offset:e.position<.6666666?o-=.5*i.width:o-=i.width+e.offset,e.side){case"right":case"bottom":r+=-e.offset-i.height;break;case"left":case"top":r+=e.offset}return{x:o,y:r}},t.prototype.getEdgePlacement=function(t){for(var e=t,n=[];void 0!==e;){var r=e.edgePlacement;if(void 0!==r&&n.push(r),!(e instanceof s.SChildElement))break;e=e.parent}return n.reverse().reduce((function(t,e){return o(o({},t),e)}),p.DEFAULT_EDGE_PLACEMENT)},t.prototype.getAlignment=function(t,e,n){var o=t.bounds,r=l.isAlignable(t)?t.alignment.x-o.width:0,i=l.isAlignable(t)?t.alignment.y-o.height:0;if("on"===e.side)return{x:r+.5*o.height,y:i+.5*o.height};var a=this.getQuadrant(n),s={x:e.offset,y:i+.5*o.height},c={x:e.offset,y:i+o.height+e.offset},u={x:-o.width-e.offset,y:i+o.height+e.offset},p={x:-o.width-e.offset,y:i+.5*o.height},f={x:-o.width-e.offset,y:i-e.offset},h={x:e.offset,y:i-e.offset};switch(e.side){case"left":switch(a.orientation){case"west":return d.linear(c,u,a.position);case"north":return d.linear(u,f,a.position);case"east":return d.linear(f,h,a.position);case"south":return d.linear(h,c,a.position)}break;case"right":switch(a.orientation){case"west":return d.linear(f,h,a.position);case"north":return d.linear(h,c,a.position);case"east":return d.linear(c,u,a.position);case"south":return d.linear(u,f,a.position)}break;case"top":switch(a.orientation){case"west":return d.linear(f,h,a.position);case"north":return this.linearFlip(h,s,p,f,a.position);case"east":return d.linear(f,h,a.position);case"south":return this.linearFlip(h,s,p,f,a.position)}break;case"bottom":switch(a.orientation){case"west":return d.linear(c,u,a.position);case"north":return this.linearFlip(u,p,s,c,a.position);case"east":return d.linear(c,u,a.position);case"south":return this.linearFlip(u,p,s,c,a.position)}}return{x:0,y:0}},t.prototype.getQuadrant=function(t){return Math.abs(t)>135?{orientation:"west",position:(t>0?t-135:t+225)/90}:t<-45?{orientation:"north",position:(t+135)/90}:t<45?{orientation:"east",position:(t+45)/90}:{orientation:"south",position:(t-45)/90}},t.prototype.linearFlip=function(t,e,n,o,r){return r<.5?d.linear(t,e,2*r):d.linear(n,o,2*r-1)},t.prototype.postUpdate=function(){},r([a.inject(f.EdgeRouterRegistry),i("design:type",f.EdgeRouterRegistry)],t.prototype,"edgeRouterRegistry",void 0),r([a.injectable()],t)}();e.EdgeLayoutPostprocessor=h},8971:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(6771),a=n(9046),s=n(6283);e.edgeLayoutFeature=Symbol("edgeLayout"),e.isEdgeLayoutable=function(t){return t instanceof i.SChildElement&&t.parent instanceof s.SRoutableElement&&"edgePlacement"in t&&a.isBoundsAware(t)&&t.hasFeature(e.edgeLayoutFeature)};var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(Object);e.EdgePlacement=c,e.DEFAULT_EDGE_PLACEMENT={rotate:!0,side:"top",position:.5,offset:7}},6077:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.creatingOnDragFeature=Symbol("creatingOnDragFeature"),e.isCreatingOnDrag=function(t){return t.hasFeature(e.creatingOnDragFeature)&&void 0!==t.createAction}},3235:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(1864),u=n(6771),d=n(6700),l=n(1826),p=function(){function t(e,n){this.containerId=e,this.elementSchema=n,this.kind=t.KIND}return t.KIND="createElement",t}();e.CreateElementAction=p;var f=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return r(e,t),e.prototype.execute=function(t){var e=t.root.index.getById(this.action.containerId);return e instanceof u.SParentElement&&(this.container=e,this.newElement=t.modelFactory.createElement(this.action.elementSchema),this.container.add(this.newElement)),t.root},e.prototype.undo=function(t){return this.container.remove(this.newElement),t.root},e.prototype.redo=function(t){return this.container.add(this.newElement),t.root},e.KIND=p.KIND,i([d.injectable(),s(0,d.inject(l.TYPES.Action)),a("design:paramtypes",[p])],e)}(c.Command);e.CreateElementCommand=f},3344:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(1864),u=n(6771),d=n(1826),l=n(6700);function p(t){return t instanceof u.SChildElement&&t.hasFeature(e.deletableFeature)}e.deletableFeature=Symbol("deletableFeature"),e.isDeletable=p;var f=function(){function t(e){this.elementIds=e,this.kind=t.KIND}return t.KIND="delete",t}();e.DeleteElementAction=f;e.ResolvedDelete=function(){};var h=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.resolvedDeletes=[],n}return r(e,t),e.prototype.execute=function(t){for(var e=t.root.index,n=0,o=this.action.elementIds;n<o.length;n++){var r=o[n],i=e.getById(r);i&&p(i)&&(this.resolvedDeletes.push({child:i,parent:i.parent}),i.parent.remove(i))}return t.root},e.prototype.undo=function(t){for(var e=0,n=this.resolvedDeletes;e<n.length;e++){var o=n[e];o.parent.add(o.child)}return t.root},e.prototype.redo=function(t){for(var e=0,n=this.resolvedDeletes;e<n.length;e++){var o=n[e];o.parent.remove(o.child)}return t.root},e.KIND=f.KIND,i([l.injectable(),s(0,l.inject(d.TYPES.Action)),a("design:paramtypes",[f])],e)}(c.Command);e.DeleteElementCommand=h},2110:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6700),r=n(1826),i=n(2857),a=n(6529),s=n(6708),c=n(6283),u=n(9779),d=n(3344),l=n(5149),p=n(2628),f=n(3011),h=n(9142);e.edgeEditModule=new o.ContainerModule((function(t,e,n){var o={bind:t,isBound:n};i.configureCommand(o,f.SwitchEditModeCommand),i.configureCommand(o,h.ReconnectCommand),i.configureCommand(o,d.DeleteElementCommand),s.configureModelElement(o,"dangling-anchor",c.SDanglingAnchor,u.EmptyGroupView)})),e.labelEditModule=new o.ContainerModule((function(t,e,n){t(r.TYPES.MouseListener).to(l.EditLabelMouseListener),t(r.TYPES.KeyListener).to(l.EditLabelKeyListener),i.configureCommand({bind:t,isBound:n},l.ApplyLabelEditCommand)})),e.labelEditUiModule=new o.ContainerModule((function(t,e,n){var o={bind:t,isBound:n};a.configureActionHandler(o,l.EditLabelAction.KIND,p.EditLabelActionHandler),t(p.EditLabelUI).toSelf().inSingletonScope(),t(r.TYPES.IUIExtension).toService(p.EditLabelUI)}))},2628:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((o=o.apply(t,e||[])).next())}))},c=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},u=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o};Object.defineProperty(e,"__esModule",{value:!0});var d=n(6700),l=n(1826),p=n(3999),f=n(8842),h=n(5509),y=n(3280),g=n(8611),v=n(9046),m=n(4678),b=n(5149),_=n(4446),w=function(){function t(){}return t.prototype.handle=function(t){if(b.isEditLabelAction(t))return new f.SetUIExtensionVisibilityAction(P.ID,!0,[t.labelId])},i([d.injectable()],t)}();e.EditLabelActionHandler=w;var P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.validationTimeout=void 0,e.isActive=!1,e.blockApplyEditOnInvalidInput=!0,e.isCurrentLabelValid=!0,e}var n;return r(e,t),n=e,e.prototype.id=function(){return n.ID},e.prototype.containerClass=function(){return"label-edit"},Object.defineProperty(e.prototype,"labelId",{get:function(){return this.label?this.label.id:"unknown"},enumerable:!0,configurable:!0}),e.prototype.initializeContents=function(t){var e=this;t.style.position="absolute",this.inputElement=document.createElement("input"),this.textAreaElement=document.createElement("textarea"),[this.inputElement,this.textAreaElement].forEach((function(n){n.onkeydown=function(t){return e.applyLabelEditOnEvent(t,"Enter")},e.configureAndAdd(n,t)}))},e.prototype.configureAndAdd=function(t,e){var n=this;t.style.visibility="hidden",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.addEventListener("keydown",(function(t){return n.hideIfEscapeEvent(t)})),t.addEventListener("keyup",(function(e){return n.validateLabelIfContentChange(e,t.value)})),t.addEventListener("blur",(function(){return window.setTimeout((function(){return n.applyLabelEdit()}),200)})),e.appendChild(t)},Object.defineProperty(e.prototype,"editControl",{get:function(){return this.label&&this.label.isMultiLine?this.textAreaElement:this.inputElement},enumerable:!0,configurable:!0}),e.prototype.hideIfEscapeEvent=function(t){g.matchesKeystroke(t,"Escape")&&this.hide()},e.prototype.applyLabelEditOnEvent=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];g.matchesKeystroke.apply(void 0,u([t,e||"Enter"],n))&&(t.preventDefault(),this.applyLabelEdit())},e.prototype.validateLabelIfContentChange=function(t,e){void 0!==this.previousLabelContent&&this.previousLabelContent===e||(this.previousLabelContent=e,this.performLabelValidation(t,this.editControl.value))},e.prototype.applyLabelEdit=function(){return s(this,void 0,void 0,(function(){var t=this;return c(this,(function(e){switch(e.label){case 0:return this.isActive?this.blockApplyEditOnInvalidInput?[4,this.validateLabel(this.editControl.value)]:[3,2]:[2];case 1:if("error"===e.sent().severity)return this.editControl.focus(),[2];e.label=2;case 2:return this.actionDispatcherProvider().then((function(e){return e.dispatchAll([new b.ApplyLabelEditAction(t.labelId,t.editControl.value),new y.CommitModelAction])})).catch((function(e){return t.logger.error(t,"No action dispatcher available to execute apply label edit action",e)})),this.hide(),[2]}}))}))},e.prototype.performLabelValidation=function(t,e){var n=this;this.validationTimeout&&window.clearTimeout(this.validationTimeout),this.validationTimeout=window.setTimeout((function(){return n.validateLabel(e)}),200)},e.prototype.validateLabel=function(t){return s(this,void 0,void 0,(function(){var e,n;return c(this,(function(o){switch(o.label){case 0:if(!this.labelValidator||!this.label)return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.labelValidator.validate(t,this.label)];case 2:return e=o.sent(),this.isCurrentLabelValid="error"!==e.severity,this.showValidationResult(e),[2,e];case 3:return n=o.sent(),this.logger.error(this,"Error validating edited label",n),[3,4];case 4:return this.isCurrentLabelValid=!0,[2,{severity:"ok",message:void 0}]}}))}))},e.prototype.showValidationResult=function(t){this.clearValidationResult(),this.validationDecorator&&this.validationDecorator.decorate(this.editControl,t)},e.prototype.clearValidationResult=function(){this.validationDecorator&&this.validationDecorator.dispose(this.editControl)},e.prototype.show=function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];S(n,e)&&!this.isActive&&(t.prototype.show.apply(this,u([e],n)),this.isActive=!0)},e.prototype.hide=function(){this.editControl.style.visibility="hidden",t.prototype.hide.call(this),this.clearValidationResult(),this.isActive=!1,this.isCurrentLabelValid=!0,this.previousLabelContent=void 0,this.labelElement&&(this.labelElement.style.visibility="visible")},e.prototype.onBeforeShow=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];this.label=O(n,e)[0],this.previousLabelContent=this.label.text,this.setPosition(t),this.applyTextContents(),this.applyFontStyling(),this.editControl.style.visibility="visible",this.editControl.focus()},e.prototype.setPosition=function(t){var e=0,n=0,o=100,r=20;if(this.label){var i=m.getZoom(this.label),a=v.getAbsoluteClientBounds(this.label,this.domHelper,this.viewerOptions);e=a.x+(this.label.editControlPositionCorrection?this.label.editControlPositionCorrection.x:0)*i,n=a.y+(this.label.editControlPositionCorrection?this.label.editControlPositionCorrection.y:0)*i,r=(this.label.editControlDimension?this.label.editControlDimension.height:r)*i,o=(this.label.editControlDimension?this.label.editControlDimension.width:o)*i}t.style.left=e+"px",t.style.top=n+"px",t.style.width=o+"px",this.editControl.style.width=o+"px",t.style.height=r+"px",this.editControl.style.height=r+"px"},e.prototype.applyTextContents=function(){this.label&&(this.editControl.value=this.label.text,this.editControl instanceof HTMLTextAreaElement?(this.editControl.selectionStart=0,this.editControl.selectionEnd=0,this.editControl.scrollTop=0,this.editControl.scrollLeft=0):this.editControl.setSelectionRange(0,this.editControl.value.length))},e.prototype.applyFontStyling=function(){if(this.label&&(this.labelElement=document.getElementById(this.domHelper.createUniqueDOMElementId(this.label)),this.labelElement)){this.labelElement.style.visibility="hidden";var t=window.getComputedStyle(this.labelElement);this.editControl.style.font=t.font,this.editControl.style.fontStyle=t.fontStyle,this.editControl.style.fontFamily=t.fontFamily,this.editControl.style.fontSize=(e=t.fontSize,n=m.getZoom(this.label),e.replace(/([0-9]+)/,(function(t){return String(Number.parseInt(t,10)*n)}))),this.editControl.style.fontWeight=t.fontWeight,this.editControl.style.lineHeight=t.lineHeight}var e,n},e.ID="editLabelUi",i([d.inject(l.TYPES.IActionDispatcherProvider),a("design:type",Function)],e.prototype,"actionDispatcherProvider",void 0),i([d.inject(l.TYPES.ViewerOptions),a("design:type",Object)],e.prototype,"viewerOptions",void 0),i([d.inject(l.TYPES.DOMHelper),a("design:type",h.DOMHelper)],e.prototype,"domHelper",void 0),i([d.inject(l.TYPES.IEditLabelValidator),d.optional(),a("design:type",Object)],e.prototype,"labelValidator",void 0),i([d.inject(l.TYPES.IEditLabelValidationDecorator),d.optional(),a("design:type",Object)],e.prototype,"validationDecorator",void 0),n=i([d.injectable()],e)}(p.AbstractUIExtension);function S(t,e){return 1===O(t,e).length}function O(t,e){return t.map((function(t){return e.index.getById(t)})).filter(_.isEditableLabel)}e.EditLabelUI=P},5149:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(6700),u=n(152),d=n(1864),l=n(1826),p=n(6589),f=n(6004),h=n(8611),y=n(1982),g=n(9140),v=n(4446),m=function(){function t(e){this.labelId=e,this.kind=t.KIND}return t.KIND="EditLabel",t}();e.EditLabelAction=m,e.isEditLabelAction=function(t){return u.isAction(t)&&t.kind===m.KIND&&"labelId"in t};var b=function(){function t(e,n){this.labelId=e,this.text=n,this.kind=t.KIND}return t.KIND="applyLabelEdit",t}();e.ApplyLabelEditAction=b;e.ResolvedLabelEdit=function(){};var _=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return r(e,t),e.prototype.execute=function(t){var e=t.root.index.getById(this.action.labelId);return e&&v.isEditableLabel(e)&&(this.resolvedLabelEdit={label:e,oldLabel:e.text,newLabel:this.action.text},e.text=this.action.text),t.root},e.prototype.undo=function(t){return this.resolvedLabelEdit&&(this.resolvedLabelEdit.label.text=this.resolvedLabelEdit.oldLabel),t.root},e.prototype.redo=function(t){return this.resolvedLabelEdit&&(this.resolvedLabelEdit.label.text=this.resolvedLabelEdit.newLabel),t.root},e.KIND=b.KIND,i([s(0,c.inject(l.TYPES.Action)),a("design:paramtypes",[b])],e)}(d.Command);e.ApplyLabelEditCommand=_;var w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.doubleClick=function(t,e){var n=S(t);return n?[new m(n.id)]:[]},e}(p.MouseListener);e.EditLabelMouseListener=w;var P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.keyDown=function(t,e){if(h.matchesKeystroke(e,"F2")){var n=g.toArray(t.index.all().filter((function(t){return y.isSelectable(t)&&t.selected}))).map(S).filter((function(t){return void 0!==t}));if(1===n.length)return[new m(n[0].id)]}return[]},e}(f.KeyListener);function S(t){return v.isEditableLabel(t)?t:v.isWithEditableLabel(t)&&t.editableLabel?t.editableLabel:void 0}e.EditLabelKeyListener=P,e.getEditableLabel=S},3011:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(6700),u=n(1864),d=n(6771),l=n(1826),p=n(6283),f=n(4096),h=n(4446),y=function(){function t(e,n){void 0===e&&(e=[]),void 0===n&&(n=[]),this.elementsToActivate=e,this.elementsToDeactivate=n,this.kind=t.KIND}return t.KIND="switchEditMode",t}();e.SwitchEditModeAction=y;var g=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.elementsToActivate=[],n.elementsToDeactivate=[],n.handlesToRemove=[],n}return r(e,t),e.prototype.execute=function(t){var e=this,n=t.root.index;return this.action.elementsToActivate.forEach((function(t){var o=n.getById(t);void 0!==o&&e.elementsToActivate.push(o)})),this.action.elementsToDeactivate.forEach((function(t){var o=n.getById(t);if(void 0!==o&&e.elementsToDeactivate.push(o),o instanceof p.SRoutingHandle&&o.parent instanceof p.SRoutableElement){var r=o.parent;e.shouldRemoveHandle(o,r)&&(e.handlesToRemove.push({handle:o,parent:r}),e.elementsToDeactivate.push(r),e.elementsToActivate.push(r))}})),this.doExecute(t)},e.prototype.doExecute=function(t){var e=this;return this.handlesToRemove.forEach((function(t){t.point=t.parent.routingPoints.splice(t.handle.pointIndex,1)[0]})),this.elementsToDeactivate.forEach((function(t){t instanceof p.SRoutableElement?t.removeAll((function(t){return t instanceof p.SRoutingHandle})):t instanceof p.SRoutingHandle&&(t.editMode=!1,t.danglingAnchor&&t.parent instanceof p.SRoutableElement&&t.danglingAnchor.original&&(t.parent.source===t.danglingAnchor?t.parent.sourceId=t.danglingAnchor.original.id:t.parent.target===t.danglingAnchor&&(t.parent.targetId=t.danglingAnchor.original.id),t.danglingAnchor.parent.remove(t.danglingAnchor),t.danglingAnchor=void 0))})),this.elementsToActivate.forEach((function(t){h.canEditRouting(t)&&t instanceof d.SParentElement?e.edgeRouterRegistry.get(t.routerKind).createRoutingHandles(t):t instanceof p.SRoutingHandle&&(t.editMode=!0)})),t.root},e.prototype.shouldRemoveHandle=function(t,e){return"junction"===t.kind&&void 0===this.edgeRouterRegistry.get(e.routerKind).route(e).find((function(e){return e.pointIndex===t.pointIndex}))},e.prototype.undo=function(t){var e=this;return this.handlesToRemove.forEach((function(t){void 0!==t.point&&t.parent.routingPoints.splice(t.handle.pointIndex,0,t.point)})),this.elementsToActivate.forEach((function(t){t instanceof p.SRoutableElement?t.removeAll((function(t){return t instanceof p.SRoutingHandle})):t instanceof p.SRoutingHandle&&(t.editMode=!1)})),this.elementsToDeactivate.forEach((function(t){h.canEditRouting(t)?e.edgeRouterRegistry.get(t.routerKind).createRoutingHandles(t):t instanceof p.SRoutingHandle&&(t.editMode=!0)})),t.root},e.prototype.redo=function(t){return this.doExecute(t)},e.KIND=y.KIND,i([c.inject(f.EdgeRouterRegistry),a("design:type",f.EdgeRouterRegistry)],e.prototype,"edgeRouterRegistry",void 0),i([c.injectable(),s(0,c.inject(l.TYPES.Action)),a("design:paramtypes",[y])],e)}(u.Command);e.SwitchEditModeCommand=g},4446:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6283);e.editFeature=Symbol("editFeature"),e.canEditRouting=function(t){return t instanceof o.SRoutableElement&&t.hasFeature(e.editFeature)},e.editLabelFeature=Symbol("editLabelFeature"),e.isEditableLabel=function(t){return"text"in t&&t.hasFeature(e.editLabelFeature)},e.withEditLabelFeature=Symbol("withEditLabelFeature"),e.isWithEditableLabel=function(t){return"editableLabel"in t&&t.hasFeature(e.withEditLabelFeature)}},9142:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(6700),u=n(1864),d=n(1826),l=n(6283),p=n(4096),f=function(){function t(e,n,o){this.routableId=e,this.newSourceId=n,this.newTargetId=o,this.kind=t.KIND}return t.KIND="reconnect",t}();e.ReconnectAction=f;var h=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return r(e,t),e.prototype.execute=function(t){return this.doExecute(t),t.root},e.prototype.doExecute=function(t){var e=t.root.index.getById(this.action.routableId);if(e instanceof l.SRoutableElement){var n=this.edgeRouterRegistry.get(e.routerKind),o=n.takeSnapshot(e);n.applyReconnect(e,this.action.newSourceId,this.action.newTargetId);var r=n.takeSnapshot(e);this.memento={edge:e,before:o,after:r}}},e.prototype.undo=function(t){return this.memento&&this.edgeRouterRegistry.get(this.memento.edge.routerKind).applySnapshot(this.memento.edge,this.memento.before),t.root},e.prototype.redo=function(t){return this.memento&&this.edgeRouterRegistry.get(this.memento.edge.routerKind).applySnapshot(this.memento.edge,this.memento.after),t.root},e.KIND=f.KIND,i([c.inject(p.EdgeRouterRegistry),a("design:type",p.EdgeRouterRegistry)],e.prototype,"edgeRouterRegistry",void 0),i([c.injectable(),s(0,c.inject(d.TYPES.Action)),a("design:paramtypes",[f])],e)}(u.Command);e.ReconnectCommand=h},443:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6700),r=n(1826),i=n(6609),a=new o.ContainerModule((function(t){t(r.TYPES.IButtonHandler).toConstructor(i.ExpandButtonHandler)}));e.default=a},6609:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var r=n(8558),i=n(9391),a=n(6700),s=function(){function t(e,n){this.expandIds=e,this.collapseIds=n,this.kind=t.KIND}return t.KIND="collapseExpand",t}();e.CollapseExpandAction=s;var c=function(){function t(e){void 0===e&&(e=!0),this.expand=e,this.kind=t.KIND}return t.KIND="collapseExpandAll",t}();e.CollapseExpandAllAction=c;var u=function(){function t(){}return t.prototype.buttonPressed=function(t){var e=r.findParentByFeature(t,i.isExpandable);return void 0!==e?[new s(e.expanded?[]:[e.id],e.expanded?[e.id]:[])]:[]},t.TYPE="button:expand",o([a.injectable()],t)}();e.ExpandButtonHandler=u},9391:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.expandFeature=Symbol("expandFeature"),e.isExpandable=function(t){return t.hasFeature(e.expandFeature)&&"expanded"in t}},8948:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var r=n(2388),i=n(9391),a=n(8558),s=n(6700),c=function(){function t(){}return t.prototype.render=function(t,e){var n=a.findParentByFeature(t,i.isExpandable),o=void 0!==n&&n.expanded?"M 1,5 L 8,12 L 15,5 Z":"M 1,8 L 8,15 L 8,1 Z";return r.svg("g",{"class-sprotty-button":"{true}","class-enabled":"{button.enabled}"},r.svg("rect",{x:0,y:0,width:16,height:16,opacity:0}),r.svg("path",{d:o}))},o([s.injectable()],t)}();e.ExpandButtonView=c},5853:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6700),r=n(1826),i=n(33),a=n(4350),s=n(2857),c=new o.ContainerModule((function(t,e,n){t(r.TYPES.KeyListener).to(i.ExportSvgKeyListener).inSingletonScope(),t(r.TYPES.HiddenVNodePostprocessor).to(i.ExportSvgPostprocessor).inSingletonScope(),s.configureCommand({bind:t,isBound:n},i.ExportSvgCommand),t(r.TYPES.SvgExporter).to(a.SvgExporter).inSingletonScope()}));e.default=c},33:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(6700),u=n(1864),d=n(1982),l=n(152),p=n(6771),f=n(6004),h=n(8611),y=n(4965),g=n(4350),v=n(7740),m=n(6211),b=n(1826),_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.keyDown=function(t,e){return h.matchesKeystroke(e,"KeyE","ctrlCmd","shift")?[new w]:[]},i([c.injectable()],e)}(f.KeyListener);e.ExportSvgKeyListener=_;var w=function(){function t(e){void 0===e&&(e=""),this.requestId=e,this.kind=t.KIND}return t.create=function(){return new t(l.generateRequestId())},t.KIND="requestExportSvg",t}();e.RequestExportSvgAction=w;var P=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return r(e,t),e.prototype.execute=function(t){if(y.isExportable(t.root)){var e=t.modelFactory.createRoot(t.root);if(y.isExportable(e))return v.isViewport(e)&&(e.zoom=1,e.scroll={x:0,y:0}),e.index.all().forEach((function(t){d.isSelectable(t)&&t.selected&&(t.selected=!1),m.isHoverable(t)&&t.hoverFeedback&&(t.hoverFeedback=!1)})),{model:e,modelChanged:!0,cause:this.action}}return{model:t.root,modelChanged:!1}},e.KIND=w.KIND,i([s(0,c.inject(b.TYPES.Action)),a("design:paramtypes",[w])],e)}(u.HiddenCommand);e.ExportSvgCommand=P;var S=function(){function t(){}return t.prototype.decorate=function(t,e){return e instanceof p.SModelRoot&&(this.root=e),t},t.prototype.postUpdate=function(t){this.root&&void 0!==t&&t.kind===w.KIND&&this.svgExporter.export(this.root,t)},i([c.inject(b.TYPES.SvgExporter),a("design:type",g.SvgExporter)],t.prototype,"svgExporter",void 0),i([c.injectable()],t)}();e.ExportSvgPostprocessor=S},4965:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.exportFeature=Symbol("exportFeature"),e.isExportable=function(t){return t.hasFeature(e.exportFeature)}},4350:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(9046),a=n(1977),s=n(1826),c=n(7073),u=n(6700),d=function(){function t(e,n){void 0===n&&(n=""),this.svg=e,this.responseId=n,this.kind=t.KIND}return t.KIND="exportSvg",t}();e.ExportSvgAction=d;var l=function(){function t(){}return t.prototype.export=function(t,e){if("undefined"!=typeof document){var n=document.getElementById(this.options.hiddenDiv);if(null!==n&&n.firstElementChild&&"svg"===n.firstElementChild.tagName){var o=n.firstElementChild,r=this.createSvg(o,t);this.actionDispatcher.dispatch(new d(r,e?e.requestId:""))}}},t.prototype.createSvg=function(t,e){var n=new XMLSerializer,o=n.serializeToString(t),r=document.createElement("iframe");if(document.body.appendChild(r),!r.contentWindow)throw new Error("IFrame has no contentWindow");var i=r.contentWindow.document;i.open(),i.write(o),i.close();var a=i.getElementById(t.id);a.removeAttribute("opacity"),this.copyStyles(t,a,["width","height","opacity"]),a.setAttribute("version","1.1");var s=this.getBounds(e);a.setAttribute("viewBox",s.x+" "+s.y+" "+s.width+" "+s.height);var c=n.serializeToString(a);return document.body.removeChild(r),c},t.prototype.copyStyles=function(t,e,n){for(var o=getComputedStyle(t),r=getComputedStyle(e),i="",a=0;a<o.length;a++){var s=o[a];if(-1===n.indexOf(s)){var c=o.getPropertyValue(s);r.getPropertyValue(s)!==c&&(i+=s+":"+c+";")}}for(""!==i&&e.setAttribute("style",i),a=0;a<t.childNodes.length;++a){var u=t.childNodes[a],d=e.childNodes[a];u instanceof Element&&this.copyStyles(u,d,[])}},t.prototype.getBounds=function(t){var e=[c.EMPTY_BOUNDS];return t.children.forEach((function(t){i.isBoundsAware(t)&&e.push(t.bounds)})),e.reduce((function(t,e){return c.combine(t,e)}))},o([u.inject(s.TYPES.ViewerOptions),r("design:type",Object)],t.prototype,"options",void 0),o([u.inject(s.TYPES.IActionDispatcher),r("design:type",a.ActionDispatcher)],t.prototype,"actionDispatcher",void 0),o([u.inject(s.TYPES.ILogger),r("design:type",Object)],t.prototype,"log",void 0),o([u.injectable()],t)}();e.SvgExporter=l},965:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6700),r=n(1826),i=n(3906),a=new o.ContainerModule((function(t){t(r.TYPES.IVNodePostprocessor).to(i.ElementFader).inSingletonScope()}));e.default=a},3906:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var a=n(6700),s=n(6692),c=n(6771),u=n(4626),d=n(6793),l=function(t){function e(e,n,o,r){void 0===r&&(r=!1);var i=t.call(this,o)||this;return i.model=e,i.elementFades=n,i.removeAfterFadeOut=r,i}return r(e,t),e.prototype.tween=function(t,e){for(var n=0,o=this.elementFades;n<o.length;n++){var r=o[n],i=r.element;"in"===r.type?i.opacity=t:"out"===r.type&&(i.opacity=1-t,1===t&&this.removeAfterFadeOut&&i instanceof c.SChildElement&&i.parent.remove(i))}return this.model},e}(s.Animation);e.FadeAnimation=l;var p=function(){function t(){}return t.prototype.decorate=function(t,e){return d.isFadeable(e)&&1!==e.opacity&&u.setAttr(t,"opacity",e.opacity),t},t.prototype.postUpdate=function(){},i([a.injectable()],t)}();e.ElementFader=p},6793:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fadeFeature=Symbol("fadeFeature"),e.isFadeable=function(t){return t.hasFeature(e.fadeFeature)&&void 0!==t.opacity}},7999:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6700),r=n(1826),i=n(8099),a=n(6034),s=n(2857),c=n(6529),u=n(7872),d=n(7053),l=n(3249),p=new o.ContainerModule((function(t,e,n){t(r.TYPES.PopupVNodePostprocessor).to(a.PopupPositionUpdater).inSingletonScope(),t(r.TYPES.MouseListener).to(i.HoverMouseListener),t(r.TYPES.PopupMouseListener).to(i.PopupHoverMouseListener),t(r.TYPES.KeyListener).to(i.HoverKeyListener),t(r.TYPES.HoverState).toConstantValue({mouseOverTimer:void 0,mouseOutTimer:void 0,popupOpen:!1,previousPopupElement:void 0}),t(i.ClosePopupActionHandler).toSelf().inSingletonScope();var o={bind:t,isBound:n};s.configureCommand(o,i.HoverFeedbackCommand),s.configureCommand(o,i.SetPopupModelCommand),c.configureActionHandler(o,i.SetPopupModelCommand.KIND,i.ClosePopupActionHandler),c.configureActionHandler(o,u.FitToScreenCommand.KIND,i.ClosePopupActionHandler),c.configureActionHandler(o,u.CenterCommand.KIND,i.ClosePopupActionHandler),c.configureActionHandler(o,d.SetViewportCommand.KIND,i.ClosePopupActionHandler),c.configureActionHandler(o,l.MoveCommand.KIND,i.ClosePopupActionHandler)}));e.default=p},8099:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(6700),u=n(8611),d=n(7073),l=n(1826),p=n(6771),f=n(6589),h=n(152),y=n(1864),g=n(1194),v=n(6004),m=n(8558),b=n(9046),_=n(6211),w=function(){function t(e,n){this.mouseoverElement=e,this.mouseIsOver=n,this.kind=t.KIND}return t.KIND="hoverFeedback",t}();e.HoverFeedbackAction=w;var P=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return r(e,t),e.prototype.execute=function(t){var e=t.root.index.getById(this.action.mouseoverElement);return e&&_.isHoverable(e)&&(e.hoverFeedback=this.action.mouseIsOver),this.redo(t)},e.prototype.undo=function(t){return t.root},e.prototype.redo=function(t){return t.root},e.KIND=w.KIND,i([c.injectable(),s(0,c.inject(l.TYPES.Action)),a("design:paramtypes",[w])],e)}(y.SystemCommand);e.HoverFeedbackCommand=P;var S=function(){function t(e,n,o){void 0===o&&(o=""),this.elementId=e,this.bounds=n,this.requestId=o,this.kind=t.KIND}return t.create=function(e,n){return new t(e,n,h.generateRequestId())},t.KIND="requestPopupModel",t}();e.RequestPopupModelAction=S;var O=function(){function t(e,n){void 0===n&&(n=""),this.newRoot=e,this.responseId=n,this.kind=t.KIND}return t.KIND="setPopupModel",t}();e.SetPopupModelAction=O;var E=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return r(e,t),e.prototype.execute=function(t){return this.oldRoot=t.root,this.newRoot=t.modelFactory.createRoot(this.action.newRoot),this.newRoot},e.prototype.undo=function(t){return this.oldRoot},e.prototype.redo=function(t){return this.newRoot},e.KIND=O.KIND,i([c.injectable(),s(0,c.inject(l.TYPES.Action)),a("design:paramtypes",[O])],e)}(y.PopupCommand);e.SetPopupModelCommand=E;var x=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.mouseDown=function(t,e){return this.mouseIsDown=!0,[]},e.prototype.mouseUp=function(t,e){return this.mouseIsDown=!1,[]},e.prototype.stopMouseOutTimer=function(){void 0!==this.state.mouseOutTimer&&(window.clearTimeout(this.state.mouseOutTimer),this.state.mouseOutTimer=void 0)},e.prototype.startMouseOutTimer=function(){var t=this;return this.stopMouseOutTimer(),new Promise((function(e){t.state.mouseOutTimer=window.setTimeout((function(){t.state.popupOpen=!1,t.state.previousPopupElement=void 0,e(new O({type:g.EMPTY_ROOT.type,id:g.EMPTY_ROOT.id}))}),t.options.popupCloseDelay)}))},e.prototype.stopMouseOverTimer=function(){void 0!==this.state.mouseOverTimer&&(window.clearTimeout(this.state.mouseOverTimer),this.state.mouseOverTimer=void 0)},i([c.inject(l.TYPES.ViewerOptions),a("design:type",Object)],e.prototype,"options",void 0),i([c.inject(l.TYPES.HoverState),a("design:type",Object)],e.prototype,"state",void 0),e}(f.MouseListener);e.AbstractHoverMouseListener=x;var R=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.computePopupBounds=function(t,e){var n={x:-5,y:20},o=b.getAbsoluteBounds(t),r=t.root.canvasBounds,i=d.translate(o,r),a=i.x+i.width-e.x,s=i.y+i.height-e.y;s<=a&&this.allowSidePosition(t,"below",s)?n={x:-5,y:Math.round(s+5)}:a<=s&&this.allowSidePosition(t,"right",a)&&(n={x:Math.round(a+5),y:-5});var c=e.x+n.x,u=r.x+r.width;c>u&&(c=u);var l=e.y+n.y,p=r.y+r.height;return l>p&&(l=p),{x:c,y:l,width:-1,height:-1}},e.prototype.allowSidePosition=function(t,e,n){return!(t instanceof p.SModelRoot)&&n<=150},e.prototype.startMouseOverTimer=function(t,e){var n=this;return this.stopMouseOverTimer(),new Promise((function(o){n.state.mouseOverTimer=window.setTimeout((function(){var r=n.computePopupBounds(t,{x:e.pageX,y:e.pageY});o(new S(t.id,r)),n.state.popupOpen=!0,n.state.previousPopupElement=t}),n.options.popupOpenDelay)}))},e.prototype.mouseOver=function(t,e){var n=[];if(!this.mouseIsDown){var o=m.findParent(t,_.hasPopupFeature);this.state.popupOpen&&(void 0===o||void 0!==this.state.previousPopupElement&&this.state.previousPopupElement.id!==o.id)?n.push(this.startMouseOutTimer()):(this.stopMouseOverTimer(),this.stopMouseOutTimer()),void 0===o||void 0!==this.state.previousPopupElement&&this.state.previousPopupElement.id===o.id||n.push(this.startMouseOverTimer(o,e)),this.lastHoverFeedbackElementId&&(n.push(new w(this.lastHoverFeedbackElementId,!1)),this.lastHoverFeedbackElementId=void 0);var r=m.findParentByFeature(t,_.isHoverable);void 0!==r&&(n.push(new w(r.id,!0)),this.lastHoverFeedbackElementId=r.id)}return n},e.prototype.mouseOut=function(t,e){var n=[];if(!this.mouseIsDown){var o=document.elementFromPoint(e.x,e.y);if(!this.isSprottyPopup(o)){if(this.state.popupOpen){var r=m.findParent(t,_.hasPopupFeature);void 0!==this.state.previousPopupElement&&void 0!==r&&this.state.previousPopupElement.id===r.id&&n.push(this.startMouseOutTimer())}this.stopMouseOverTimer();var i=m.findParentByFeature(t,_.isHoverable);void 0!==i&&(n.push(new w(i.id,!1)),this.lastHoverFeedbackElementId=void 0)}}return n},e.prototype.isSprottyPopup=function(t){return!!t&&(t.id===this.options.popupDiv||!!t.parentElement&&this.isSprottyPopup(t.parentElement))},e.prototype.mouseMove=function(t,e){var n=[];if(!this.mouseIsDown){void 0!==this.state.previousPopupElement&&this.closeOnMouseMove(this.state.previousPopupElement,e)&&n.push(this.startMouseOutTimer());var o=m.findParent(t,_.hasPopupFeature);void 0===o||void 0!==this.state.previousPopupElement&&this.state.previousPopupElement.id===o.id||n.push(this.startMouseOverTimer(o,e))}return n},e.prototype.closeOnMouseMove=function(t,e){return t instanceof p.SModelRoot},i([c.inject(l.TYPES.ViewerOptions),a("design:type",Object)],e.prototype,"options",void 0),i([c.injectable()],e)}(x);e.HoverMouseListener=R;var I=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.mouseOut=function(t,e){return[this.startMouseOutTimer()]},e.prototype.mouseOver=function(t,e){return this.stopMouseOutTimer(),this.stopMouseOverTimer(),[]},i([c.injectable()],e)}(x);e.PopupHoverMouseListener=I;var T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.keyDown=function(t,e){return u.matchesKeystroke(e,"Escape")?[new O({type:g.EMPTY_ROOT.type,id:g.EMPTY_ROOT.id})]:[]},e}(v.KeyListener);e.HoverKeyListener=T;var M=function(){function t(){this.popupOpen=!1}return t.prototype.handle=function(t){if(t.kind===E.KIND)this.popupOpen=t.newRoot.type!==g.EMPTY_ROOT.type;else if(this.popupOpen)return new O({id:g.EMPTY_ROOT.id,type:g.EMPTY_ROOT.type})},i([c.injectable()],t)}();e.ClosePopupActionHandler=M},6211:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hoverFeedbackFeature=Symbol("hoverFeedbackFeature"),e.isHoverable=function(t){return t.hasFeature(e.hoverFeedbackFeature)},e.popupFeature=Symbol("popupFeature"),e.hasPopupFeature=function(t){return t.hasFeature(e.popupFeature)}},6034:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(6700),a=n(1826),s=function(){function t(){}return t.prototype.decorate=function(t,e){return t},t.prototype.postUpdate=function(){var t=document.getElementById(this.options.popupDiv);if(null!==t&&"undefined"!=typeof window){var e=t.getBoundingClientRect();window.innerHeight<e.height+e.top&&(t.style.top=window.pageYOffset+window.innerHeight-e.height-5+"px"),window.innerWidth<e.left+e.width&&(t.style.left=window.pageXOffset+window.innerWidth-e.width-5+"px"),e.left<0&&(t.style.left="0px"),e.top<0&&(t.style.top="0px")}},o([i.inject(a.TYPES.ViewerOptions),r("design:type",Object)],t.prototype,"options",void 0),o([i.injectable()],t)}();e.PopupPositionUpdater=s},3610:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6700),r=n(1826),i=n(3249),a=n(2857),s=new o.ContainerModule((function(t,e,n){t(r.TYPES.MouseListener).to(i.MoveMouseListener),a.configureCommand({bind:t,isBound:n},i.MoveCommand),t(i.LocationPostprocessor).toSelf().inSingletonScope(),t(r.TYPES.IVNodePostprocessor).toService(i.LocationPostprocessor),t(r.TYPES.HiddenVNodePostprocessor).toService(i.LocationPostprocessor)}));e.default=s},1026:(t,e)=>{"use strict";function n(t){return void 0!==t.position}Object.defineProperty(e,"__esModule",{value:!0}),e.moveFeature=Symbol("moveFeature"),e.isLocateable=n,e.isMoveable=function(t){return t.hasFeature(e.moveFeature)&&n(t)}},3249:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},a=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(6700),d=n(6692),l=n(1864),p=n(6771),f=n(8558),h=n(1826),y=n(6589),g=n(4626),v=n(6054),m=n(3280),b=n(7073),_=n(9046),w=n(6077),P=n(3344),S=n(3011),O=n(9142),E=n(6283),x=n(4096),R=n(8971),I=n(1982),T=n(9774),M=n(7740),A=n(1026),j=function(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!1),this.moves=t,this.animate=e,this.finished=n,this.kind=C.KIND};e.MoveAction=j;var C=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.resolvedMoves=new Map,n.edgeMementi=[],n}var n;return r(e,t),n=e,e.prototype.execute=function(t){var e=this,n=t.root.index,o=new Map,r=new Map;return this.action.moves.forEach((function(t){var i=n.getById(t.elementId);if(i instanceof E.SRoutingHandle&&e.edgeRouterRegistry){var a=i.parent;if(a instanceof E.SRoutableElement){var s=e.resolveHandleMove(i,a,t);if(s){var c=o.get(a);c||(c=[],o.set(a,c)),c.push(s)}}}else if(i&&A.isLocateable(i)){var u=e.resolveElementMove(i,t);u&&(e.resolvedMoves.set(u.element.id,u),e.edgeRouterRegistry&&n.getAttachedElements(i).forEach((function(t){if(t instanceof E.SRoutableElement){var e=r.get(t),n=b.subtract(u.toPosition,u.fromPosition),o=e?b.linear(e,n,.5):n;r.set(t,o)}})))}})),this.doMove(o,r),this.action.animate?(this.undoMove(),new d.CompoundAnimation(t.root,t,[new D(t.root,this.resolvedMoves,t,!1),new N(t.root,this.edgeMementi,t,!1)]).start()):t.root},e.prototype.resolveHandleMove=function(t,e,n){var o=n.fromPosition;if(!o){var r=this.edgeRouterRegistry.get(e.routerKind);o=r.getHandlePosition(e,r.route(e),t)}if(o)return{handle:t,fromPosition:o,toPosition:n.toPosition}},e.prototype.resolveElementMove=function(t,e){return{element:t,fromPosition:e.fromPosition||{x:t.position.x,y:t.position.y},toPosition:e.toPosition}},e.prototype.doMove=function(t,e){var n=this;this.resolvedMoves.forEach((function(t){t.element.position=t.toPosition})),t.forEach((function(t,e){var o=n.edgeRouterRegistry.get(e.routerKind),r=o.takeSnapshot(e);o.applyHandleMoves(e,t);var i=o.takeSnapshot(e);n.edgeMementi.push({edge:e,before:r,after:i})})),e.forEach((function(e,o){if(!t.get(o)){var r=n.edgeRouterRegistry.get(o.routerKind),i=r.takeSnapshot(o);if(o.source&&o.target&&n.resolvedMoves.get(o.source.id)&&n.resolvedMoves.get(o.target.id))o.routingPoints=o.routingPoints.map((function(t){return b.add(t,e)}));else{var a=I.isSelectable(o)&&o.selected;r.cleanupRoutingPoints(o,o.routingPoints,a,n.action.finished)}var s=r.takeSnapshot(o);n.edgeMementi.push({edge:o,before:i,after:s})}}))},e.prototype.undoMove=function(){var t=this;this.resolvedMoves.forEach((function(t){t.element.position=t.fromPosition})),this.edgeMementi.forEach((function(e){t.edgeRouterRegistry.get(e.edge.routerKind).applySnapshot(e.edge,e.before)}))},e.prototype.undo=function(t){return new d.CompoundAnimation(t.root,t,[new D(t.root,this.resolvedMoves,t,!0),new N(t.root,this.edgeMementi,t,!0)]).start()},e.prototype.redo=function(t){return new d.CompoundAnimation(t.root,t,[new D(t.root,this.resolvedMoves,t,!1),new N(t.root,this.edgeMementi,t,!1)]).start()},e.prototype.merge=function(t,e){var o=this;if(!this.action.animate&&t instanceof n)return t.resolvedMoves.forEach((function(t,e){var n=o.resolvedMoves.get(e);n?n.toPosition=t.toPosition:o.resolvedMoves.set(e,t)})),t.edgeMementi.forEach((function(t){var e=o.edgeMementi.find((function(e){return e.edge.id===t.edge.id}));e?e.after=t.after:o.edgeMementi.push(t)})),!0;if(t instanceof O.ReconnectCommand){var r=t.memento;if(r){var i=this.edgeMementi.find((function(t){return t.edge.id===r.edge.id}));i?i.after=r.after:this.edgeMementi.push(r)}return!0}return!1},e.KIND="move",a([u.inject(x.EdgeRouterRegistry),u.optional(),s("design:type",x.EdgeRouterRegistry)],e.prototype,"edgeRouterRegistry",void 0),n=a([u.injectable(),c(0,u.inject(h.TYPES.Action)),s("design:paramtypes",[j])],e)}(l.MergeableCommand);e.MoveCommand=C;var D=function(t){function e(e,n,o,r){void 0===r&&(r=!1);var i=t.call(this,o)||this;return i.model=e,i.elementMoves=n,i.reverse=r,i}return r(e,t),e.prototype.tween=function(t){var e=this;return this.elementMoves.forEach((function(n){e.reverse?n.element.position={x:(1-t)*n.toPosition.x+t*n.fromPosition.x,y:(1-t)*n.toPosition.y+t*n.fromPosition.y}:n.element.position={x:(1-t)*n.fromPosition.x+t*n.toPosition.x,y:(1-t)*n.fromPosition.y+t*n.toPosition.y}})),this.model},e}(d.Animation);e.MoveAnimation=D;var N=function(t){function e(e,n,o,r){void 0===r&&(r=!1);var i=t.call(this,o)||this;return i.model=e,i.reverse=r,i.expanded=[],n.forEach((function(t){var e=i.reverse?t.after:t.before,n=i.reverse?t.before:t.after,o=e.routedPoints,r=n.routedPoints,a=Math.max(o.length,r.length);i.expanded.push({startExpandedRoute:i.growToSize(o,a),endExpandedRoute:i.growToSize(r,a),memento:t})})),i}return r(e,t),e.prototype.midPoint=function(t){var e=t.edge,n=t.edge.source,o=t.edge.target;return b.linear(f.translatePoint(b.center(n.bounds),n.parent,e.parent),f.translatePoint(b.center(o.bounds),o.parent,e.parent),.5)},e.prototype.start=function(){return this.expanded.forEach((function(t){t.memento.edge.removeAll((function(t){return t instanceof E.SRoutingHandle}))})),t.prototype.start.call(this)},e.prototype.tween=function(t){var e=this;return 1===t?this.expanded.forEach((function(t){var n=t.memento;e.reverse?n.before.router.applySnapshot(n.edge,n.before):n.after.router.applySnapshot(n.edge,n.after)})):this.expanded.forEach((function(e){for(var n=[],o=1;o<e.startExpandedRoute.length-1;++o)n.push(b.linear(e.startExpandedRoute[o],e.endExpandedRoute[o],t));var r=t<.5?e.memento.before:e.memento.after,a=i(i({},r),{routingPoints:n,routingHandles:[]});r.router.applySnapshot(e.memento.edge,a)})),this.model},e.prototype.growToSize=function(t,e){var n=e-t.length;if(n<=0)return t;var o=[];o.push(t[0]);for(var r=1/(n+1),i=1/(t.length-1),a=1,s=1;s<t.length;++s){for(var c=i*s,u=0;c>(a+u)*r;)++u;a+=u;for(var d=0;d<u;++d){var l=b.linear(t[s-1],t[s],(d+1)/(u+1));o.push(l)}o.push(t[s])}return o},e}(d.Animation);e.MorphEdgesAnimation=N;var L=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasDragged=!1,e.elementId2startPos=new Map,e}return r(e,t),e.prototype.mouseDown=function(t,e){var n=[];if(0===e.button){var o=f.findParentByFeature(t,A.isMoveable),r=t instanceof E.SRoutingHandle;void 0!==o||r||w.isCreatingOnDrag(t)?this.startDragPosition={x:e.pageX,y:e.pageY}:this.startDragPosition=void 0,this.hasDragged=!1,w.isCreatingOnDrag(t)?(n.push(new T.SelectAllAction(!1)),n.push(t.createAction(E.edgeInProgressID)),n.push(new T.SelectAction([E.edgeInProgressID],[])),n.push(new S.SwitchEditModeAction([E.edgeInProgressID],[])),n.push(new T.SelectAction([E.edgeInProgressTargetHandleID],[])),n.push(new S.SwitchEditModeAction([E.edgeInProgressTargetHandleID],[]))):r&&n.push(new S.SwitchEditModeAction([t.id],[]))}return n},e.prototype.mouseMove=function(t,e){var n=[];if(0===e.buttons)this.mouseUp(t,e);else if(this.startDragPosition){0===this.elementId2startPos.size&&this.collectStartPositions(t.root),this.hasDragged=!0;var o=this.getElementMoves(t,e,!1);o&&n.push(o)}return n},e.prototype.collectStartPositions=function(t){var e=this;t.index.all().filter((function(t){return I.isSelectable(t)&&t.selected})).forEach((function(t){if(A.isMoveable(t))e.elementId2startPos.set(t.id,t.position);else if(t instanceof E.SRoutingHandle){var n=e.getHandlePosition(t);n&&e.elementId2startPos.set(t.id,n)}}))},e.prototype.getElementMoves=function(t,e,n){var o=this;if(this.startDragPosition){var r=[],i=f.findParentByFeature(t,M.isViewport),a=i?i.zoom:1,s=(e.pageX-this.startDragPosition.x)/a,c=(e.pageY-this.startDragPosition.y)/a;return this.elementId2startPos.forEach((function(n,i){var a=t.root.index.getById(i);if(a){var u=o.snap({x:n.x+s,y:n.y+c},a,!e.shiftKey);if(A.isMoveable(a))r.push({elementId:a.id,fromPosition:{x:a.position.x,y:a.position.y},toPosition:u});else if(a instanceof E.SRoutingHandle){var d=o.getHandlePosition(a);void 0!==d&&r.push({elementId:a.id,fromPosition:d,toPosition:u})}}})),r.length>0?new j(r,!1,n):void 0}},e.prototype.snap=function(t,e,n){return n&&this.snapper?this.snapper.snap(t,e):t},e.prototype.getHandlePosition=function(t){if(this.edgeRouterRegistry){var e=t.parent;if(!(e instanceof E.SRoutableElement))return;var n=this.edgeRouterRegistry.get(e.routerKind),o=n.route(e);return n.getHandlePosition(e,o,t)}},e.prototype.mouseEnter=function(t,e){return t instanceof p.SModelRoot&&0===e.buttons&&this.mouseUp(t,e),[]},e.prototype.mouseUp=function(t,e){var n=this,o=[],r=!1;if(this.startDragPosition){var i=this.getElementMoves(t,e,!0);i&&o.push(i),t.root.index.all().forEach((function(e){if(e instanceof E.SRoutingHandle){var i=e.parent;if(i instanceof E.SRoutableElement&&e.danglingAnchor){var a=n.getHandlePosition(e);if(a){var s=f.translatePoint(a,e.parent,e.root),c=_.findChildrenAtPosition(t.root,s).find((function(t){return E.isConnectable(t)&&t.canConnect(i,e.kind)}));c&&n.hasDragged&&(o.push(new O.ReconnectAction(e.parent.id,"source"===e.kind?c.id:i.sourceId,"target"===e.kind?c.id:i.targetId)),r=!0)}}e.editMode&&o.push(new S.SwitchEditModeAction([],[e.id]))}}))}if(!r){var a=t.root.index.getById(E.edgeInProgressID);if(a instanceof p.SChildElement){var s=[];s.push(E.edgeInProgressID),a.children.forEach((function(t){t instanceof E.SRoutingHandle&&t.danglingAnchor&&s.push(t.danglingAnchor.id)})),o.push(new P.DeleteElementAction(s))}}return this.hasDragged&&o.push(new m.CommitModelAction),this.hasDragged=!1,this.startDragPosition=void 0,this.elementId2startPos.clear(),o},e.prototype.decorate=function(t,e){return t},a([u.inject(x.EdgeRouterRegistry),u.optional(),s("design:type",x.EdgeRouterRegistry)],e.prototype,"edgeRouterRegistry",void 0),a([u.inject(h.TYPES.ISnapper),u.optional(),s("design:type",Object)],e.prototype,"snapper",void 0),e}(y.MouseListener);e.MoveMouseListener=L;var F=function(){function t(){}return t.prototype.decorate=function(t,e){if(R.isEdgeLayoutable(e)&&e.parent instanceof v.SEdge)return t;var n="";if(A.isLocateable(e)&&e instanceof p.SChildElement&&void 0!==e.parent){var o=e.position;0===o.x&&0===o.y||(n="translate("+o.x+", "+o.y+")")}if(_.isAlignable(e)){var r=e.alignment;0===r.x&&0===r.y||(n.length>0&&(n+=" "),n+="translate("+r.x+", "+r.y+")")}return n.length>0&&g.setAttr(t,"transform",n),t},t.prototype.postUpdate=function(){},a([u.injectable()],t)}();e.LocationPostprocessor=F},1528:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var r=n(6700),i=n(9046),a=function(){function t(){}return Object.defineProperty(t.prototype,"gridX",{get:function(){return 10},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gridY",{get:function(){return 10},enumerable:!0,configurable:!0}),t.prototype.snap=function(t,e){return e&&i.isBoundsAware(e)?{x:Math.round((t.x+.5*e.bounds.width)/this.gridX)*this.gridX-.5*e.bounds.width,y:Math.round((t.y+.5*e.bounds.height)/this.gridY)*this.gridY-.5*e.bounds.height}:{x:Math.round(t.x/this.gridX)*this.gridX,y:Math.round(t.y/this.gridY)*this.gridY}},o([r.injectable()],t)}();e.CenterGridSnapper=a},5989:(t,e)=>{"use strict";function n(t){return t.hasFeature(e.nameFeature)}Object.defineProperty(e,"__esModule",{value:!0}),e.nameFeature=Symbol("nameableFeature"),e.isNameable=n,e.name=function(t){return n(t)?t.name:void 0}},8997:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6700),r=n(1826),i=n(6777),a=new o.ContainerModule((function(t){t(r.TYPES.MouseListener).to(i.OpenMouseListener)}));e.default=a},1271:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.openFeature=Symbol("openFeature"),e.isOpenable=function(t){return t.hasFeature(e.openFeature)}},6777:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(6589),a=n(8558),s=n(1271),c=function(){function t(e){this.elementId=e,this.kind=t.KIND}return t.KIND="open",t}();e.OpenAction=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.doubleClick=function(t,e){var n=a.findParentByFeature(t,s.isOpenable);return void 0!==n?[new c(n.id)]:[]},e}(i.MouseListener);e.OpenMouseListener=u},9220:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(6700),u=n(1826),d=n(6530);e.DIAMOND_ANCHOR_KIND="diamond",e.ELLIPTIC_ANCHOR_KIND="elliptic",e.RECTANGULAR_ANCHOR_KIND="rectangular";var l=function(t){function n(e){var n=t.call(this)||this;return e.forEach((function(t){return n.register(t.kind,t)})),n}return r(n,t),Object.defineProperty(n.prototype,"defaultAnchorKind",{get:function(){return e.RECTANGULAR_ANCHOR_KIND},enumerable:!0,configurable:!0}),n.prototype.get=function(e,n){return t.prototype.get.call(this,e+":"+(n||this.defaultAnchorKind))},i([c.injectable(),s(0,c.multiInject(u.TYPES.IAnchorComputer)),a("design:paramtypes",[Array])],n)}(d.InstanceRegistry);e.AnchorComputerRegistry=l},6149:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6700),r=n(1826),i=n(5329),a=n(3104),s=n(6782),c=n(3289),u=n(9220),d=n(4096),l=new o.ContainerModule((function(t){t(d.EdgeRouterRegistry).toSelf().inSingletonScope(),t(u.AnchorComputerRegistry).toSelf().inSingletonScope(),t(i.ManhattanEdgeRouter).toSelf().inSingletonScope(),t(r.TYPES.IEdgeRouter).toService(i.ManhattanEdgeRouter),t(r.TYPES.IAnchorComputer).to(s.ManhattanEllipticAnchor).inSingletonScope(),t(r.TYPES.IAnchorComputer).to(s.ManhattanRectangularAnchor).inSingletonScope(),t(r.TYPES.IAnchorComputer).to(s.ManhattanDiamondAnchor).inSingletonScope(),t(a.PolylineEdgeRouter).toSelf().inSingletonScope(),t(r.TYPES.IEdgeRouter).toService(a.PolylineEdgeRouter),t(r.TYPES.IAnchorComputer).to(c.EllipseAnchor),t(r.TYPES.IAnchorComputer).to(c.RectangleAnchor),t(r.TYPES.IAnchorComputer).to(c.DiamondAnchor)}));e.default=l},7478:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o};Object.defineProperty(e,"__esModule",{value:!0});var a,s=n(6700),c=n(8558),u=n(7073),d=n(6283),l=n(9220),p=n(6283);!function(t){t[t.RIGHT=0]="RIGHT",t[t.LEFT=1]="LEFT",t[t.TOP=2]="TOP",t[t.BOTTOM=3]="BOTTOM"}(a=e.Side||(e.Side={}));var f=function(){function t(t,e,n){this.element=t,this.kind=n;var o=t.bounds;this.bounds=c.translateBounds(o,t.parent,e),this.left={x:this.bounds.x,y:this.bounds.y+.5*this.bounds.height,kind:n},this.right={x:this.bounds.x+this.bounds.width,y:this.bounds.y+.5*this.bounds.height,kind:n},this.top={x:this.bounds.x+.5*this.bounds.width,y:this.bounds.y,kind:n},this.bottom={x:this.bounds.x+.5*this.bounds.width,y:this.bounds.y+this.bounds.height,kind:n}}return t.prototype.get=function(t){return this[a[t].toLowerCase()]},t.prototype.getNearestSide=function(t){var e=u.euclideanDistance(t,this.left),n=u.euclideanDistance(t,this.right),o=u.euclideanDistance(t,this.top),r=u.euclideanDistance(t,this.bottom),i=a.LEFT,s=e;return n<s&&(s=n,i=a.RIGHT),o<s&&(s=o,i=a.TOP),r<s&&(s=r,i=a.BOTTOM),i},t}();e.DefaultAnchors=f;var h=function(){function t(){}return t.prototype.pointAt=function(t,e){var n=this.calculateSegment(t,e);if(n){var o=n.segmentStart,r=n.segmentEnd,i=n.lambda;return u.linear(o,r,i)}},t.prototype.derivativeAt=function(t,e){var n=this.calculateSegment(t,e);if(n){var o=n.segmentStart,r=n.segmentEnd;return{x:r.x-o.x,y:r.y-o.y}}},t.prototype.calculateSegment=function(t,e){if(!(e<0||e>1)){var n=this.route(t);if(!(n.length<2)){for(var o=[],r=0,i=0;i<n.length-1;++i)o[i]=u.euclideanDistance(n[i],n[i+1]),r+=o[i];var a=0,s=e*r;for(i=0;i<n.length-1;++i){var c=a+o[i];if(o[i]>1e-8&&c>=s){var d=Math.max(0,s-a)/o[i];return{segmentStart:n[i],segmentEnd:n[i+1],lambda:d}}a=c}return{segmentEnd:n.pop(),segmentStart:n.pop(),lambda:1}}}},t.prototype.addHandle=function(t,e,n,o){var r=new d.SRoutingHandle;return r.kind=e,r.pointIndex=o,r.type=n,"target"===e&&t.id===d.edgeInProgressID&&(r.id=d.edgeInProgressTargetHandleID),t.add(r),r},t.prototype.getHandlePosition=function(t,e,n){switch(n.kind){case"source":return t.source instanceof d.SDanglingAnchor?t.source.position:e[0];case"target":return t.target instanceof d.SDanglingAnchor?t.target.position:e[e.length-1];default:var o=this.getInnerHandlePosition(t,e,n);if(void 0!==o)return o;if(n.pointIndex>=0&&n.pointIndex<t.routingPoints.length)return t.routingPoints[n.pointIndex]}},t.prototype.findRouteSegment=function(t,e,n){for(var o,r,i=function(e){return void 0!==e.pointIndex?e.pointIndex:"target"===e.kind?t.routingPoints.length:-2},a=0,s=e;a<s.length;a++){var c=s[a],u=i(c);u<=n&&(void 0===o||u>i(o))&&(o=c),u>n&&(void 0===r||u<i(r))&&(r=c)}return{start:o,end:r}},t.prototype.getTranslatedAnchor=function(t,e,n,o,r){void 0===r&&(r=0);var i=c.translatePoint(e,n,t.parent),a=this.getAnchorComputer(t),s=.5*t.strokeWidth,u=a.getAnchor(t,i,r+s);return c.translatePoint(u,t.parent,o.parent)},t.prototype.getAnchorComputer=function(t){return this.anchorRegistry.get(this.kind,t.anchorKind)},t.prototype.applyHandleMoves=function(t,e){var n=e.slice();e.forEach((function(e){var o=e.handle;if("source"!==o.kind||t.source instanceof d.SDanglingAnchor){if("target"===o.kind&&!(t.target instanceof d.SDanglingAnchor)){var r;(r=new d.SDanglingAnchor).id=t.id+"_dangling-target",r.original=t.target,r.position=e.toPosition,o.root.add(r),o.danglingAnchor=r,t.targetId=r.id}}else(r=new d.SDanglingAnchor).id=t.id+"_dangling-source",r.original=t.source,r.position=e.toPosition,o.root.add(r),o.danglingAnchor=r,t.sourceId=r.id;o.danglingAnchor&&(o.danglingAnchor.position=e.toPosition,n.splice(n.indexOf(e),1))})),n.length>0&&this.applyInnerHandleMoves(t,n),this.cleanupRoutingPoints(t,t.routingPoints,!0,!0)},t.prototype.cleanupRoutingPoints=function(t,e,n,o){var r=new f(t.source,t.parent,"source"),i=new f(t.target,t.parent,"target");this.resetRoutingPointsOnReconnect(t,e,n,r,i)},t.prototype.resetRoutingPointsOnReconnect=function(t,e,n,o,r){if(0===e.length||t.source instanceof d.SDanglingAnchor||t.target instanceof d.SDanglingAnchor){var a=this.getOptions(t),s=this.calculateDefaultCorners(t,o,r,a);if(e.splice.apply(e,i([0,e.length],s)),n){var c=-2;t.children.forEach((function(n){n instanceof d.SRoutingHandle&&("target"===n.kind?n.pointIndex=e.length:"line"===n.kind&&n.pointIndex>=e.length?t.remove(n):c=Math.max(n.pointIndex,c))}));for(var u=c;u<e.length-1;++u)this.addHandle(t,"manhattan-50%","volatile-routing-point",u)}return!0}return!1},t.prototype.applyReconnect=function(t,e,n){var o=!1;if(e){var r=t.root.index.getById(e);r instanceof p.SConnectableElement&&(t.sourceId=r.id,o=!0)}if(n){var i=t.root.index.getById(n);i instanceof p.SConnectableElement&&(t.targetId=i.id,o=!0)}o&&(t.index.remove(t),t.index.add(t),this.getSelfEdgeIndex(t)>-1&&(t.routingPoints=[],this.cleanupRoutingPoints(t,t.routingPoints,!0,!0)))},t.prototype.takeSnapshot=function(t){return{routingPoints:t.routingPoints.slice(),routingHandles:t.children.filter((function(t){return t instanceof d.SRoutingHandle})).map((function(t){return t})),routedPoints:this.route(t),router:this,source:t.source,target:t.target}},t.prototype.applySnapshot=function(t,e){t.routingPoints=e.routingPoints,t.removeAll((function(t){return t instanceof d.SRoutingHandle})),t.routerKind=e.router.kind,e.routingHandles.forEach((function(e){return t.add(e)})),e.source&&(t.sourceId=e.source.id),e.target&&(t.targetId=e.target.id),t.root.index.remove(t),t.root.index.add(t)},t.prototype.calculateDefaultCorners=function(t,e,n,o){var r=this.getSelfEdgeIndex(t);if(r>=0){var i=o.standardDistance,s=o.selfEdgeOffset*Math.min(e.bounds.width,e.bounds.height);switch(r%4){case 0:return[{x:e.get(a.RIGHT).x+i,y:e.get(a.RIGHT).y+s},{x:e.get(a.RIGHT).x+i,y:e.get(a.BOTTOM).y+i},{x:e.get(a.BOTTOM).x+s,y:e.get(a.BOTTOM).y+i}];case 1:return[{x:e.get(a.BOTTOM).x-s,y:e.get(a.BOTTOM).y+i},{x:e.get(a.LEFT).x-i,y:e.get(a.BOTTOM).y+i},{x:e.get(a.LEFT).x-i,y:e.get(a.LEFT).y+s}];case 2:return[{x:e.get(a.LEFT).x-i,y:e.get(a.LEFT).y-s},{x:e.get(a.LEFT).x-i,y:e.get(a.TOP).y-i},{x:e.get(a.TOP).x-s,y:e.get(a.TOP).y-i}];case 3:return[{x:e.get(a.TOP).x+s,y:e.get(a.TOP).y-i},{x:e.get(a.RIGHT).x+i,y:e.get(a.TOP).y-i},{x:e.get(a.RIGHT).x+i,y:e.get(a.RIGHT).y-s}]}}return[]},t.prototype.getSelfEdgeIndex=function(t){return t.source&&t.source===t.target?t.source.outgoingEdges.filter((function(e){return e.target===t.source})).indexOf(t):-1},o([s.inject(l.AnchorComputerRegistry),r("design:type",l.AnchorComputerRegistry)],t.prototype,"anchorRegistry",void 0),o([s.injectable()],t)}();e.LinearEdgeRouter=h},6782:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var r=n(7073),i=n(9220),a=n(5329),s=n(6700),c=function(){function t(){}var e;return e=t,Object.defineProperty(t.prototype,"kind",{get:function(){return e.KIND},enumerable:!0,configurable:!0}),t.prototype.getAnchor=function(t,e,n){var o=t.bounds;if(o.width<=0||o.height<=0)return o;var i={x:o.x-n,y:o.y-n,width:o.width+2*n,height:o.height+2*n};return e.x>=i.x&&i.x+i.width>=e.x?e.y<i.y+.5*i.height?{x:e.x,y:i.y}:{x:e.x,y:i.y+i.height}:e.y>=i.y&&i.y+i.height>=e.y?e.x<i.x+.5*i.width?{x:i.x,y:e.y}:{x:i.x+i.width,y:e.y}:r.center(i)},t.KIND=a.ManhattanEdgeRouter.KIND+":"+i.RECTANGULAR_ANCHOR_KIND,e=o([s.injectable()],t)}();e.ManhattanRectangularAnchor=c;var u=function(){function t(){}var e;return e=t,Object.defineProperty(t.prototype,"kind",{get:function(){return e.KIND},enumerable:!0,configurable:!0}),t.prototype.getAnchor=function(t,e,n){void 0===n&&(n=0);var o=t.bounds;if(o.width<=0||o.height<=0)return o;var i={x:o.x-n,y:o.y-n,width:o.width+2*n,height:o.height+2*n},a=r.center(i),s=void 0,c=void 0;return e.x>=i.x&&e.x<=i.x+i.width?i.x+.5*i.width>=e.x?(c=new r.PointToPointLine(e,{x:e.x,y:a.y}),s=e.y<a.y?new r.PointToPointLine({x:i.x,y:a.y},{x:a.x,y:i.y}):new r.PointToPointLine({x:i.x,y:a.y},{x:a.x,y:i.y+i.height})):(c=new r.PointToPointLine(e,{x:e.x,y:a.y}),s=e.y<a.y?new r.PointToPointLine({x:i.x+i.width,y:a.y},{x:a.x,y:i.y}):new r.PointToPointLine({x:i.x+i.width,y:a.y},{x:a.x,y:i.y+i.height})):e.y>=i.y&&e.y<=i.y+i.height&&(i.y+.5*i.height>=e.y?(c=new r.PointToPointLine(e,{x:a.x,y:e.y}),s=e.x<a.x?new r.PointToPointLine({x:i.x,y:a.y},{x:a.x,y:i.y}):new r.PointToPointLine({x:i.x+i.width,y:a.y},{x:a.x,y:i.y})):(c=new r.PointToPointLine(e,{x:a.x,y:e.y}),s=e.x<a.x?new r.PointToPointLine({x:i.x,y:a.y},{x:a.x,y:i.y+i.height}):new r.PointToPointLine({x:i.x+i.width,y:a.y},{x:a.x,y:i.y+i.height}))),c&&s?r.intersection(s,c):a},t.KIND=a.ManhattanEdgeRouter.KIND+":"+i.DIAMOND_ANCHOR_KIND,e=o([s.injectable()],t)}();e.ManhattanDiamondAnchor=u;var d=function(){function t(){}var e;return e=t,Object.defineProperty(t.prototype,"kind",{get:function(){return e.KIND},enumerable:!0,configurable:!0}),t.prototype.getAnchor=function(t,e,n){void 0===n&&(n=0);var o=t.bounds;if(o.width<=0||o.height<=0)return o;var i={x:o.x-n,y:o.y-n,width:o.width+2*n,height:o.height+2*n},a=r.center(i),s=r.subtract(e,a),c=a.x,u=a.y;if(e.x>=i.x&&i.x+i.width>=e.x){c+=s.x;var d=.5*i.height*Math.sqrt(1-s.x*s.x/(.25*i.width*i.width));s.y<0?u-=d:u+=d}else if(e.y>=i.y&&i.y+i.height>=e.y){u+=s.y;var l=.5*i.width*Math.sqrt(1-s.y*s.y/(.25*i.height*i.height));s.x<0?c-=l:c+=l}return{x:c,y:u}},t.KIND=a.ManhattanEdgeRouter.KIND+":"+i.ELLIPTIC_ANCHOR_KIND,e=o([s.injectable()],t)}();e.ManhattanEllipticAnchor=d},5329:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(8558),s=n(7073),c=n(7478),u=n(6283),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return e.KIND},enumerable:!0,configurable:!0}),e.prototype.getOptions=function(t){return{standardDistance:20,minimalPointDistance:3,selfEdgeOffset:.25}},e.prototype.route=function(t){if(!t.source||!t.target)return[];var e=this.createRoutedCorners(t),n=e[0]||a.translatePoint(s.center(t.target.bounds),t.target.parent,t.parent),o=this.getTranslatedAnchor(t.source,n,t.parent,t,t.sourceAnchorCorrection),r=e[e.length-1]||a.translatePoint(s.center(t.source.bounds),t.source.parent,t.parent),c=this.getTranslatedAnchor(t.target,r,t.parent,t,t.targetAnchorCorrection);if(!o||!c)return[];var u=[];return u.push(i({kind:"source"},o)),e.forEach((function(t){return u.push(t)})),u.push(i({kind:"target"},c)),u},e.prototype.createRoutedCorners=function(t){var e=new c.DefaultAnchors(t.source,t.parent,"source"),n=new c.DefaultAnchors(t.target,t.parent,"target");if(t.routingPoints.length>0){var o=t.routingPoints.slice();if(this.cleanupRoutingPoints(t,o,!1,!0),o.length>0)return o.map((function(t,e){return i({kind:"linear",pointIndex:e},t)}))}var r=this.getOptions(t);return this.calculateDefaultCorners(t,e,n,r).map((function(t){return i({kind:"linear"},t)}))},e.prototype.createRoutingHandles=function(t){var e=this.route(t);if(this.commitRoute(t,e),e.length>0){this.addHandle(t,"source","routing-point",-2);for(var n=0;n<e.length-1;++n)this.addHandle(t,"manhattan-50%","volatile-routing-point",n-1);this.addHandle(t,"target","routing-point",e.length-2)}},e.prototype.getInnerHandlePosition=function(t,e,n){var o=this.getFraction(n.kind);if(void 0!==o){var r=this.findRouteSegment(t,e,n.pointIndex),i=r.start,a=r.end;if(void 0!==i&&void 0!==a)return s.linear(i,a,o)}},e.prototype.getFraction=function(t){switch(t){case"manhattan-50%":return.5;default:return}},e.prototype.commitRoute=function(t,e){for(var n=[],o=1;o<e.length-1;++o)n.push({x:e[o].x,y:e[o].y});t.routingPoints=n},e.prototype.applyInnerHandleMoves=function(t,e){var n=this,o=this.route(t),r=t.routingPoints,i=this.getOptions(t).minimalPointDistance;e.forEach((function(t){var e=t.handle,a=e.pointIndex,c=n.correctX(r,a,t.toPosition.x,i),u=n.correctY(r,a,t.toPosition.y,i);switch(e.kind){case"manhattan-50%":a<0?s.almostEquals(o[0].x,o[1].x)?n.alignX(r,0,c):n.alignY(r,0,u):a<r.length-1?s.almostEquals(r[a].x,r[a+1].x)?(n.alignX(r,a,c),n.alignX(r,a+1,c)):(n.alignY(r,a,u),n.alignY(r,a+1,u)):s.almostEquals(o[o.length-2].x,o[o.length-1].x)?n.alignX(r,r.length-1,c):n.alignY(r,r.length-1,u)}}))},e.prototype.correctX=function(t,e,n,o){return e>0&&Math.abs(n-t[e-1].x)<o?t[e-1].x:e<t.length-2&&Math.abs(n-t[e+2].x)<o?t[e+2].x:n},e.prototype.alignX=function(t,e,n){e>=0&&e<t.length&&(t[e]={x:n,y:t[e].y})},e.prototype.correctY=function(t,e,n,o){return e>0&&Math.abs(n-t[e-1].y)<o?t[e-1].y:e<t.length-2&&Math.abs(n-t[e+2].y)<o?t[e+2].y:n},e.prototype.alignY=function(t,e,n){e>=0&&e<t.length&&(t[e]={x:t[e].x,y:n})},e.prototype.cleanupRoutingPoints=function(t,e,n,o){var r=new c.DefaultAnchors(t.source,t.parent,"source"),i=new c.DefaultAnchors(t.target,t.parent,"target");if(!this.resetRoutingPointsOnReconnect(t,e,n,r,i)){for(var a=0;a<e.length&&s.includes(r.bounds,e[a]);++a)e.splice(0,1),n&&this.removeHandle(t,-1);for(a=e.length-1;a>=0&&s.includes(i.bounds,e[a]);--a)e.splice(a,1),n&&this.removeHandle(t,a);if(e.length>=2){var u=this.getOptions(t);for(a=e.length-2;a>=0;--a)s.manhattanDistance(e[a],e[a+1])<u.minimalPointDistance&&(e.splice(a,2),--a,n&&(this.removeHandle(t,a-1),this.removeHandle(t,a)))}o&&(this.addAdditionalCorner(t,e,r,i,n),this.addAdditionalCorner(t,e,i,r,n),this.manhattanify(t,e))}},e.prototype.removeHandle=function(t,e){var n=[];t.children.forEach((function(t){t instanceof u.SRoutingHandle&&(t.pointIndex>e?--t.pointIndex:t.pointIndex===e&&n.push(t))})),n.forEach((function(e){return t.remove(e)}))},e.prototype.addAdditionalCorner=function(t,e,n,o,r){if(0!==e.length){var i,a="source"===n.kind?e[0]:e[e.length-1],d="source"===n.kind?0:e.length,l=d-("source"===n.kind?1:0);if(e.length>1)i=0===d?s.almostEquals(e[0].x,e[1].x):s.almostEquals(e[e.length-1].x,e[e.length-2].x);else{var p=o.getNearestSide(a);i=p===c.Side.TOP||p===c.Side.BOTTOM}if(i){if(a.y<n.get(c.Side.TOP).y||a.y>n.get(c.Side.BOTTOM).y){var f={x:n.get(c.Side.TOP).x,y:a.y};e.splice(d,0,f),r&&(t.children.forEach((function(t){t instanceof u.SRoutingHandle&&t.pointIndex>=l&&++t.pointIndex})),this.addHandle(t,"manhattan-50%","volatile-routing-point",l))}}else(a.x<n.get(c.Side.LEFT).x||a.x>n.get(c.Side.RIGHT).x)&&(f={x:a.x,y:n.get(c.Side.LEFT).y},e.splice(d,0,f),r&&(t.children.forEach((function(t){t instanceof u.SRoutingHandle&&t.pointIndex>=l&&++t.pointIndex})),this.addHandle(t,"manhattan-50%","volatile-routing-point",l)))}},e.prototype.manhattanify=function(t,e){for(var n=1;n<e.length;++n){var o=Math.abs(e[n-1].x-e[n].x)<1,r=Math.abs(e[n-1].y-e[n].y)<1;o||r||(e.splice(n,0,{x:e[n-1].x,y:e[n].y}),++n)}},e.prototype.calculateDefaultCorners=function(e,n,o,r){var i=t.prototype.calculateDefaultCorners.call(this,e,n,o,r);if(i.length>0)return i;var a=this.getBestConnectionAnchors(e,n,o,r),s=a.source,u=a.target,d=[],l=n.get(s),p=o.get(u);switch(s){case c.Side.RIGHT:switch(u){case c.Side.BOTTOM:case c.Side.TOP:d.push({x:p.x,y:l.y});break;case c.Side.RIGHT:d.push({x:Math.max(l.x,p.x)+1.5*r.standardDistance,y:l.y}),d.push({x:Math.max(l.x,p.x)+1.5*r.standardDistance,y:p.y});break;case c.Side.LEFT:p.y!==l.y&&(d.push({x:(l.x+p.x)/2,y:l.y}),d.push({x:(l.x+p.x)/2,y:p.y}))}break;case c.Side.LEFT:switch(u){case c.Side.BOTTOM:case c.Side.TOP:d.push({x:p.x,y:l.y});break;default:(p=o.get(c.Side.RIGHT)).y!==l.y&&(d.push({x:(l.x+p.x)/2,y:l.y}),d.push({x:(l.x+p.x)/2,y:p.y}))}break;case c.Side.TOP:switch(u){case c.Side.RIGHT:p.x-l.x>0?(d.push({x:l.x,y:l.y-r.standardDistance}),d.push({x:p.x+1.5*r.standardDistance,y:l.y-r.standardDistance}),d.push({x:p.x+1.5*r.standardDistance,y:p.y})):d.push({x:l.x,y:p.y});break;case c.Side.LEFT:p.x-l.x<0?(d.push({x:l.x,y:l.y-r.standardDistance}),d.push({x:p.x-1.5*r.standardDistance,y:l.y-r.standardDistance}),d.push({x:p.x-1.5*r.standardDistance,y:p.y})):d.push({x:l.x,y:p.y});break;case c.Side.TOP:d.push({x:l.x,y:Math.min(l.y,p.y)-1.5*r.standardDistance}),d.push({x:p.x,y:Math.min(l.y,p.y)-1.5*r.standardDistance});break;case c.Side.BOTTOM:p.x!==l.x&&(d.push({x:l.x,y:(l.y+p.y)/2}),d.push({x:p.x,y:(l.y+p.y)/2}))}break;case c.Side.BOTTOM:switch(u){case c.Side.RIGHT:p.x-l.x>0?(d.push({x:l.x,y:l.y+r.standardDistance}),d.push({x:p.x+1.5*r.standardDistance,y:l.y+r.standardDistance}),d.push({x:p.x+1.5*r.standardDistance,y:p.y})):d.push({x:l.x,y:p.y});break;case c.Side.LEFT:p.x-l.x<0?(d.push({x:l.x,y:l.y+r.standardDistance}),d.push({x:p.x-1.5*r.standardDistance,y:l.y+r.standardDistance}),d.push({x:p.x-1.5*r.standardDistance,y:p.y})):d.push({x:l.x,y:p.y});break;default:(p=o.get(c.Side.TOP)).x!==l.x&&(d.push({x:l.x,y:(l.y+p.y)/2}),d.push({x:p.x,y:(l.y+p.y)/2}))}}return d},e.prototype.getBestConnectionAnchors=function(t,e,n,o){var r=e.get(c.Side.RIGHT),i=n.get(c.Side.LEFT);if(i.x-r.x>o.standardDistance)return{source:c.Side.RIGHT,target:c.Side.LEFT};if(r=e.get(c.Side.LEFT),i=n.get(c.Side.RIGHT),r.x-i.x>o.standardDistance)return{source:c.Side.LEFT,target:c.Side.RIGHT};if(r=e.get(c.Side.TOP),i=n.get(c.Side.BOTTOM),r.y-i.y>o.standardDistance)return{source:c.Side.TOP,target:c.Side.BOTTOM};if(r=e.get(c.Side.BOTTOM),(i=n.get(c.Side.TOP)).y-r.y>o.standardDistance)return{source:c.Side.BOTTOM,target:c.Side.TOP};if(r=e.get(c.Side.RIGHT),(i=n.get(c.Side.TOP)).x-r.x>.5*o.standardDistance&&i.y-r.y>o.standardDistance)return{source:c.Side.RIGHT,target:c.Side.TOP};if((i=n.get(c.Side.BOTTOM)).x-r.x>.5*o.standardDistance&&r.y-i.y>o.standardDistance)return{source:c.Side.RIGHT,target:c.Side.BOTTOM};if(r=e.get(c.Side.LEFT),i=n.get(c.Side.BOTTOM),r.x-i.x>.5*o.standardDistance&&r.y-i.y>o.standardDistance)return{source:c.Side.LEFT,target:c.Side.BOTTOM};if(i=n.get(c.Side.TOP),r.x-i.x>.5*o.standardDistance&&i.y-r.y>o.standardDistance)return{source:c.Side.LEFT,target:c.Side.TOP};if(r=e.get(c.Side.TOP),i=n.get(c.Side.RIGHT),r.y-i.y>.5*o.standardDistance&&r.x-i.x>o.standardDistance)return{source:c.Side.TOP,target:c.Side.RIGHT};if(i=n.get(c.Side.LEFT),r.y-i.y>.5*o.standardDistance&&i.x-r.x>o.standardDistance)return{source:c.Side.TOP,target:c.Side.LEFT};if(r=e.get(c.Side.BOTTOM),(i=n.get(c.Side.RIGHT)).y-r.y>.5*o.standardDistance&&r.x-i.x>o.standardDistance)return{source:c.Side.BOTTOM,target:c.Side.RIGHT};if((i=n.get(c.Side.LEFT)).y-r.y>.5*o.standardDistance&&i.x-r.x>o.standardDistance)return{source:c.Side.BOTTOM,target:c.Side.LEFT};if(r=e.get(c.Side.TOP),i=n.get(c.Side.TOP),!s.includes(n.bounds,r)&&!s.includes(e.bounds,i))if(r.y-i.y<0){if(Math.abs(r.x-i.x)>(e.bounds.width+o.standardDistance)/2)return{source:c.Side.TOP,target:c.Side.TOP}}else if(Math.abs(r.x-i.x)>n.bounds.width/2)return{source:c.Side.TOP,target:c.Side.TOP};if(r=e.get(c.Side.RIGHT),i=n.get(c.Side.RIGHT),!s.includes(n.bounds,r)&&!s.includes(e.bounds,i))if(r.x-i.x>0){if(Math.abs(r.y-i.y)>(e.bounds.height+o.standardDistance)/2)return{source:c.Side.RIGHT,target:c.Side.RIGHT}}else if(Math.abs(r.y-i.y)>n.bounds.height/2)return{source:c.Side.RIGHT,target:c.Side.RIGHT};return r=e.get(c.Side.TOP),i=n.get(c.Side.RIGHT),s.includes(n.bounds,r)||s.includes(e.bounds,i)?(i=n.get(c.Side.LEFT),s.includes(n.bounds,r)||s.includes(e.bounds,i)?(r=e.get(c.Side.BOTTOM),i=n.get(c.Side.RIGHT),s.includes(n.bounds,r)||s.includes(e.bounds,i)?(i=n.get(c.Side.LEFT),s.includes(n.bounds,r)||s.includes(e.bounds,i)?{source:c.Side.RIGHT,target:c.Side.BOTTOM}:{source:c.Side.BOTTOM,target:c.Side.LEFT}):{source:c.Side.BOTTOM,target:c.Side.RIGHT}):{source:c.Side.TOP,target:c.Side.LEFT}):{source:c.Side.TOP,target:c.Side.RIGHT}},e.KIND="manhattan",e}(c.LinearEdgeRouter);e.ManhattanEdgeRouter=d},6283:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(6771),a=n(7073),s=n(9046),c=n(3344),u=n(1982),d=n(6211),l=n(1026),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.routingPoints=[],e}return r(e,t),Object.defineProperty(e.prototype,"source",{get:function(){return this.index.getById(this.sourceId)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this.index.getById(this.targetId)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.routingPoints.reduce((function(t,e){return a.combine(t,{x:e.x,y:e.y,width:0,height:0})}),a.EMPTY_BOUNDS)},enumerable:!0,configurable:!0}),e}(i.SChildElement);function f(t){for(var e={x:NaN,y:NaN,width:0,height:0},n=0,o=t;n<o.length;n++){var r=o[n];isNaN(e.x)?(e.x=r.x,e.y=r.y):(r.x<e.x?(e.width+=e.x-r.x,e.x=r.x):r.x>e.x+e.width&&(e.width=r.x-e.x),r.y<e.y?(e.height+=e.y-r.y,e.y=r.y):r.y>e.y+e.height&&(e.height=r.y-e.y))}return e}e.SRoutableElement=p,e.connectableFeature=Symbol("connectableFeature"),e.isConnectable=function(t){return t.hasFeature(e.connectableFeature)&&t.canConnect},e.getAbsoluteRouteBounds=function(t,e){void 0===e&&(e=t.routingPoints);for(var n=f(e),o=t;o instanceof i.SChildElement;){var r=o.parent;n=r.localToParent(n),o=r}return n},e.getRouteBounds=f;var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.strokeWidth=0,e}return r(e,t),Object.defineProperty(e.prototype,"incomingEdges",{get:function(){return this.index.getIncomingEdges(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outgoingEdges",{get:function(){return this.index.getOutgoingEdges(this)},enumerable:!0,configurable:!0}),e.prototype.canConnect=function(t,e){return!0},e}(s.SShapeElement);e.SConnectableElement=h;var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.editMode=!1,e.hoverFeedback=!1,e.selected=!1,e}return r(e,t),e.prototype.hasFeature=function(t){return-1!==e.DEFAULT_FEATURES.indexOf(t)},e.DEFAULT_FEATURES=[u.selectFeature,l.moveFeature,d.hoverFeedbackFeature],e}(i.SChildElement);e.SRoutingHandle=y;var g=function(t){function e(){var e=t.call(this)||this;return e.type="dangling-anchor",e.size={width:0,height:0},e}return r(e,t),e.DEFAULT_FEATURES=[c.deletableFeature],e}(h);e.SDanglingAnchor=g,e.edgeInProgressID="edge-in-progress",e.edgeInProgressTargetHandleID=e.edgeInProgressID+"-target-anchor"},3289:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var r=n(9220),i=n(7073),a=n(6700),s=n(3104),c=function(){function t(){}return Object.defineProperty(t.prototype,"kind",{get:function(){return s.PolylineEdgeRouter.KIND+":"+r.ELLIPTIC_ANCHOR_KIND},enumerable:!0,configurable:!0}),t.prototype.getAnchor=function(t,e,n){void 0===n&&(n=0);var o=t.bounds,r=i.center(o),a=r.x-e.x,s=r.y-e.y,c=Math.sqrt(a*a+s*s),u=a/c||0,d=s/c||0;return{x:r.x-u*(.5*o.width+n),y:r.y-d*(.5*o.height+n)}},o([a.injectable()],t)}();e.EllipseAnchor=c;var u=function(){function t(){}return Object.defineProperty(t.prototype,"kind",{get:function(){return s.PolylineEdgeRouter.KIND+":"+r.RECTANGULAR_ANCHOR_KIND},enumerable:!0,configurable:!0}),t.prototype.getAnchor=function(t,e,n){void 0===n&&(n=0);var o=t.bounds,r=i.center(o),a=new d(r,e);if(!i.almostEquals(r.y,e.y)){var s=this.getXIntersection(o.y,r,e);s>=o.x&&s<=o.x+o.width&&a.addCandidate(s,o.y-n);var c=this.getXIntersection(o.y+o.height,r,e);c>=o.x&&c<=o.x+o.width&&a.addCandidate(c,o.y+o.height+n)}if(!i.almostEquals(r.x,e.x)){var u=this.getYIntersection(o.x,r,e);u>=o.y&&u<=o.y+o.height&&a.addCandidate(o.x-n,u);var l=this.getYIntersection(o.x+o.width,r,e);l>=o.y&&l<=o.y+o.height&&a.addCandidate(o.x+o.width+n,l)}return a.best},t.prototype.getXIntersection=function(t,e,n){var o=(t-e.y)/(n.y-e.y);return(n.x-e.x)*o+e.x},t.prototype.getYIntersection=function(t,e,n){var o=(t-e.x)/(n.x-e.x);return(n.y-e.y)*o+e.y},o([a.injectable()],t)}();e.RectangleAnchor=u;var d=function(){function t(t,e){this.centerPoint=t,this.refPoint=e,this.currentDist=-1}return t.prototype.addCandidate=function(t,e){var n=this.refPoint.x-t,o=this.refPoint.y-e,r=n*n+o*o;(this.currentDist<0||r<this.currentDist)&&(this.currentBest={x:t,y:e},this.currentDist=r)},Object.defineProperty(t.prototype,"best",{get:function(){return void 0===this.currentBest?this.centerPoint:this.currentBest},enumerable:!0,configurable:!0}),t}(),l=function(){function t(){}return Object.defineProperty(t.prototype,"kind",{get:function(){return s.PolylineEdgeRouter.KIND+":"+r.DIAMOND_ANCHOR_KIND},enumerable:!0,configurable:!0}),t.prototype.getAnchor=function(t,e,n){var o=t.bounds,r=new i.PointToPointLine(i.center(o),e),a=new i.Diamond(o).closestSideLine(e),s=i.intersection(a,r);return i.shiftTowards(s,e,n)},o([a.injectable()],t)}();e.DiamondAnchor=l},3104:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var s=n(6700),c=n(7073),u=n(6283),d=n(9220),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return r(e,t),n=e,Object.defineProperty(e.prototype,"kind",{get:function(){return n.KIND},enumerable:!0,configurable:!0}),e.prototype.getOptions=function(t){return{minimalPointDistance:2,removeAngleThreshold:.1,standardDistance:20,selfEdgeOffset:.25}},e.prototype.route=function(t){var e,n,o=t.source,r=t.target;if(void 0===o||void 0===r)return[];var i=this.getOptions(t),a=t.routingPoints.length>0?t.routingPoints:[];this.cleanupRoutingPoints(t,a,!1,!1);var s=void 0!==a?a.length:0;if(0===s){var u=c.center(r.bounds);e=this.getTranslatedAnchor(o,u,r.parent,t,t.sourceAnchorCorrection);var d=c.center(o.bounds);n=this.getTranslatedAnchor(r,d,o.parent,t,t.targetAnchorCorrection)}else{var l=a[0];e=this.getTranslatedAnchor(o,l,t.parent,t,t.sourceAnchorCorrection);var p=a[s-1];n=this.getTranslatedAnchor(r,p,t.parent,t,t.targetAnchorCorrection)}var f=[];f.push({kind:"source",x:e.x,y:e.y});for(var h=0;h<s;h++){var y=a[h];(h>0&&h<s-1||0===h&&c.maxDistance(e,y)>=i.minimalPointDistance+(t.sourceAnchorCorrection||0)||h===s-1&&c.maxDistance(y,n)>=i.minimalPointDistance+(t.targetAnchorCorrection||0))&&f.push({kind:"linear",x:y.x,y:y.y,pointIndex:h})}return f.push({kind:"target",x:n.x,y:n.y}),this.filterEditModeHandles(f,t,i)},e.prototype.filterEditModeHandles=function(t,e,n){if(0===e.children.length)return t;for(var o=0,r=function(){var r=t[o];if(void 0!==r.pointIndex){var i=e.children.find((function(t){return t instanceof u.SRoutingHandle&&"junction"===t.kind&&t.pointIndex===r.pointIndex}));if(void 0!==i&&i.editMode&&o>0&&o<t.length-1){var a=t[o-1],s=t[o+1],d={x:a.x-r.x,y:a.y-r.y},l={x:s.x-r.x,y:s.y-r.y},p=c.angleBetweenPoints(d,l);if(Math.abs(Math.PI-p)<n.removeAngleThreshold)return t.splice(o,1),"continue"}}o++};o<t.length;)r();return t},e.prototype.createRoutingHandles=function(t){var e=t.routingPoints.length;this.addHandle(t,"source","routing-point",-2),this.addHandle(t,"line","volatile-routing-point",-1);for(var n=0;n<e;n++)this.addHandle(t,"junction","routing-point",n),this.addHandle(t,"line","volatile-routing-point",n);this.addHandle(t,"target","routing-point",e)},e.prototype.getInnerHandlePosition=function(t,e,n){if("line"===n.kind){var o=this.findRouteSegment(t,e,n.pointIndex),r=o.start,i=o.end;if(void 0!==r&&void 0!==i)return c.centerOfLine(r,i)}},e.prototype.applyInnerHandleMoves=function(t,e){var n=this;e.forEach((function(e){var o=e.handle,r=t.routingPoints,i=o.pointIndex;"line"===o.kind&&(o.kind="junction",o.type="routing-point",r.splice(i+1,0,e.fromPosition||r[Math.max(i,0)]),t.children.forEach((function(t){t instanceof u.SRoutingHandle&&(t===o||t.pointIndex>i)&&t.pointIndex++})),n.addHandle(t,"line","volatile-routing-point",i),n.addHandle(t,"line","volatile-routing-point",i+1),i++),i>=0&&i<r.length&&(r[i]=e.toPosition)}))},e.KIND="polyline",i([s.inject(d.AnchorComputerRegistry),a("design:type",d.AnchorComputerRegistry)],e.prototype,"anchorRegistry",void 0),n=i([s.injectable()],e)}(n(7478).LinearEdgeRouter);e.PolylineEdgeRouter=l},4096:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(6530),u=n(3104),d=n(6700),l=n(1826),p=function(t){function e(e){var n=t.call(this)||this;return e.forEach((function(t){return n.register(t.kind,t)})),n}return r(e,t),Object.defineProperty(e.prototype,"defaultKind",{get:function(){return u.PolylineEdgeRouter.KIND},enumerable:!0,configurable:!0}),e.prototype.get=function(e){return t.prototype.get.call(this,e||this.defaultKind)},i([d.injectable(),s(0,d.multiInject(l.TYPES.IEdgeRouter)),a("design:paramtypes",[Array])],e)}(c.InstanceRegistry);e.EdgeRouterRegistry=p},2083:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var r=n(6700),i=n(6283),a=function(){function t(){}return t.prototype.isVisible=function(t,e,n){if("hidden"===n.targetKind)return!0;if(0===e.length)return!0;var o=i.getAbsoluteRouteBounds(t,e),r=t.root.canvasBounds;return o.x<=r.width&&o.x+o.width>=0&&o.y<=r.height&&o.y+o.height>=0},o([r.injectable()],t)}();e.RoutableView=a},6754:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6700),r=n(1826),i=n(9774),a=n(2857),s=new o.ContainerModule((function(t,e,n){a.configureCommand({bind:t,isBound:n},i.SelectCommand),a.configureCommand({bind:t,isBound:n},i.SelectAllCommand),a.configureCommand({bind:t,isBound:n},i.GetSelectionCommand),t(r.TYPES.KeyListener).to(i.SelectKeyboardListener),t(r.TYPES.MouseListener).to(i.SelectMouseListener)}));e.default=s},1982:(t,e)=>{"use strict";function n(t){return t.hasFeature(e.selectFeature)}Object.defineProperty(e,"__esModule",{value:!0}),e.selectFeature=Symbol("selectFeature"),e.isSelectable=n,e.isSelected=function(t){return void 0!==t&&n(t)&&t.selected}},9774:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(6700),u=n(152),d=n(1864),l=n(9470),p=n(6771),f=n(8558),h=n(1826),y=n(6004),g=n(6589),v=n(4626),m=n(5824),b=n(9140),_=n(8611),w=n(1842),P=n(2011),S=n(3011),O=n(6283),E=n(6283),x=n(2296),R=n(1982),I=function(){function t(e,n){void 0===e&&(e=[]),void 0===n&&(n=[]),this.selectedElementsIDs=e,this.deselectedElementsIDs=n,this.kind=t.KIND}return t.KIND="elementSelected",t}();e.SelectAction=I;var T=function(){function t(e){void 0===e&&(e=!0),this.select=e,this.kind=t.KIND}return t.KIND="allSelected",t}();e.SelectAllAction=T;var M=function(){function t(e){void 0===e&&(e=""),this.requestId=e,this.kind=t.KIND}return t.create=function(){return new t(u.generateRequestId())},t.KIND="getSelection",t}();e.GetSelectionAction=M;var A=function(){function t(e,n){void 0===e&&(e=[]),this.selectedElementsIDs=e,this.responseId=n,this.kind=t.KIND}return t.KIND="selectionResult",t}();e.SelectionResult=A;var j=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.selected=[],n.deselected=[],n}return r(e,t),e.prototype.execute=function(t){var e=this,n=t.root;return this.action.selectedElementsIDs.forEach((function(t){var o=n.index.getById(t);o instanceof p.SChildElement&&R.isSelectable(o)&&e.selected.push(o)})),this.action.deselectedElementsIDs.forEach((function(t){var o=n.index.getById(t);o instanceof p.SChildElement&&R.isSelectable(o)&&e.deselected.push(o)})),this.redo(t)},e.prototype.undo=function(t){for(var e=0,n=this.selected;e<n.length;e++)n[e].selected=!1;for(var o=0,r=this.deselected;o<r.length;o++)r[o].selected=!0;return t.root},e.prototype.redo=function(t){for(var e=0,n=this.deselected;e<n.length;e++)n[e].selected=!1;for(var o=0,r=this.selected;o<r.length;o++)r[o].selected=!0;return t.root},e.KIND=I.KIND,i([c.injectable(),s(0,c.inject(h.TYPES.Action)),a("design:paramtypes",[I])],e)}(d.Command);e.SelectCommand=j;var C=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.previousSelection={},n}return r(e,t),e.prototype.execute=function(t){return this.selectAll(t.root,this.action.select),t.root},e.prototype.selectAll=function(t,e){R.isSelectable(t)&&(this.previousSelection[t.id]=t.selected,t.selected=e);for(var n=0,o=t.children;n<o.length;n++){var r=o[n];this.selectAll(r,e)}},e.prototype.undo=function(t){var e=t.root.index;for(var n in this.previousSelection)if(this.previousSelection.hasOwnProperty(n)){var o=e.getById(n);void 0!==o&&R.isSelectable(o)&&(o.selected=this.previousSelection[n])}return t.root},e.prototype.redo=function(t){return this.selectAll(t.root,this.action.select),t.root},e.KIND=T.KIND,i([c.injectable(),s(0,c.inject(h.TYPES.Action)),a("design:paramtypes",[T])],e)}(d.Command);e.SelectAllCommand=C;var D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.wasSelected=!1,e.hasDragged=!1,e}return r(e,t),e.prototype.mouseDown=function(t,e){var n=[];if(0===e.button){if(void 0!==this.buttonHandlerRegistry&&t instanceof P.SButton&&t.enabled){var o=this.buttonHandlerRegistry.get(t.type);if(void 0!==o)return o.buttonPressed(t)}var r=f.findParentByFeature(t,R.isSelectable);if(void 0!==r||t instanceof p.SModelRoot){this.hasDragged=!1;var i=[];if(m.isCtrlOrCmd(e)||(i=b.toArray(t.root.index.all().filter((function(t){return R.isSelectable(t)&&t.selected&&!(r instanceof O.SRoutingHandle&&t===r.parent)})))),void 0!==r)if(r.selected)m.isCtrlOrCmd(e)?(this.wasSelected=!1,n.push(new I([],[r.id])),r instanceof E.SRoutableElement&&n.push(new S.SwitchEditModeAction([],[r.id]))):this.wasSelected=!0;else{this.wasSelected=!1,n.push(new I([r.id],i.map((function(t){return t.id})))),n.push(new x.BringToFrontAction([r.id]));var a=i.filter((function(t){return t instanceof E.SRoutableElement})).map((function(t){return t.id}));r instanceof E.SRoutableElement?n.push(new S.SwitchEditModeAction([r.id],a)):a.length>0&&n.push(new S.SwitchEditModeAction([],a))}else n.push(new I([],i.map((function(t){return t.id})))),(a=i.filter((function(t){return t instanceof E.SRoutableElement})).map((function(t){return t.id}))).length>0&&n.push(new S.SwitchEditModeAction([],a))}}return n},e.prototype.mouseMove=function(t,e){return this.hasDragged=!0,[]},e.prototype.mouseUp=function(t,e){if(0===e.button&&!this.hasDragged){var n=f.findParentByFeature(t,R.isSelectable);if(void 0!==n&&this.wasSelected)return[new I([n.id],[])]}return this.hasDragged=!1,[]},e.prototype.decorate=function(t,e){var n=f.findParentByFeature(e,R.isSelectable);return void 0!==n&&v.setClass(t,"selected",n.selected),t},i([c.inject(w.ButtonHandlerRegistry),c.optional(),a("design:type",w.ButtonHandlerRegistry)],e.prototype,"buttonHandlerRegistry",void 0),e}(g.MouseListener);e.SelectMouseListener=D;var N=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.previousSelection={},n}return r(e,t),e.prototype.retrieveResult=function(t){var e=t.root.index.all().filter((function(t){return R.isSelectable(t)&&t.selected})).map((function(t){return t.id}));return new A(b.toArray(e),this.action.requestId)},e.KIND=M.KIND,i([c.injectable(),s(0,c.inject(h.TYPES.Action)),a("design:paramtypes",[M])],e)}(l.ModelRequestCommand);e.GetSelectionCommand=N;var L=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.keyDown=function(t,e){return _.matchesKeystroke(e,"KeyA","ctrlCmd")?[new T]:[]},e}(y.KeyListener);e.SelectKeyboardListener=L},2752:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6700),r=n(1826),i=n(6404),a=new o.ContainerModule((function(t){t(r.TYPES.KeyListener).to(i.UndoRedoKeyListener)}));e.default=a},6404:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(8611),a=n(6004),s=function(){function t(){this.kind=t.KIND}return t.KIND="undo",t}();e.UndoAction=s;var c=function(){function t(){this.kind=t.KIND}return t.KIND="redo",t}();e.RedoAction=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.keyDown=function(t,e){return i.matchesKeystroke(e,"KeyZ","ctrlCmd")?[new s]:i.matchesKeystroke(e,"KeyZ","ctrlCmd","shift")?[new c]:[]},e}(a.KeyListener);e.UndoRedoKeyListener=u},7799:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6700),r=n(2857),i=n(1994),a=new o.ContainerModule((function(t,e,n){r.configureCommand({bind:t,isBound:n},i.UpdateModelCommand)}));e.default=a},8843:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6771);e.forEachMatch=function(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])};var r=function(){function t(){}return t.prototype.match=function(t,e){var n={};return this.matchLeft(t,n),this.matchRight(e,n),n},t.prototype.matchLeft=function(t,e,n){var r=e[t.id];if(void 0!==r?(r.left=t,r.leftParentId=n):(r={left:t,leftParentId:n},e[t.id]=r),o.isParent(t))for(var i=0,a=t.children;i<a.length;i++){var s=a[i];this.matchLeft(s,e,t.id)}},t.prototype.matchRight=function(t,e,n){var r=e[t.id];if(void 0!==r?(r.right=t,r.rightParentId=n):(r={right:t,rightParentId:n},e[t.id]=r),o.isParent(t))for(var i=0,a=t.children;i<a.length;i++){var s=a[i];this.matchRight(s,e,t.id)}},t}();e.ModelMatcher=r,e.applyMatches=function(t,e){var n;t instanceof o.SModelRoot?n=t.index:(n=new o.SModelIndex).add(t);for(var r=0,i=e;r<i.length;r++){var a=i[r],s=!1;if(void 0!==a.left&&void 0!==a.leftParentId){var c=n.getById(a.leftParentId);if(void 0!==c&&void 0!==c.children){var u=c.children.indexOf(a.left);u>=0&&(void 0!==a.right&&a.leftParentId===a.rightParentId?(c.children.splice(u,1,a.right),s=!0):c.children.splice(u,1)),n.remove(a.left)}}if(!s&&void 0!==a.right&&void 0!==a.rightParentId){var d=n.getById(a.rightParentId);void 0!==d&&(void 0===d.children&&(d.children=[]),d.children.push(a.right))}}}},1994:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(6700),u=n(7073),d=n(6692),l=n(1864),p=n(3906),f=n(6771),h=n(3249),y=n(6793),g=n(1026),v=n(9046),m=n(7466),b=n(1982),_=n(8843),w=n(7138),P=n(1826),S=n(7740),O=n(4096),E=n(6283),x=function(){function t(e,n,o){void 0===n&&(n=!0),this.animate=n,this.cause=o,this.kind=t.KIND,void 0!==e.id?this.newRoot=e:this.matches=e}return t.KIND="updateModel",t}();e.UpdateModelAction=x;var R=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return r(e,t),e.prototype.execute=function(t){var e;return void 0!==this.action.newRoot?e=t.modelFactory.createRoot(this.action.newRoot):(e=t.modelFactory.createRoot(t.root),void 0!==this.action.matches&&this.applyMatches(e,this.action.matches,t)),this.oldRoot=t.root,this.newRoot=e,this.performUpdate(this.oldRoot,this.newRoot,t)},e.prototype.performUpdate=function(t,e,n){if(void 0!==this.action.animate&&!this.action.animate||t.id!==e.id)return t.type===e.type&&u.isValidDimension(t.canvasBounds)&&(e.canvasBounds=t.canvasBounds),S.isViewport(t)&&S.isViewport(e)&&(e.zoom=t.zoom,e.scroll=t.scroll),e;var o;o=void 0===this.action.matches?(new _.ModelMatcher).match(t,e):this.convertToMatchResult(this.action.matches,t,e);var r=this.computeAnimation(e,o,n);return r instanceof d.Animation?r.start():r},e.prototype.applyMatches=function(t,e,n){for(var o=t.index,r=0,i=e;r<i.length;r++){var a=i[r];if(void 0!==a.left&&(s=o.getById(a.left.id))instanceof f.SChildElement&&s.parent.remove(s),void 0!==a.right){var s=n.modelFactory.createElement(a.right),c=void 0;void 0!==a.rightParentId&&(c=o.getById(a.rightParentId)),c instanceof f.SParentElement?c.add(s):t.add(s)}}},e.prototype.convertToMatchResult=function(t,e,n){for(var o={},r=0,i=t;r<i.length;r++){var a=i[r],s={},c=void 0;void 0!==a.left&&(c=a.left.id,s.left=e.index.getById(c),s.leftParentId=a.leftParentId),void 0!==a.right&&(c=a.right.id,s.right=n.index.getById(c),s.rightParentId=a.rightParentId),void 0!==c&&(o[c]=s)}return o},e.prototype.computeAnimation=function(t,e,n){var o=this,r={fades:[]};_.forEachMatch(e,(function(e,i){if(void 0!==i.left&&void 0!==i.right)o.updateElement(i.left,i.right,r);else if(void 0!==i.right){var a=i.right;y.isFadeable(a)&&(a.opacity=0,r.fades.push({element:a,type:"in"}))}else if(i.left instanceof f.SChildElement){var s=i.left;if(y.isFadeable(s)&&void 0!==i.leftParentId&&void 0===t.index.getById(s.id)){var c=t.index.getById(i.leftParentId);if(c instanceof f.SParentElement){var u=n.modelFactory.createElement(s);c.add(u),r.fades.push({element:u,type:"out"})}}}}));var i=this.createAnimations(r,t,n);return i.length>=2?new d.CompoundAnimation(t,n,i):1===i.length?i[0]:t},e.prototype.updateElement=function(t,e,n){if(g.isLocateable(t)&&g.isLocateable(e)){var o=t.position,r=e.position;u.almostEquals(o.x,r.x)&&u.almostEquals(o.y,r.y)||(void 0===n.moves&&(n.moves=[]),n.moves.push({element:e,fromPosition:o,toPosition:r}),e.position=o)}v.isSizeable(t)&&v.isSizeable(e)&&(u.isValidDimension(e.bounds)?u.almostEquals(t.bounds.width,e.bounds.width)&&u.almostEquals(t.bounds.height,e.bounds.height)||(void 0===n.resizes&&(n.resizes=[]),n.resizes.push({element:e,fromDimension:{width:t.bounds.width,height:t.bounds.height},toDimension:{width:e.bounds.width,height:e.bounds.height}})):e.bounds={x:e.bounds.x,y:e.bounds.y,width:t.bounds.width,height:t.bounds.height}),t instanceof E.SRoutableElement&&e instanceof E.SRoutableElement&&this.edgeRouterRegistry&&(void 0===n.edgeMementi&&(n.edgeMementi=[]),n.edgeMementi.push({edge:e,before:this.takeSnapshot(t),after:this.takeSnapshot(e)})),b.isSelectable(t)&&b.isSelectable(e)&&(e.selected=t.selected),t instanceof f.SModelRoot&&e instanceof f.SModelRoot&&(e.canvasBounds=t.canvasBounds),t instanceof m.ViewportRootElement&&e instanceof m.ViewportRootElement&&(e.scroll=t.scroll,e.zoom=t.zoom)},e.prototype.takeSnapshot=function(t){return this.edgeRouterRegistry.get(t.routerKind).takeSnapshot(t)},e.prototype.createAnimations=function(t,e,n){var o=[];if(t.fades.length>0&&o.push(new p.FadeAnimation(e,t.fades,n,!0)),void 0!==t.moves&&t.moves.length>0){for(var r=new Map,i=0,a=t.moves;i<a.length;i++){var s=a[i];r.set(s.element.id,s)}o.push(new h.MoveAnimation(e,r,n,!1))}if(void 0!==t.resizes&&t.resizes.length>0){for(var c=new Map,u=0,d=t.resizes;u<d.length;u++){var l=d[u];c.set(l.element.id,l)}o.push(new w.ResizeAnimation(e,c,n,!1))}return void 0!==t.edgeMementi&&t.edgeMementi.length>0&&o.push(new h.MorphEdgesAnimation(e,t.edgeMementi,n,!1)),o},e.prototype.undo=function(t){return this.performUpdate(this.newRoot,this.oldRoot,t)},e.prototype.redo=function(t){return this.performUpdate(this.oldRoot,this.newRoot,t)},e.KIND=x.KIND,i([c.inject(O.EdgeRouterRegistry),c.optional(),a("design:type",O.EdgeRouterRegistry)],e.prototype,"edgeRouterRegistry",void 0),i([c.injectable(),s(0,c.inject(P.TYPES.Action)),a("design:paramtypes",[x])],e)}(l.Command);e.UpdateModelCommand=R},7872:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(7073),u=n(8611),d=n(6771),l=n(1864),p=n(6004),f=n(9046),h=n(1982),y=n(7053),g=n(7740),v=n(6700),m=n(1826),b=function(){function t(e,n,o){void 0===n&&(n=!0),void 0===o&&(o=!1),this.elementIds=e,this.animate=n,this.retainZoom=o,this.kind=t.KIND}return t.KIND="center",t}();e.CenterAction=b;var _=function(){function t(e,n,o,r){void 0===r&&(r=!0),this.elementIds=e,this.padding=n,this.maxZoom=o,this.animate=r,this.kind=t.KIND}return t.KIND="fit",t}();e.FitToScreenAction=_;var w=function(t){function e(e){var n=t.call(this)||this;return n.animate=e,n}return r(e,t),e.prototype.initialize=function(t){var e=this;if(g.isViewport(t)){this.oldViewport={scroll:t.scroll,zoom:t.zoom};var n=[];if(this.getElementIds().forEach((function(o){var r=t.index.getById(o);r&&f.isBoundsAware(r)&&n.push(e.boundsInViewport(r,r.bounds,t))})),0===n.length&&t.index.all().forEach((function(o){h.isSelectable(o)&&o.selected&&f.isBoundsAware(o)&&n.push(e.boundsInViewport(o,o.bounds,t))})),0===n.length&&t.index.all().forEach((function(o){f.isBoundsAware(o)&&n.push(e.boundsInViewport(o,o.bounds,t))})),0!==n.length){var o=n.reduce((function(t,e){return c.combine(t,e)}));c.isValidDimension(o)&&(this.newViewport=this.getNewViewport(o,t))}}},e.prototype.boundsInViewport=function(t,e,n){return t instanceof d.SChildElement&&t.parent!==n?this.boundsInViewport(t.parent,t.parent.localToParent(e),n):e},e.prototype.execute=function(t){return this.initialize(t.root),this.redo(t)},e.prototype.undo=function(t){var e=t.root;if(g.isViewport(e)&&void 0!==this.newViewport&&!this.equal(this.newViewport,this.oldViewport)){if(this.animate)return new y.ViewportAnimation(e,this.newViewport,this.oldViewport,t).start();e.scroll=this.oldViewport.scroll,e.zoom=this.oldViewport.zoom}return e},e.prototype.redo=function(t){var e=t.root;if(g.isViewport(e)&&void 0!==this.newViewport&&!this.equal(this.newViewport,this.oldViewport)){if(this.animate)return new y.ViewportAnimation(e,this.oldViewport,this.newViewport,t).start();e.scroll=this.newViewport.scroll,e.zoom=this.newViewport.zoom}return e},e.prototype.equal=function(t,e){return t.zoom===e.zoom&&t.scroll.x===e.scroll.x&&t.scroll.y===e.scroll.y},i([v.injectable(),a("design:paramtypes",[Boolean])],e)}(l.Command);e.BoundsAwareViewportCommand=w;var P=function(t){function e(e){var n=t.call(this,e.animate)||this;return n.action=e,n}return r(e,t),e.prototype.getElementIds=function(){return this.action.elementIds},e.prototype.getNewViewport=function(t,e){if(c.isValidDimension(e.canvasBounds)){var n=this.action.retainZoom&&g.isViewport(e)?e.zoom:1,o=c.center(t);return{scroll:{x:o.x-.5*e.canvasBounds.width/n,y:o.y-.5*e.canvasBounds.height/n},zoom:n}}},e.KIND=b.KIND,i([s(0,v.inject(m.TYPES.Action)),a("design:paramtypes",[b])],e)}(w);e.CenterCommand=P;var S=function(t){function e(e){var n=t.call(this,e.animate)||this;return n.action=e,n}return r(e,t),e.prototype.getElementIds=function(){return this.action.elementIds},e.prototype.getNewViewport=function(t,e){if(c.isValidDimension(e.canvasBounds)){var n=c.center(t),o=void 0===this.action.padding?0:2*this.action.padding,r=Math.min(e.canvasBounds.width/(t.width+o),e.canvasBounds.height/(t.height+o));return void 0!==this.action.maxZoom&&(r=Math.min(r,this.action.maxZoom)),r===1/0&&(r=1),{scroll:{x:n.x-.5*e.canvasBounds.width/r,y:n.y-.5*e.canvasBounds.height/r},zoom:r}}},e.KIND=_.KIND,i([s(0,v.inject(m.TYPES.Action)),a("design:paramtypes",[_])],e)}(w);e.FitToScreenCommand=S;var O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.keyDown=function(t,e){return u.matchesKeystroke(e,"KeyC","ctrlCmd","shift")?[new b([])]:u.matchesKeystroke(e,"KeyF","ctrlCmd","shift")?[new _([])]:[]},e}(p.KeyListener);e.CenterKeyboardListener=O},8331:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6700),r=n(1826),i=n(7872),a=n(7053),s=n(9881),c=n(4678),u=n(2857),d=new o.ContainerModule((function(t,e,n){u.configureCommand({bind:t,isBound:n},i.CenterCommand),u.configureCommand({bind:t,isBound:n},i.FitToScreenCommand),u.configureCommand({bind:t,isBound:n},a.SetViewportCommand),u.configureCommand({bind:t,isBound:n},a.GetViewportCommand),t(r.TYPES.KeyListener).to(i.CenterKeyboardListener),t(r.TYPES.MouseListener).to(s.ScrollMouseListener),t(r.TYPES.MouseListener).to(c.ZoomMouseListener)}));e.default=d},7740:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6771);e.viewportFeature=Symbol("viewportFeature"),e.isViewport=function(t){return t instanceof o.SModelRoot&&t.hasFeature(e.viewportFeature)&&"zoom"in t&&"scroll"in t}},9881:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(6771),a=n(6589),s=n(8558),c=n(7053),u=n(7740),d=n(1026),l=n(6283);e.isScrollable=function(t){return"scroll"in t};var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.mouseDown=function(t,e){if(void 0===s.findParentByFeature(t,d.isMoveable)&&!(t instanceof l.SRoutingHandle)){var n=s.findParentByFeature(t,u.isViewport);this.lastScrollPosition=n?{x:e.pageX,y:e.pageY}:void 0}return[]},e.prototype.mouseMove=function(t,e){if(0===e.buttons)this.mouseUp(t,e);else if(this.lastScrollPosition){var n=s.findParentByFeature(t,u.isViewport);if(n){var o=(e.pageX-this.lastScrollPosition.x)/n.zoom,r=(e.pageY-this.lastScrollPosition.y)/n.zoom,i={scroll:{x:n.scroll.x-o,y:n.scroll.y-r},zoom:n.zoom};return this.lastScrollPosition={x:e.pageX,y:e.pageY},[new c.SetViewportAction(n.id,i,!1)]}}return[]},e.prototype.mouseEnter=function(t,e){return t instanceof i.SModelRoot&&0===e.buttons&&this.mouseUp(t,e),[]},e.prototype.mouseUp=function(t,e){return this.lastScrollPosition=void 0,[]},e}(a.MouseListener);e.ScrollMouseListener=p},7466:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(7073),a=n(6771),s=n(7740),c=n(4965),u=function(t){function e(e){var n=t.call(this,e)||this;return n.scroll={x:0,y:0},n.zoom=1,n}return r(e,t),e.prototype.localToParent=function(t){var e={x:(t.x-this.scroll.x)*this.zoom,y:(t.y-this.scroll.y)*this.zoom,width:-1,height:-1};return i.isBounds(t)&&(e.width=t.width*this.zoom,e.height=t.height*this.zoom),e},e.prototype.parentToLocal=function(t){var e={x:t.x/this.zoom+this.scroll.x,y:t.y/this.zoom+this.scroll.y,width:-1,height:-1};return i.isBounds(t)&&i.isValidDimension(t)&&(e.width=t.width/this.zoom,e.height=t.height/this.zoom),e},e.DEFAULT_FEATURES=[s.viewportFeature,c.exportFeature],e}(a.SModelRoot);e.ViewportRootElement=u},7053:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(7073),u=n(152),d=n(1864),l=n(6692),p=n(7740),f=n(6700),h=n(1826),y=n(9470),g=function(){function t(e,n,o){this.elementId=e,this.newViewport=n,this.animate=o,this.kind=t.KIND}return t.KIND="viewport",t}();e.SetViewportAction=g;var v=function(){function t(e){void 0===e&&(e=""),this.requestId=e,this.kind=t.KIND}return t.create=function(){return new t(u.generateRequestId())},t.KIND="getViewport",t}();e.GetViewportAction=v;var m=function(){function t(e,n,o){this.viewport=e,this.canvasBounds=n,this.responseId=o,this.kind=t.KIND}return t.KIND="viewportResult",t}();e.ViewportResult=m;var b=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.newViewport=e.newViewport,n}var n;return r(e,t),n=e,e.prototype.execute=function(t){var e=t.root,n=e.index.getById(this.action.elementId);if(n&&p.isViewport(n)){if(this.element=n,this.oldViewport={scroll:this.element.scroll,zoom:this.element.zoom},this.action.animate)return new w(this.element,this.oldViewport,this.newViewport,t).start();this.element.scroll=this.newViewport.scroll,this.element.zoom=this.newViewport.zoom}return e},e.prototype.undo=function(t){return new w(this.element,this.newViewport,this.oldViewport,t).start()},e.prototype.redo=function(t){return new w(this.element,this.oldViewport,this.newViewport,t).start()},e.prototype.merge=function(t,e){return!this.action.animate&&t instanceof n&&this.element===t.element&&(this.newViewport=t.newViewport,!0)},e.KIND=g.KIND,n=i([f.injectable(),s(0,f.inject(h.TYPES.Action)),a("design:paramtypes",[g])],e)}(d.MergeableCommand);e.SetViewportCommand=b;var _=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return r(e,t),e.prototype.retrieveResult=function(t){var e,n=t.root;return e=p.isViewport(n)?{scroll:n.scroll,zoom:n.zoom}:{scroll:c.ORIGIN_POINT,zoom:1},new m(e,n.canvasBounds,this.action.requestId)},e.KIND=v.KIND,i([s(0,f.inject(h.TYPES.Action)),a("design:paramtypes",[v])],e)}(y.ModelRequestCommand);e.GetViewportCommand=_;var w=function(t){function e(e,n,o,r){var i=t.call(this,r)||this;return i.element=e,i.oldViewport=n,i.newViewport=o,i.context=r,i.zoomFactor=Math.log(o.zoom/n.zoom),i}return r(e,t),e.prototype.tween=function(t,e){return this.element.scroll={x:(1-t)*this.oldViewport.scroll.x+t*this.newViewport.scroll.x,y:(1-t)*this.oldViewport.scroll.y+t*this.newViewport.scroll.y},this.element.zoom=this.oldViewport.zoom*Math.exp(t*this.zoomFactor),e.root},e}(l.Animation);e.ViewportAnimation=w},4678:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(5824),a=n(6589),s=n(8558),c=n(7053),u=n(7740);e.isZoomable=function(t){return"zoom"in t},e.getZoom=function(t){var e=1,n=s.findParentByFeature(t,u.isViewport);return n&&(e=n.zoom),e};var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.wheel=function(t,e){var n=s.findParentByFeature(t,u.isViewport);if(n){var o=this.getZoomFactor(e),r=this.getViewportOffset(t.root,e),i=1/(o*n.zoom)-1/n.zoom,a={scroll:{x:n.scroll.x-i*r.x,y:n.scroll.y-i*r.y},zoom:n.zoom*o};return[new c.SetViewportAction(n.id,a,!1)]}return[]},e.prototype.getViewportOffset=function(t,e){var n=t.canvasBounds,o=i.getWindowScroll();return{x:e.clientX+o.x-n.x,y:e.clientY+o.y-n.y}},e.prototype.getZoomFactor=function(t){return t.deltaMode===t.DOM_DELTA_PAGE?Math.exp(.5*-t.deltaY):t.deltaMode===t.DOM_DELTA_LINE?Math.exp(.05*-t.deltaY):Math.exp(.005*-t.deltaY)},e}(a.MouseListener);e.ZoomMouseListener=d},140:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6700),r=n(2857),i=n(2296),a=new o.ContainerModule((function(t,e,n){r.configureCommand({bind:t,isBound:n},i.BringToFrontCommand)}));e.default=a},2296:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(6700),u=n(1826),d=n(6771),l=n(1864),p=n(6283),f=function(){function t(e){this.elementIDs=e,this.kind=t.KIND}return t.KIND="bringToFront",t}();e.BringToFrontAction=f;var h=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.selected=[],n}return r(e,t),e.prototype.execute=function(t){var e=this,n=t.root;return this.action.elementIDs.forEach((function(t){var o=n.index.getById(t);o instanceof p.SRoutableElement&&(o.source&&e.addToSelection(o.source),o.target&&e.addToSelection(o.target)),o instanceof d.SChildElement&&e.addToSelection(o),e.includeConnectedEdges(o)})),this.redo(t)},e.prototype.includeConnectedEdges=function(t){var e=this;if(t instanceof p.SConnectableElement&&(t.incomingEdges.forEach((function(t){return e.addToSelection(t)})),t.outgoingEdges.forEach((function(t){return e.addToSelection(t)}))),t instanceof d.SParentElement)for(var n=0,o=t.children;n<o.length;n++){var r=o[n];this.includeConnectedEdges(r)}},e.prototype.addToSelection=function(t){this.selected.push({element:t,index:t.parent.children.indexOf(t)})},e.prototype.undo=function(t){for(var e=this.selected.length-1;e>=0;e--){var n=this.selected[e],o=n.element;o.parent.move(o,n.index)}return t.root},e.prototype.redo=function(t){for(var e=0;e<this.selected.length;e++)this.bringToFront(this.selected[e]);return t.root},e.prototype.bringToFront=function(t){var e=t.element,n=e.parent.children.length;e.parent.move(e,n-1)},e.KIND=f.KIND,i([c.injectable(),s(0,c.inject(u.TYPES.Action)),a("design:paramtypes",[f])],e)}(l.Command);e.BringToFrontCommand=h},6499:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6700),r=n(1826),i=n(7960),a=new o.ContainerModule((function(t,e,n,o){o(r.TYPES.IModelFactory).to(i.SGraphFactory).inSingletonScope()}));e.default=a},7960:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var a=n(6700),s=n(1194),c=n(6771),u=n(8558),d=n(6054),l=n(2011),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultGraphFeatures=s.createFeatureSet(d.SGraph.DEFAULT_FEATURES),e.defaultNodeFeatures=s.createFeatureSet(d.SNode.DEFAULT_FEATURES),e.defaultPortFeatures=s.createFeatureSet(d.SPort.DEFAULT_FEATURES),e.defaultEdgeFeatures=s.createFeatureSet(d.SEdge.DEFAULT_FEATURES),e.defaultLabelFeatures=s.createFeatureSet(d.SLabel.DEFAULT_FEATURES),e.defaultCompartmentFeatures=s.createFeatureSet(d.SCompartment.DEFAULT_FEATURES),e.defaultButtonFeatures=s.createFeatureSet(l.SButton.DEFAULT_FEATURES),e}return r(e,t),e.prototype.createElement=function(t,e){var n;if(this.registry.hasKey(t.type)){var o=this.registry.get(t.type,void 0);if(!(o instanceof c.SChildElement))throw new Error("Element with type "+t.type+" was expected to be an SChildElement.");n=o}else this.isNodeSchema(t)?(n=new d.SNode).features=this.defaultNodeFeatures:this.isPortSchema(t)?(n=new d.SPort).features=this.defaultPortFeatures:this.isEdgeSchema(t)?(n=new d.SEdge).features=this.defaultEdgeFeatures:this.isLabelSchema(t)?(n=new d.SLabel).features=this.defaultLabelFeatures:this.isCompartmentSchema(t)?(n=new d.SCompartment).features=this.defaultCompartmentFeatures:this.isButtonSchema(t)?(n=new l.SButton).features=this.defaultButtonFeatures:n=new c.SChildElement;return this.initializeChild(n,t,e)},e.prototype.createRoot=function(t){var e;if(this.registry.hasKey(t.type)){var n=this.registry.get(t.type,void 0);if(!(n instanceof c.SModelRoot))throw new Error("Element with type "+t.type+" was expected to be an SModelRoot.");e=n}else this.isGraphSchema(t)?(e=new d.SGraph).features=this.defaultGraphFeatures:e=new c.SModelRoot;return this.initializeRoot(e,t)},e.prototype.isGraphSchema=function(t){return"graph"===u.getBasicType(t)},e.prototype.isNodeSchema=function(t){return"node"===u.getBasicType(t)},e.prototype.isPortSchema=function(t){return"port"===u.getBasicType(t)},e.prototype.isEdgeSchema=function(t){return"edge"===u.getBasicType(t)},e.prototype.isLabelSchema=function(t){return"label"===u.getBasicType(t)},e.prototype.isCompartmentSchema=function(t){return"comp"===u.getBasicType(t)},e.prototype.isButtonSchema=function(t){return"button"===u.getBasicType(t)},i([a.injectable()],e)}(s.SModelFactory);e.SGraphFactory=p},6054:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(6771),a=n(9046),s=n(8971),c=n(3344),u=n(4446),d=n(6793),l=n(6211),p=n(1026),f=n(6283),h=n(1982),y=n(7466),g=n(7073),v=n(9140),m=function(t){function e(e){return void 0===e&&(e=new O),t.call(this,e)||this}return r(e,t),e}(y.ViewportRootElement);e.SGraph=m;var b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selected=!1,e.hoverFeedback=!1,e.opacity=1,e}return r(e,t),e.prototype.canConnect=function(t,e){return void 0===this.children.find((function(t){return t instanceof _}))},e.DEFAULT_FEATURES=[f.connectableFeature,c.deletableFeature,h.selectFeature,a.boundsFeature,p.moveFeature,a.layoutContainerFeature,d.fadeFeature,l.hoverFeedbackFeature,l.popupFeature],e}(f.SConnectableElement);e.SNode=b;var _=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selected=!1,e.hoverFeedback=!1,e.opacity=1,e}return r(e,t),e.DEFAULT_FEATURES=[f.connectableFeature,h.selectFeature,a.boundsFeature,d.fadeFeature,l.hoverFeedbackFeature],e}(f.SConnectableElement);e.SPort=_;var w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selected=!1,e.hoverFeedback=!1,e.opacity=1,e}return r(e,t),e.DEFAULT_FEATURES=[u.editFeature,c.deletableFeature,h.selectFeature,d.fadeFeature,l.hoverFeedbackFeature],e}(f.SRoutableElement);e.SEdge=w;var P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selected=!1,e.alignment=g.ORIGIN_POINT,e.opacity=1,e}return r(e,t),e.DEFAULT_FEATURES=[a.boundsFeature,a.alignFeature,a.layoutableChildFeature,s.edgeLayoutFeature,d.fadeFeature],e}(a.SShapeElement);e.SLabel=P;var S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.opacity=1,e}return r(e,t),e.DEFAULT_FEATURES=[a.boundsFeature,a.layoutContainerFeature,a.layoutableChildFeature,d.fadeFeature],e}(a.SShapeElement);e.SCompartment=S;var O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.outgoing=new Map,e.incoming=new Map,e}return r(e,t),e.prototype.add=function(e){if(t.prototype.add.call(this,e),e instanceof w){if(e.sourceId){var n=this.outgoing.get(e.sourceId);void 0===n?this.outgoing.set(e.sourceId,[e]):n.push(e)}if(e.targetId){var o=this.incoming.get(e.targetId);void 0===o?this.incoming.set(e.targetId,[e]):o.push(e)}}},e.prototype.remove=function(e){if(t.prototype.remove.call(this,e),e instanceof w){var n=this.outgoing.get(e.sourceId);void 0!==n&&(o=n.indexOf(e))>=0&&(1===n.length?this.outgoing.delete(e.sourceId):n.splice(o,1));var o,r=this.incoming.get(e.targetId);void 0!==r&&(o=r.indexOf(e))>=0&&(1===r.length?this.incoming.delete(e.targetId):r.splice(o,1))}},e.prototype.getAttachedElements=function(t){var e=this;return new v.FluentIterableImpl((function(){return{outgoing:e.outgoing.get(t.id),incoming:e.incoming.get(t.id),nextOutgoingIndex:0,nextIncomingIndex:0}}),(function(t){var e=t.nextOutgoingIndex;if(void 0!==t.outgoing&&e<t.outgoing.length)return t.nextOutgoingIndex=e+1,{done:!1,value:t.outgoing[e]};if(e=t.nextIncomingIndex,void 0!==t.incoming)for(;e<t.incoming.length;){var n=t.incoming[e];if(n.sourceId!==n.targetId)return t.nextIncomingIndex=e+1,{done:!1,value:n};e++}return{done:!0,value:void 0}}))},e.prototype.getIncomingEdges=function(t){return this.incoming.get(t.id)||[]},e.prototype.getOutgoingEdges=function(t){return this.outgoing.get(t.id)||[]},e}(i.SModelIndex);e.SGraphIndex=O},610:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var s=n(6700),c=n(2388),u=n(8558),d=n(4626),l=n(2842),p=n(8971),f=n(6283),h=n(4096),y=n(2083),g=function(){function t(){}return t.prototype.render=function(t,e){var n="scale("+t.zoom+") translate("+-t.scroll.x+","+-t.scroll.y+")";return c.svg("svg",{"class-sprotty-graph":!0},c.svg("g",{transform:n},e.renderChildren(t)))},i([s.injectable()],t)}();e.SGraphView=g;var v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.render=function(t,e){var n=this.edgeRouterRegistry.get(t.routerKind).route(t);if(0===n.length)return this.renderDanglingEdge("Cannot compute route",t,e);if(!this.isVisible(t,n,e)){if(0===t.children.length)return;return c.svg("g",null,e.renderChildren(t,{route:n}))}return c.svg("g",{"class-sprotty-edge":!0,"class-mouseover":t.hoverFeedback},this.renderLine(t,n,e),this.renderAdditionals(t,n,e),e.renderChildren(t,{route:n}))},e.prototype.renderLine=function(t,e,n){for(var o=e[0],r="M "+o.x+","+o.y,i=1;i<e.length;i++){var a=e[i];r+=" L "+a.x+","+a.y}return c.svg("path",{d:r})},e.prototype.renderAdditionals=function(t,e,n){return[]},e.prototype.renderDanglingEdge=function(t,e,n){return c.svg("text",{"class-sprotty-edge-dangling":!0,title:t},"?")},i([s.inject(h.EdgeRouterRegistry),a("design:type",h.EdgeRouterRegistry)],e.prototype,"edgeRouterRegistry",void 0),i([s.injectable()],e)}(y.RoutableView);e.PolylineEdgeView=v;var m=function(){function t(){this.minimalPointDistance=10}return t.prototype.render=function(t,e,n){if(n&&n.route&&t.parent instanceof f.SRoutableElement){var o=this.edgeRouterRegistry.get(t.parent.routerKind),r=void 0===n.route?o.route(t.parent):n.route,i=o.getHandlePosition(t.parent,r,t);if(void 0!==i){var a=c.svg("circle",{"class-sprotty-routing-handle":!0,"class-selected":t.selected,"class-mouseover":t.hoverFeedback,cx:i.x,cy:i.y,r:this.getRadius()});return d.setAttr(a,"data-kind",t.kind),a}}return c.svg("g",null)},t.prototype.getRadius=function(){return 7},i([s.inject(h.EdgeRouterRegistry),a("design:type",h.EdgeRouterRegistry)],t.prototype,"edgeRouterRegistry",void 0),i([s.injectable()],t)}();e.SRoutingHandleView=m;var b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.render=function(t,e){if(p.isEdgeLayoutable(t)||this.isVisible(t,e)){var n=c.svg("text",{"class-sprotty-label":!0},t.text),o=u.getSubType(t);return o&&d.setAttr(n,"class",o),n}},i([s.injectable()],e)}(l.ShapeView);e.SLabelView=b;var _=function(){function t(){}return t.prototype.render=function(t,e){var n="translate("+t.bounds.x+", "+t.bounds.y+")",o=c.svg("g",{transform:n,"class-sprotty-comp":"{true}"},e.renderChildren(t)),r=u.getSubType(t);return r&&d.setAttr(o,"class",r),o},i([s.injectable()],t)}();e.SCompartmentView=_},3409:(t,e,n)=>{"use strict";function o(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),o(n(152)),o(n(1977)),o(n(6529)),o(n(3083)),o(n(1198)),o(n(6692)),o(n(4370)),o(n(1864)),o(n(2857)),o(n(6990)),o(n(7901)),o(n(5917)),o(n(2125)),o(n(1194)),o(n(8558)),o(n(6771)),o(n(9888)),o(n(3075)),o(n(8842)),o(n(3999)),o(n(6004)),o(n(6589)),o(n(1677)),o(n(6708)),o(n(6265)),o(n(2233)),o(n(9600)),o(n(5055)),o(n(4626)),o(n(1826));var r=n(2635);e.defaultModule=r.default,o(n(1403)),o(n(2463)),o(n(1771)),o(n(9046)),o(n(594)),o(n(7015)),o(n(7987)),o(n(2842)),o(n(1842)),o(n(2011)),o(n(8681)),o(n(2019)),o(n(187)),o(n(2200)),o(n(7854)),o(n(1661)),o(n(1022)),o(n(8971)),o(n(3235)),o(n(6077)),o(n(2110)),o(n(3344)),o(n(5149)),o(n(2628)),o(n(3011)),o(n(4446)),o(n(9142)),o(n(6609)),o(n(9391)),o(n(8948)),o(n(33)),o(n(4965)),o(n(4350)),o(n(3906)),o(n(6793)),o(n(8099)),o(n(6211)),o(n(9294)),o(n(2380)),o(n(5714)),o(n(1026)),o(n(3249)),o(n(1528)),o(n(5989)),o(n(6777)),o(n(1271)),o(n(9220)),o(n(7478)),o(n(6782)),o(n(5329)),o(n(6283)),o(n(3289)),o(n(3104)),o(n(4096)),o(n(2083)),o(n(1982)),o(n(9774)),o(n(6404)),o(n(8843)),o(n(1994)),o(n(7872)),o(n(7740)),o(n(9881)),o(n(7466)),o(n(7053)),o(n(4678)),o(n(2296));var i=n(6499);e.graphModule=i.default;var a=n(4760);e.boundsModule=a.default;var s=n(1992);e.buttonModule=s.default;var c=n(5408);e.commandPaletteModule=c.default;var u=n(2783);e.contextMenuModule=u.default;var d=n(2849);e.decorationModule=d.default;var l=n(1661);e.edgeLayoutModule=l.default;var p=n(443);e.expandModule=p.default;var f=n(5853);e.exportModule=f.default;var h=n(965);e.fadeModule=h.default;var y=n(7999);e.hoverModule=y.default;var g=n(3610);e.moveModule=g.default;var v=n(8997);e.openModule=v.default;var m=n(6149);e.routingModule=m.default;var b=n(6754);e.selectModule=b.default;var _=n(2752);e.undoRedoModule=_.default;var w=n(7799);e.updateModule=w.default;var P=n(8331);e.viewportModule=P.default;var S=n(140);e.zorderModule=S.default,o(n(7960)),o(n(6054)),o(n(610)),o(n(5364)),o(n(365)),o(n(1228)),o(n(6992)),o(n(9779)),o(n(3280)),o(n(7137)),o(n(2633)),o(n(2840)),o(n(3452)),o(n(3101));var O=n(1706);e.modelSourceModule=O.default,o(n(5824)),o(n(6401)),o(n(7073)),o(n(3392)),o(n(8049)),o(n(6530))},365:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var a=n(6700),s=n(2388),c=n(6345),u=n(4626),d=n(2842),l=n(6992),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.render=function(t,e){if(!(t instanceof l.ShapedPreRenderedElement)||this.isVisible(t,e)){var n=c.default(t.code);return this.correctNamespace(n),n}},e.prototype.correctNamespace=function(t){"svg"!==t.sel&&"g"!==t.sel||u.setNamespace(t,"http://www.w3.org/2000/svg")},i([a.injectable()],e)}(d.ShapeView);e.PreRenderedView=p;var f=function(){function t(){}return t.prototype.render=function(t,e){var n=c.default(t.code),o=s.svg("g",null,s.svg("foreignObject",{requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility",height:t.bounds.height,width:t.bounds.width,x:0,y:0},n),e.renderChildren(t));return u.setAttr(o,"class",t.type),u.setNamespace(n,t.namespace),o},i([a.injectable()],t)}();e.ForeignObjectView=f},1228:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var r=n(2388),i=n(4626),a=n(6700),s=function(){function t(){}return t.prototype.render=function(t,e){for(var n=r.html("div",null,e.renderChildren(t)),o=0,a=t.classes;o<a.length;o++){var s=a[o];i.setClass(n,s,!0)}return n},o([a.injectable()],t)}();e.HtmlRootView=s},6992:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(6771),a=n(7073),s=n(9046),c=n(1026),u=n(1982),d=n(6054),l=n(9220),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"anchorKind",{get:function(){return l.ELLIPTIC_ANCHOR_KIND},enumerable:!0,configurable:!0}),e}(d.SNode);e.CircularNode=p;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"anchorKind",{get:function(){return l.RECTANGULAR_ANCHOR_KIND},enumerable:!0,configurable:!0}),e}(d.SNode);e.RectangularNode=f;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"anchorKind",{get:function(){return l.DIAMOND_ANCHOR_KIND},enumerable:!0,configurable:!0}),e}(d.SNode);e.DiamondNode=h;var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"anchorKind",{get:function(){return l.ELLIPTIC_ANCHOR_KIND},enumerable:!0,configurable:!0}),e}(d.SPort);e.CircularPort=y;var g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"anchorKind",{get:function(){return l.RECTANGULAR_ANCHOR_KIND},enumerable:!0,configurable:!0}),e}(d.SPort);e.RectangularPort=g;var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.classes=[],e}return r(e,t),e}(i.SModelRoot);e.HtmlRoot=v;var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(i.SChildElement);e.PreRenderedElement=m;var b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.position=a.ORIGIN_POINT,e.size=a.EMPTY_DIMENSION,e.selected=!1,e.alignment=a.ORIGIN_POINT,e}return r(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return{x:this.position.x,y:this.position.y,width:this.size.width,height:this.size.height}},set:function(t){this.position={x:t.x,y:t.y},this.size={width:t.width,height:t.height}},enumerable:!0,configurable:!0}),e.DEFAULT_FEATURES=[c.moveFeature,s.boundsFeature,u.selectFeature,s.alignFeature],e}(m);e.ShapedPreRenderedElement=b;var _=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return a.isValidDimension(this.size)?{x:this.position.x,y:this.position.y,width:this.size.width,height:this.size.height}:s.isBoundsAware(this.parent)?{x:this.position.x,y:this.position.y,width:this.parent.bounds.width,height:this.parent.bounds.height}:a.EMPTY_BOUNDS},enumerable:!0,configurable:!0}),e}(b);e.ForeignObjectElement=_},5364:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(2635),r=n(1706),i=n(4760),a=n(1992),s=n(5408),c=n(2783),u=n(2849),d=n(1661),l=n(2110),p=n(443),f=n(5853),h=n(965),y=n(7999),g=n(3610),v=n(8997),m=n(6149),b=n(6754),_=n(2752),w=n(7799),P=n(8331),S=n(140);e.loadDefaultModules=function(t,e){var n=[o.default,r.default,i.default,a.default,s.default,c.default,u.default,l.edgeEditModule,d.default,p.default,f.default,h.default,y.default,l.labelEditModule,l.labelEditUiModule,g.default,v.default,m.default,b.default,_.default,w.default,P.default,S.default];if(e&&e.exclude)for(var O=0,E=e.exclude;O<E.length;O++){var x=E[O],R=n.indexOf(x);R>=0&&n.splice(R,1)}t.load.apply(t,n)}},9779:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var a=n(2388),s=n(6054),c=n(2842),u=n(7073),d=n(6700),l=function(){function t(){}return t.prototype.render=function(t,e){var n="scale("+t.zoom+") translate("+-t.scroll.x+","+-t.scroll.y+")";return a.svg("svg",null,a.svg("g",{transform:n},e.renderChildren(t)))},i([d.injectable()],t)}();e.SvgViewportView=l;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.render=function(t,e){if(this.isVisible(t,e)){var n=this.getRadius(t);return a.svg("g",null,a.svg("circle",{"class-sprotty-node":t instanceof s.SNode,"class-sprotty-port":t instanceof s.SPort,"class-mouseover":t.hoverFeedback,"class-selected":t.selected,r:n,cx:n,cy:n}),e.renderChildren(t))}},e.prototype.getRadius=function(t){var e=Math.min(t.size.width,t.size.height);return e>0?e/2:0},i([d.injectable()],e)}(c.ShapeView);e.CircularNodeView=p;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.render=function(t,e){if(this.isVisible(t,e))return a.svg("g",null,a.svg("rect",{"class-sprotty-node":t instanceof s.SNode,"class-sprotty-port":t instanceof s.SPort,"class-mouseover":t.hoverFeedback,"class-selected":t.selected,x:"0",y:"0",width:Math.max(t.size.width,0),height:Math.max(t.size.height,0)}),e.renderChildren(t))},i([d.injectable()],e)}(c.ShapeView);e.RectangularNodeView=f;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.render=function(t,e){if(this.isVisible(t,e)){var n=new u.Diamond({height:Math.max(t.size.height,0),width:Math.max(t.size.width,0),x:0,y:0}),o=y(n.topPoint)+" "+y(n.rightPoint)+" "+y(n.bottomPoint)+" "+y(n.leftPoint);return a.svg("g",null,a.svg("polygon",{"class-sprotty-node":t instanceof s.SNode,"class-sprotty-port":t instanceof s.SPort,"class-mouseover":t.hoverFeedback,"class-selected":t.selected,points:o}),e.renderChildren(t))}},i([d.injectable()],e)}(c.ShapeView);function y(t){return t.x+","+t.y}e.DiamondNodeView=h;var g=function(){function t(){}return t.prototype.render=function(t,e){return a.svg("g",null)},i([d.injectable()],t)}();e.EmptyGroupView=g},3280:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(6700),u=n(1864),d=n(1826),l=n(3452),p=function(){this.kind=f.KIND};e.CommitModelAction=p;var f=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return r(e,t),e.prototype.execute=function(t){return this.newModel=t.modelFactory.createSchema(t.root),this.doCommit(this.newModel,t.root,!0)},e.prototype.doCommit=function(t,e,n){var o=this,r=this.modelSource.commitModel(t);return r instanceof Promise?r.then((function(t){return n&&(o.originalModel=t),e})):(n&&(this.originalModel=r),e)},e.prototype.undo=function(t){return this.doCommit(this.originalModel,t.root,!1)},e.prototype.redo=function(t){return this.doCommit(this.newModel,t.root,!1)},e.KIND="commitModel",i([c.inject(d.TYPES.ModelSource),a("design:type",l.ModelSource)],e.prototype,"modelSource",void 0),i([c.injectable(),s(0,c.inject(d.TYPES.Action)),a("design:paramtypes",[p])],e)}(u.SystemCommand);e.CommitModelCommand=f},1706:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6700),r=n(2857),i=n(1826),a=n(3280),s=n(3452),c=new o.ContainerModule((function(t,e,n){t(i.TYPES.ModelSourceProvider).toProvider((function(t){return function(){return new Promise((function(e){e(t.container.get(i.TYPES.ModelSource))}))}})),r.configureCommand({bind:t,isBound:n},a.CommitModelCommand),t(i.TYPES.IActionHandlerInitializer).toService(i.TYPES.ModelSource),t(s.ComputedBoundsApplicator).toSelf().inSingletonScope()}));e.default=c},7137:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},a=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var c=n(3162),u=n(6700),d=n(2125),l=n(1826),p=n(1403),f=n(6609),h=n(4350),y=n(8099),g=n(6777),v=n(1994),m=n(3452);function b(t){return void 0!==t&&t.hasOwnProperty("action")}e.isActionMessage=b;var _=function(){function t(){this.kind=t.KIND}return t.KIND="serverStatus",t}();e.ServerStatusAction=_;var w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currentRoot={type:"NONE",id:"ROOT"},e}return r(e,t),e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),e.register(p.ComputedBoundsAction.KIND,this),e.register(p.RequestBoundsCommand.KIND,this),e.register(y.RequestPopupModelAction.KIND,this),e.register(f.CollapseExpandAction.KIND,this),e.register(f.CollapseExpandAllAction.KIND,this),e.register(g.OpenAction.KIND,this),e.register(_.KIND,this),this.clientId||(this.clientId=this.viewerOptions.baseDiv)},e.prototype.handle=function(t){this.handleLocally(t)&&this.forwardToServer(t)},e.prototype.forwardToServer=function(t){var e={clientId:this.clientId,action:t};this.logger.log(this,"sending",e),this.sendMessage(e)},e.prototype.messageReceived=function(t){var e=this,n="string"==typeof t?JSON.parse(t):t;b(n)&&n.action?n.clientId&&n.clientId!==this.clientId||(n.action.__receivedFromServer=!0,this.logger.log(this,"receiving",n),this.actionDispatcher.dispatch(n.action).then((function(){e.storeNewModel(n.action)}))):this.logger.error(this,"received data is not an action message",n)},e.prototype.handleLocally=function(t){switch(this.storeNewModel(t),t.kind){case p.ComputedBoundsAction.KIND:return this.handleComputedBounds(t);case d.RequestModelAction.KIND:return this.handleRequestModel(t);case p.RequestBoundsCommand.KIND:return!1;case h.ExportSvgAction.KIND:return this.handleExportSvgAction(t);case _.KIND:return this.handleServerStateAction(t)}return!t.__receivedFromServer},e.prototype.storeNewModel=function(t){if(t.kind===d.SetModelCommand.KIND||t.kind===v.UpdateModelCommand.KIND||t.kind===p.RequestBoundsCommand.KIND){var e=t.newRoot;e&&(this.currentRoot=e,t.kind!==d.SetModelCommand.KIND&&t.kind!==v.UpdateModelCommand.KIND||(this.lastSubmittedModelType=e.type))}},e.prototype.handleRequestModel=function(t){var e=i({needsClientLayout:this.viewerOptions.needsClientLayout,needsServerLayout:this.viewerOptions.needsServerLayout},t.options),n=i(i({},t),{options:e});return this.forwardToServer(n),!1},e.prototype.handleComputedBounds=function(t){if(this.viewerOptions.needsServerLayout)return!0;var e=this.currentRoot;return this.computedBoundsApplicator.apply(e,t),e.type===this.lastSubmittedModelType?this.actionDispatcher.dispatch(new v.UpdateModelAction(e)):this.actionDispatcher.dispatch(new d.SetModelAction(e)),this.lastSubmittedModelType=e.type,!1},e.prototype.handleExportSvgAction=function(t){var e=new Blob([t.svg],{type:"text/plain;charset=utf-8"});return c.saveAs(e,"diagram.svg"),!1},e.prototype.handleServerStateAction=function(t){return!1},e.prototype.commitModel=function(t){var e=this.currentRoot;return this.currentRoot=t,e},a([u.inject(l.TYPES.ILogger),s("design:type",Object)],e.prototype,"logger",void 0),a([u.inject(m.ComputedBoundsApplicator),s("design:type",m.ComputedBoundsApplicator)],e.prototype,"computedBoundsApplicator",void 0),a([u.injectable()],e)}(m.ModelSource);e.DiagramServer=w},2633:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((o=o.apply(t,e||[])).next())}))},c=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(3162),d=n(6700),l=n(1826),p=n(2125),f=n(6771),h=n(8558),y=n(1194),g=n(1403),v=n(7053),m=n(4350),b=n(8099),_=n(8843),w=n(1994),P=n(9774),S=n(3452),O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currentRoot=y.EMPTY_ROOT,e}return r(e,t),Object.defineProperty(e.prototype,"model",{get:function(){return this.currentRoot},set:function(t){this.setModel(t)},enumerable:!0,configurable:!0}),e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),e.register(g.ComputedBoundsAction.KIND,this),e.register(b.RequestPopupModelAction.KIND,this)},e.prototype.setModel=function(t){return this.currentRoot=t,this.submitModel(t,!1)},e.prototype.commitModel=function(t){var e=this.currentRoot;return this.currentRoot=t,e},e.prototype.updateModel=function(t){return void 0===t?this.submitModel(this.currentRoot,!0):(this.currentRoot=t,this.submitModel(t,!0))},e.prototype.getSelection=function(){return s(this,void 0,void 0,(function(){var t,e;return c(this,(function(n){switch(n.label){case 0:return[4,this.actionDispatcher.request(P.GetSelectionAction.create())];case 1:return t=n.sent(),(e=new f.SModelIndex).add(this.currentRoot),[2,e.all().filter((function(e){return t.selectedElementsIDs.indexOf(e.id)>=0}))]}}))}))},e.prototype.getViewport=function(){return s(this,void 0,void 0,(function(){var t;return c(this,(function(e){switch(e.label){case 0:return[4,this.actionDispatcher.request(v.GetViewportAction.create())];case 1:return[2,{scroll:(t=e.sent()).viewport.scroll,zoom:t.viewport.zoom,canvasBounds:t.canvasBounds}]}}))}))},e.prototype.submitModel=function(t,e,n){return s(this,void 0,void 0,(function(){var o,r;return c(this,(function(i){switch(i.label){case 0:return this.viewerOptions.needsClientLayout?[4,this.actionDispatcher.request(g.RequestBoundsAction.create(t))]:[3,3];case 1:return o=i.sent(),r=this.computedBoundsApplicator.apply(this.currentRoot,o),[4,this.doSubmitModel(t,!0,n,r)];case 2:return i.sent(),[3,5];case 3:return[4,this.doSubmitModel(t,e,n)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},e.prototype.doSubmitModel=function(t,e,n,o){return s(this,void 0,void 0,(function(){var r,i,a,s,u;return c(this,(function(c){switch(c.label){case 0:if(void 0===this.layoutEngine)return[3,6];c.label=1;case 1:return c.trys.push([1,5,,6]),(r=this.layoutEngine.layout(t,o))instanceof Promise?[4,r]:[3,3];case 2:return t=c.sent(),[3,4];case 3:void 0!==r&&(t=r),c.label=4;case 4:return[3,6];case 5:return i=c.sent(),this.logger.error(this,i.toString(),i.stack),[3,6];case 6:return a=this.lastSubmittedModelType,this.lastSubmittedModelType=t.type,n&&n.kind===p.RequestModelAction.KIND&&n.requestId?(s=n,[4,this.actionDispatcher.dispatch(new p.SetModelAction(t,s.requestId))]):[3,8];case 7:return c.sent(),[3,12];case 8:return e&&t.type===a?(u=Array.isArray(e)?e:t,[4,this.actionDispatcher.dispatch(new w.UpdateModelAction(u,!0,n))]):[3,10];case 9:return c.sent(),[3,12];case 10:return[4,this.actionDispatcher.dispatch(new p.SetModelAction(t))];case 11:c.sent(),c.label=12;case 12:return[2]}}))}))},e.prototype.applyMatches=function(t){var e=this.currentRoot;return _.applyMatches(e,t),this.submitModel(e,t)},e.prototype.addElements=function(t){for(var e=[],n=0,o=t;n<o.length;n++){var r=o[n];void 0!==r.element&&void 0!==r.parentId?e.push({right:r.element,rightParentId:r.parentId}):void 0!==r.id&&e.push({right:r,rightParentId:this.currentRoot.id})}return this.applyMatches(e)},e.prototype.removeElements=function(t){var e=[],n=new f.SModelIndex;n.add(this.currentRoot);for(var o=0,r=t;o<r.length;o++){var i,a=r[o];void 0!==a.elementId&&void 0!==a.parentId?void 0!==(i=n.getById(a.elementId))&&e.push({left:i,leftParentId:a.parentId}):void 0!==(i=n.getById(a))&&e.push({left:i,leftParentId:this.currentRoot.id})}return this.applyMatches(e)},e.prototype.handle=function(t){switch(t.kind){case p.RequestModelAction.KIND:this.handleRequestModel(t);break;case g.ComputedBoundsAction.KIND:this.computedBoundsApplicator.apply(this.currentRoot,t);break;case b.RequestPopupModelAction.KIND:this.handleRequestPopupModel(t);break;case m.ExportSvgAction.KIND:this.handleExportSvgAction(t)}},e.prototype.handleRequestModel=function(t){this.submitModel(this.currentRoot,!1,t)},e.prototype.handleRequestPopupModel=function(t){if(void 0!==this.popupModelProvider){var e=h.findElement(this.currentRoot,t.elementId),n=this.popupModelProvider.getPopupModel(t,e);void 0!==n&&(n.canvasBounds=t.bounds,this.actionDispatcher.dispatch(new b.SetPopupModelAction(n,t.requestId)))}},e.prototype.handleExportSvgAction=function(t){var e=new Blob([t.svg],{type:"text/plain;charset=utf-8"});u.saveAs(e,"diagram.svg")},i([d.inject(l.TYPES.ILogger),a("design:type",Object)],e.prototype,"logger",void 0),i([d.inject(S.ComputedBoundsApplicator),a("design:type",S.ComputedBoundsApplicator)],e.prototype,"computedBoundsApplicator",void 0),i([d.inject(l.TYPES.IPopupModelProvider),d.optional(),a("design:type",Object)],e.prototype,"popupModelProvider",void 0),i([d.inject(l.TYPES.IModelLayoutEngine),d.optional(),a("design:type",Object)],e.prototype,"layoutEngine",void 0),i([d.injectable()],e)}(S.ModelSource);e.LocalModelSource=O},2840:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o};Object.defineProperty(e,"__esModule",{value:!0});var a=n(6700),s=n(8049),c=n(1826),u=function(){function t(e,n,o,r,i){this.severity=e,this.time=n,this.caller=o,this.message=r,this.params=i,this.kind=t.KIND}return t.KIND="logging",t}();e.LoggingAction=u;var d=function(){function t(){}return t.prototype.error=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];this.logLevel>=s.LogLevel.error&&this.forward(t,e,s.LogLevel.error,n)},t.prototype.warn=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];this.logLevel>=s.LogLevel.warn&&this.forward(t,e,s.LogLevel.warn,n)},t.prototype.info=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];this.logLevel>=s.LogLevel.info&&this.forward(t,e,s.LogLevel.info,n)},t.prototype.log=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(this.logLevel>=s.LogLevel.log)try{var r="object"==typeof t?t.constructor.name:String(t);console.log.apply(t,i([r+": "+e],n))}catch(t){}},t.prototype.forward=function(t,e,n,o){var r=new Date,i=new u(s.LogLevel[n],r.toLocaleTimeString(),"object"==typeof t?t.constructor.name:String(t),e,o.map((function(t){return JSON.stringify(t)})));this.modelSourceProvider().then((function(n){try{n.handle(i)}catch(n){try{console.log.apply(t,[e,i,n])}catch(t){}}}))},o([a.inject(c.TYPES.ModelSourceProvider),r("design:type",Function)],t.prototype,"modelSourceProvider",void 0),o([a.inject(c.TYPES.LogLevel),r("design:type",Number)],t.prototype,"logLevel",void 0),o([a.injectable()],t)}();e.ForwardingLogger=d},3452:function(t,e,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(6700),s=n(2125),c=n(1826),u=n(4350),d=n(6771),l=function(){function t(){}return t.prototype.initialize=function(t){t.register(s.RequestModelAction.KIND,this),t.register(u.ExportSvgAction.KIND,this)},r([a.inject(c.TYPES.IActionDispatcher),i("design:type",Object)],t.prototype,"actionDispatcher",void 0),r([a.inject(c.TYPES.ViewerOptions),i("design:type",Object)],t.prototype,"viewerOptions",void 0),r([a.injectable()],t)}();e.ModelSource=l;var p=function(){function t(){}return t.prototype.apply=function(t,e){var n=new d.SModelIndex;n.add(t);for(var o=0,r=e.bounds;o<r.length;o++){var i=r[o];void 0!==(c=n.getById(i.elementId))&&this.applyBounds(c,i.newPosition,i.newSize)}if(void 0!==e.alignments)for(var a=0,s=e.alignments;a<s.length;a++){var c,u=s[a];void 0!==(c=n.getById(u.elementId))&&this.applyAlignment(c,u.newAlignment)}return n},t.prototype.applyAlignment=function(t,e){t.alignment={x:e.x,y:e.y}},t.prototype.applyBounds=function(t,e,n){var r=t;e&&(r.position=o({},e)),r.size=o({},n)},r([a.injectable()],t)}();e.ComputedBoundsApplicator=p},3101:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var a=n(6700),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.listen=function(t){var e=this;t.addEventListener("message",(function(t){e.messageReceived(t.data)})),t.addEventListener("error",(function(t){e.logger.error(e,"error event received",t)})),this.webSocket=t},e.prototype.disconnect=function(){this.webSocket&&(this.webSocket.close(),this.webSocket=void 0)},e.prototype.sendMessage=function(t){if(!this.webSocket)throw new Error("WebSocket is not connected");this.webSocket.send(JSON.stringify(t))},i([a.injectable()],e)}(n(7137).DiagramServer);e.WebSocketDiagramServer=s},3136:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Deferred=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}},5824:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(7073);function r(){return-1!==window.navigator.userAgent.indexOf("Mac")}e.isCtrlOrCmd=function(t){return r()?t.metaKey:t.ctrlKey},e.isMac=r,e.isCrossSite=function(t){if(t&&"undefined"!=typeof window&&window.location){var e="";return window.location.protocol&&(e+=window.location.protocol+"//"),window.location.host&&(e+=window.location.host),e.length>0&&!t.startsWith(e)}return!1},e.getWindowScroll=function(){return"undefined"==typeof window?o.ORIGIN_POINT:{x:window.pageXOffset,y:window.pageYOffset}}},6401:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rgb=function(t,e,n){return{red:t,green:e,blue:n}},e.toSVG=function(t){return"rgb("+t.red+","+t.green+","+t.blue+")"};var n=function(){function t(t){this.stops=t}return t.prototype.getColor=function(t){t=Math.max(0,Math.min(.99999999,t));var e=Math.floor(t*this.stops.length);return this.stops[e]},t}();e.ColorMap=n},7073:(t,e)=>{"use strict";function n(t,e){return{x:t.x+e.x,y:t.y+e.y}}function o(t,e){return{x:t.x-e.x,y:t.y-e.y}}function r(t){return t.width>=0&&t.height>=0}function i(t){return{x:t.x+(t.width>=0?.5*t.width:0),y:t.y+(t.height>=0?.5*t.height:0)}}function a(t){var n=s(t);return 0===n||1===n?e.ORIGIN_POINT:{x:t.x/n,y:t.y/n}}function s(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}var c;Object.defineProperty(e,"__esModule",{value:!0}),e.ORIGIN_POINT=Object.freeze({x:0,y:0}),e.add=n,e.subtract=o,e.EMPTY_DIMENSION=Object.freeze({width:-1,height:-1}),e.isValidDimension=r,e.EMPTY_BOUNDS=Object.freeze({x:0,y:0,width:-1,height:-1}),e.isBounds=function(t){return"x"in t&&"y"in t&&"width"in t&&"height"in t},e.combine=function(t,n){if(!r(t))return r(n)?n:e.EMPTY_BOUNDS;if(!r(n))return t;var o=Math.min(t.x,n.x),i=Math.min(t.y,n.y);return{x:o,y:i,width:Math.max(t.x+(t.width>=0?t.width:0),n.x+(n.width>=0?n.width:0))-o,height:Math.max(t.y+(t.height>=0?t.height:0),n.y+(n.height>=0?n.height:0))-i}},e.translate=function(t,e){return{x:t.x+e.x,y:t.y+e.y,width:t.width,height:t.height}},e.center=i,e.centerOfLine=function(t,e){return i({x:t.x>e.x?e.x:t.x,y:t.y>e.y?e.y:t.y,width:Math.abs(e.x-t.x),height:Math.abs(e.y-t.y)})},e.includes=function(t,e){return e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height},(c=e.Direction||(e.Direction={}))[c.left=0]="left",c[c.right=1]="right",c[c.up=2]="up",c[c.down=3]="down",e.euclideanDistance=function(t,e){var n=e.x-t.x,o=e.y-t.y;return Math.sqrt(n*n+o*o)},e.manhattanDistance=function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},e.maxDistance=function(t,e){return Math.max(Math.abs(e.x-t.x),Math.abs(e.y-t.y))},e.angleOfPoint=function(t){return Math.atan2(t.y,t.x)},e.angleBetweenPoints=function(t,e){var n=Math.sqrt((t.x*t.x+t.y*t.y)*(e.x*e.x+e.y*e.y));if(isNaN(n)||0===n)return NaN;var o=t.x*e.x+t.y*e.y;return Math.acos(o/n)},e.shiftTowards=function(t,e,r){var i=a(o(e,t));return n(t,{x:i.x*r,y:i.y*r})},e.normalize=a,e.magnitude=s,e.toDegrees=function(t){return 180*t/Math.PI},e.toRadians=function(t){return t*Math.PI/180},e.almostEquals=function(t,e){return Math.abs(t-e)<.001},e.linear=function(t,e,n){return{x:(1-n)*t.x+n*e.x,y:(1-n)*t.y+n*e.y}};var u=function(){function t(t){this.bounds=t}return Object.defineProperty(t.prototype,"topPoint",{get:function(){return{x:this.bounds.x+this.bounds.width/2,y:this.bounds.y}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightPoint",{get:function(){return{x:this.bounds.x+this.bounds.width,y:this.bounds.y+this.bounds.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomPoint",{get:function(){return{x:this.bounds.x+this.bounds.width/2,y:this.bounds.y+this.bounds.height}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftPoint",{get:function(){return{x:this.bounds.x,y:this.bounds.y+this.bounds.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRightSideLine",{get:function(){return new d(this.topPoint,this.rightPoint)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeftSideLine",{get:function(){return new d(this.topPoint,this.leftPoint)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRightSideLine",{get:function(){return new d(this.bottomPoint,this.rightPoint)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomLeftSideLine",{get:function(){return new d(this.bottomPoint,this.leftPoint)},enumerable:!0,configurable:!0}),t.prototype.closestSideLine=function(t){var e=i(this.bounds);return t.x>e.x?t.y>e.y?this.bottomRightSideLine:this.topRightSideLine:t.y>e.y?this.bottomLeftSideLine:this.topLeftSideLine},t}();e.Diamond=u;var d=function(){function t(t,e){this.p1=t,this.p2=e}return Object.defineProperty(t.prototype,"a",{get:function(){return this.p1.y-this.p2.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"b",{get:function(){return this.p2.x-this.p1.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"c",{get:function(){return this.p2.x*this.p1.y-this.p1.x*this.p2.y},enumerable:!0,configurable:!0}),t}();e.PointToPointLine=d,e.intersection=function(t,e){return{x:(t.c*e.b-e.c*t.b)/(t.a*e.b-e.a*t.b),y:(t.a*e.c-e.a*t.c)/(t.a*e.b-e.a*t.b)}}},3392:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isInjectable=function(t){return void 0!==Reflect.getMetadata("inversify:paramtypes",t)}},9140:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.startFn=t,this.nextFn=e}return t.prototype[Symbol.iterator]=function(){var t,e=this,n=((t={state:this.startFn(),next:function(){return e.nextFn(n.state)}})[Symbol.iterator]=function(){return n},t);return n},t.prototype.filter=function(t){return o(this,t)},t.prototype.map=function(t){return r(this,t)},t.prototype.forEach=function(t){var e,n=this[Symbol.iterator](),o=0;do{void 0!==(e=n.next()).value&&t(e.value,o),o++}while(!e.done)},t.prototype.indexOf=function(t){var e,n=this[Symbol.iterator](),o=0;do{if((e=n.next()).value===t)return o;o++}while(!e.done);return-1},t}();function o(t,e){return new n((function(){return i(t)}),(function(t){var n;do{n=t.next()}while(!n.done&&!e(n.value));return n}))}function r(t,o){return new n((function(){return i(t)}),(function(t){var n=t.next(),r=n.done,i=n.value;return r?e.DONE_RESULT:{done:!1,value:o(i)}}))}function i(t){var n=t[Symbol.iterator];if("function"==typeof n)return n.call(t);var o=t.length;return"number"==typeof o&&o>=0?new a(t):{next:function(){return e.DONE_RESULT}}}e.FluentIterableImpl=n,e.toArray=function(t){if(t.constructor===Array)return t;var e=[];return t.forEach((function(t){return e.push(t)})),e},e.DONE_RESULT=Object.freeze({done:!0,value:void 0}),e.filterIterable=o,e.mapIterable=r;var a=function(){function t(t){this.array=t,this.index=0}return t.prototype.next=function(){return this.index<this.array.length?{done:!1,value:this.array[this.index++]}:e.DONE_RESULT},t.prototype[Symbol.iterator]=function(){return this},t}()},8611:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(5824);function r(t){if(t.keyCode){var e=i[t.keyCode];if(void 0!==e)return e}return t.code}e.matchesKeystroke=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(r(t)!==e)return!1;if(o.isMac()){if(t.ctrlKey!==n.findIndex((function(t){return"ctrl"===t}))>=0)return!1;if(t.metaKey!==n.findIndex((function(t){return"meta"===t||"ctrlCmd"===t}))>=0)return!1}else{if(t.ctrlKey!==n.findIndex((function(t){return"ctrl"===t||"ctrlCmd"===t}))>=0)return!1;if(t.metaKey!==n.findIndex((function(t){return"meta"===t}))>=0)return!1}return t.altKey===n.findIndex((function(t){return"alt"===t}))>=0&&t.shiftKey===n.findIndex((function(t){return"shift"===t}))>=0},e.getActualCode=r;var i=new Array(256);!function(){function t(t,e){void 0===i[e]&&(i[e]=t)}t("Pause",3),t("Backspace",8),t("Tab",9),t("Enter",13),t("ShiftLeft",16),t("ShiftRight",16),t("ControlLeft",17),t("ControlRight",17),t("AltLeft",18),t("AltRight",18),t("CapsLock",20),t("Escape",27),t("Space",32),t("PageUp",33),t("PageDown",34),t("End",35),t("Home",36),t("ArrowLeft",37),t("ArrowUp",38),t("ArrowRight",39),t("ArrowDown",40),t("Insert",45),t("Delete",46),t("Digit1",49),t("Digit2",50),t("Digit3",51),t("Digit4",52),t("Digit5",53),t("Digit6",54),t("Digit7",55),t("Digit8",56),t("Digit9",57),t("Digit0",48),t("KeyA",65),t("KeyB",66),t("KeyC",67),t("KeyD",68),t("KeyE",69),t("KeyF",70),t("KeyG",71),t("KeyH",72),t("KeyI",73),t("KeyJ",74),t("KeyK",75),t("KeyL",76),t("KeyM",77),t("KeyN",78),t("KeyO",79),t("KeyP",80),t("KeyQ",81),t("KeyR",82),t("KeyS",83),t("KeyT",84),t("KeyU",85),t("KeyV",86),t("KeyW",87),t("KeyX",88),t("KeyY",89),t("KeyZ",90),t("OSLeft",91),t("MetaLeft",91),t("OSRight",92),t("MetaRight",92),t("ContextMenu",93),t("Numpad0",96),t("Numpad1",97),t("Numpad2",98),t("Numpad3",99),t("Numpad4",100),t("Numpad5",101),t("Numpad6",102),t("Numpad7",103),t("Numpad8",104),t("Numpad9",105),t("NumpadMultiply",106),t("NumpadAdd",107),t("NumpadSeparator",108),t("NumpadSubtract",109),t("NumpadDecimal",110),t("NumpadDivide",111),t("F1",112),t("F2",113),t("F3",114),t("F4",115),t("F5",116),t("F6",117),t("F7",118),t("F8",119),t("F9",120),t("F10",121),t("F11",122),t("F12",123),t("F13",124),t("F14",125),t("F15",126),t("F16",127),t("F17",128),t("F18",129),t("F19",130),t("F20",131),t("F21",132),t("F22",133),t("F23",134),t("F24",135),t("NumLock",144),t("ScrollLock",145),t("Semicolon",186),t("Equal",187),t("Comma",188),t("Minus",189),t("Period",190),t("Slash",191),t("Backquote",192),t("IntlRo",193),t("BracketLeft",219),t("Backslash",220),t("BracketRight",221),t("Quote",222),t("IntlYen",255)}()},8049:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o};Object.defineProperty(e,"__esModule",{value:!0});var a,s=n(6700),c=n(1826);!function(t){t[t.none=0]="none",t[t.error=1]="error",t[t.warn=2]="warn",t[t.info=3]="info",t[t.log=4]="log"}(a=e.LogLevel||(e.LogLevel={}));var u=function(){function t(){this.logLevel=a.none}return t.prototype.error=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o]},t.prototype.warn=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o]},t.prototype.info=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o]},t.prototype.log=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o]},o([s.injectable()],t)}();e.NullLogger=u;var d=function(){function t(){this.logLevel=a.log,this.viewOptions={baseDiv:""}}return t.prototype.error=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(this.logLevel>=a.error)try{console.error.apply(t,this.consoleArguments(t,e,n))}catch(t){}},t.prototype.warn=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(this.logLevel>=a.warn)try{console.warn.apply(t,this.consoleArguments(t,e,n))}catch(t){}},t.prototype.info=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(this.logLevel>=a.info)try{console.info.apply(t,this.consoleArguments(t,e,n))}catch(t){}},t.prototype.log=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(this.logLevel>=a.log)try{console.log.apply(t,this.consoleArguments(t,e,n))}catch(t){}},t.prototype.consoleArguments=function(t,e,n){var o;o="object"==typeof t?t.constructor.name:t;var r=new Date;return i([r.toLocaleTimeString()+" "+this.viewOptions.baseDiv+" "+o+": "+e],n)},o([s.inject(c.TYPES.LogLevel),r("design:type",Number)],t.prototype,"logLevel",void 0),o([s.inject(c.TYPES.ViewerOptions),r("design:type",Object)],t.prototype,"viewOptions",void 0),o([s.injectable()],t)}();e.ConsoleLogger=d},6530:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var r=n(6700),i=function(){function t(){this.elements=new Map}return t.prototype.register=function(t,e){if(void 0===t)throw new Error("Key is undefined");if(this.hasKey(t))throw new Error("Key is already registered: "+t);this.elements.set(t,e)},t.prototype.deregister=function(t){if(void 0===t)throw new Error("Key is undefined");this.elements.delete(t)},t.prototype.hasKey=function(t){return this.elements.has(t)},t.prototype.get=function(t,e){var n=this.elements.get(t);return n?new n(e):this.missing(t,e)},t.prototype.missing=function(t,e){throw new Error("Unknown registry key: "+t)},o([r.injectable()],t)}();e.ProviderRegistry=i;var a=function(){function t(){this.elements=new Map}return t.prototype.register=function(t,e){if(void 0===t)throw new Error("Key is undefined");if(this.hasKey(t))throw new Error("Key is already registered: "+t);this.elements.set(t,e)},t.prototype.deregister=function(t){if(void 0===t)throw new Error("Key is undefined");this.elements.delete(t)},t.prototype.hasKey=function(t){return this.elements.has(t)},t.prototype.get=function(t,e){var n=this.elements.get(t);return n?n(e):this.missing(t,e)},t.prototype.missing=function(t,e){throw new Error("Unknown registry key: "+t)},o([r.injectable()],t)}();e.FactoryRegistry=a;var s=function(){function t(){this.elements=new Map}return t.prototype.register=function(t,e){if(void 0===t)throw new Error("Key is undefined");if(this.hasKey(t))throw new Error("Key is already registered: "+t);this.elements.set(t,e)},t.prototype.deregister=function(t){if(void 0===t)throw new Error("Key is undefined");this.elements.delete(t)},t.prototype.hasKey=function(t){return this.elements.has(t)},t.prototype.get=function(t){return this.elements.get(t)||this.missing(t)},t.prototype.missing=function(t){throw new Error("Unknown registry key: "+t)},o([r.injectable()],t)}();e.InstanceRegistry=s;var c=function(){function t(){this.elements=new Map}return t.prototype.register=function(t,e){if(void 0===t)throw new Error("Key is undefined");var n=this.elements.get(t);void 0!==n?n.push(e):this.elements.set(t,[e])},t.prototype.deregisterAll=function(t){if(void 0===t)throw new Error("Key is undefined");this.elements.delete(t)},t.prototype.get=function(t){var e=this.elements.get(t);return void 0!==e?e:[]},o([r.injectable()],t)}();e.MultiInstanceRegistry=c},9163:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=e.context||document;if(!t)return null;var r=[],i=c((0,o.default)(t),r,n),a=void 0;return a=i?1===i.length?i[0]:i:u({type:"text",content:t},r,n),e.hooks&&e.hooks.create&&r.forEach((function(t){e.hooks.create(t)})),a};var o=a(n(3039)),r=a(n(6438)),i=n(6214);function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e,n){return t instanceof Array&&t.length>0?t.map((function(t){return u(t,e,n)})):void 0}function u(t,e,n){var o;return o="text"===t.type?(0,i.createTextVNode)(t.content,n):(0,r.default)(t.name,function(t,e){var n={};if(!t.attrs)return n;var o=Object.keys(t.attrs).reduce((function(n,o){if("style"!==o&&"class"!==o){var r=(0,i.unescapeEntities)(t.attrs[o],e);n?n[o]=r:n=s({},o,r)}return n}),null);o&&(n.attrs=o);var r=function(t){try{return t.attrs.style.split(";").reduce((function(t,e){var n=e.split(":"),o=(0,i.transformName)(n[0].trim());if(o){var r=n[1].replace("!important","").trim();t?t[o]=r:t=s({},o,r)}return t}),null)}catch(t){return null}}(t);r&&(n.style=r);var a=function(t){try{return t.attrs.class.split(" ").reduce((function(t,e){return(e=e.trim())&&(t?t[e]=!0:t=s({},e,!0)),t}),null)}catch(t){return null}}(t);return a&&(n.class=a),n}(t,n),c(t.children,e,n)),e.push(o),o}},6214:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createTextVNode=function(t,e){return(0,r.default)(void 0,void 0,void 0,s(t,e))},e.transformName=function(t){return""+(t=t.replace(/-(\w)/g,(function(t,e){return e.toUpperCase()}))).charAt(0).toLowerCase()+t.substring(1)},e.unescapeEntities=s;var o,r=(o=n(9492))&&o.__esModule?o:{default:o},i=new RegExp("&[a-z0-9#]+;","gi"),a=null;function s(t,e){return a||(a=e.createElement("div")),t.replace(i,(function(t){return a.innerHTML=t,a.textContent}))}},6438:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(9492),r=n(3954);function i(t,e,n){if(t.ns="http://www.w3.org/2000/svg","foreignObject"!==n&&void 0!==e)for(var o=0;o<e.length;++o){var r=e[o].data;void 0!==r&&i(r,e[o].children,e[o].sel)}}function a(t,e,n){var a,s,c,u={};if(void 0!==n?(u=e,r.array(n)?a=n:r.primitive(n)?s=n:n&&n.sel&&(a=[n])):void 0!==e&&(r.array(e)?a=e:r.primitive(e)?s=e:e&&e.sel?a=[e]:u=e),r.array(a))for(c=0;c<a.length;++c)r.primitive(a[c])&&(a[c]=o.vnode(void 0,void 0,void 0,a[c]));return"s"!==t[0]||"v"!==t[1]||"g"!==t[2]||3!==t.length&&"."!==t[3]&&"#"!==t[3]||i(u,a,t),o.vnode(t,u,a,s,void 0)}e.h=a,e.default=a},3954:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.array=Array.isArray,e.primitive=function(t){return"string"==typeof t||"number"==typeof t}},9492:(t,e)=>{"use strict";function n(t,e,n,o,r){return{sel:t,data:e,children:n,text:o,elm:r,key:void 0===e?void 0:e.key}}Object.defineProperty(e,"__esModule",{value:!0}),e.vnode=n,e.default=n},6345:(t,e,n)=>{t.exports=n(9163)},1008:(t,e,n)=>{"use strict";function o(t,e,n,o,r){return{sel:t,data:e,children:n,text:o,elm:r,key:void 0===e?void 0:e.key}}n.r(e),n.d(e,{h:()=>u,init:()=>_,thunk:()=>f});const r=o;var i=Array.isArray;function a(t){return"string"==typeof t||"number"==typeof t}const s={createElement:function(t){return document.createElement(t)},createElementNS:function(t,e){return document.createElementNS(t,e)},createTextNode:function(t){return document.createTextNode(t)},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,n){t.insertBefore(e,n)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},parentNode:function(t){return t.parentNode},nextSibling:function(t){return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},getTextContent:function(t){return t.textContent},isElement:function(t){return 1===t.nodeType},isText:function(t){return 3===t.nodeType},isComment:function(t){return 8===t.nodeType}};function c(t,e,n){if(t.ns="http://www.w3.org/2000/svg","foreignObject"!==n&&void 0!==e)for(var o=0;o<e.length;++o){var r=e[o].data;void 0!==r&&c(r,e[o].children,e[o].sel)}}function u(t,e,n){var r,s,u,d={};if(void 0!==n?(d=e,i(n)?r=n:a(n)?s=n:n&&n.sel&&(r=[n])):void 0!==e&&(i(e)?r=e:a(e)?s=e:e&&e.sel?r=[e]:d=e),void 0!==r)for(u=0;u<r.length;++u)a(r[u])&&(r[u]=o(void 0,void 0,void 0,r[u],void 0));return"s"!==t[0]||"v"!==t[1]||"g"!==t[2]||3!==t.length&&"."!==t[3]&&"#"!==t[3]||c(d,r,t),o(t,d,r,s,void 0)}function d(t,e){e.elm=t.elm,t.data.fn=e.data.fn,t.data.args=e.data.args,e.data=t.data,e.children=t.children,e.text=t.text,e.elm=t.elm}function l(t){var e=t.data;d(e.fn.apply(void 0,e.args),t)}function p(t,e){var n,o=t.data,r=e.data,i=o.args,a=r.args;if(o.fn===r.fn&&i.length===a.length){for(n=0;n<a.length;++n)if(i[n]!==a[n])return void d(r.fn.apply(void 0,a),e);d(t,e)}else d(r.fn.apply(void 0,a),e)}var f=function(t,e,n,o){return void 0===o&&(o=n,n=e,e=void 0),u(t,{key:e,hook:{init:l,prepatch:p},fn:n,args:o})};function h(t){return void 0===t}function y(t){return void 0!==t}var g=r("",{},[],void 0,void 0);function v(t,e){return t.key===e.key&&t.sel===e.sel}function m(t,e,n){var o,r,i,a={};for(o=e;o<=n;++o)null!=(i=t[o])&&void 0!==(r=i.key)&&(a[r]=o);return a}var b=["create","update","remove","destroy","pre","post"];function _(t,e){var n,o,c={},u=void 0!==e?e:s;for(n=0;n<b.length;++n)for(c[b[n]]=[],o=0;o<t.length;++o){var d=t[o][b[n]];void 0!==d&&c[b[n]].push(d)}function l(t,e){return function(){if(0==--e){var n=u.parentNode(t);u.removeChild(n,t)}}}function p(t,e){var n,o=t.data;void 0!==o&&y(n=o.hook)&&y(n=n.init)&&(n(t),o=t.data);var r=t.children,s=t.sel;if("!"===s)h(t.text)&&(t.text=""),t.elm=u.createComment(t.text);else if(void 0!==s){var d=s.indexOf("#"),l=s.indexOf(".",d),f=d>0?d:s.length,v=l>0?l:s.length,m=-1!==d||-1!==l?s.slice(0,Math.min(f,v)):s,b=t.elm=y(o)&&y(n=o.ns)?u.createElementNS(n,m):u.createElement(m);for(f<v&&b.setAttribute("id",s.slice(f+1,v)),l>0&&b.setAttribute("class",s.slice(v+1).replace(/\./g," ")),n=0;n<c.create.length;++n)c.create[n](g,t);if(i(r))for(n=0;n<r.length;++n){var _=r[n];null!=_&&u.appendChild(b,p(_,e))}else a(t.text)&&u.appendChild(b,u.createTextNode(t.text));y(n=t.data.hook)&&(n.create&&n.create(g,t),n.insert&&e.push(t))}else t.elm=u.createTextNode(t.text);return t.elm}function f(t,e,n,o,r,i){for(;o<=r;++o){var a=n[o];null!=a&&u.insertBefore(t,p(a,i),e)}}function _(t){var e,n,o=t.data;if(void 0!==o){for(y(e=o.hook)&&y(e=e.destroy)&&e(t),e=0;e<c.destroy.length;++e)c.destroy[e](t);if(void 0!==t.children)for(n=0;n<t.children.length;++n)null!=(e=t.children[n])&&"string"!=typeof e&&_(e)}}function w(t,e,n,o){for(;n<=o;++n){var r=void 0,i=void 0,a=void 0,s=e[n];if(null!=s)if(y(s.sel)){for(_(s),i=c.remove.length+1,a=l(s.elm,i),r=0;r<c.remove.length;++r)c.remove[r](s,a);y(r=s.data)&&y(r=r.hook)&&y(r=r.remove)?r(s,a):a()}else u.removeChild(t,s.elm)}}function P(t,e,n){var o,r;y(o=e.data)&&y(r=o.hook)&&y(o=r.prepatch)&&o(t,e);var i=e.elm=t.elm,a=t.children,s=e.children;if(t!==e){if(void 0!==e.data){for(o=0;o<c.update.length;++o)c.update[o](t,e);y(o=e.data.hook)&&y(o=o.update)&&o(t,e)}h(e.text)?y(a)&&y(s)?a!==s&&function(t,e,n,o){for(var r,i,a,s=0,c=0,d=e.length-1,l=e[0],y=e[d],g=n.length-1,b=n[0],_=n[g];s<=d&&c<=g;)null==l?l=e[++s]:null==y?y=e[--d]:null==b?b=n[++c]:null==_?_=n[--g]:v(l,b)?(P(l,b,o),l=e[++s],b=n[++c]):v(y,_)?(P(y,_,o),y=e[--d],_=n[--g]):v(l,_)?(P(l,_,o),u.insertBefore(t,l.elm,u.nextSibling(y.elm)),l=e[++s],_=n[--g]):v(y,b)?(P(y,b,o),u.insertBefore(t,y.elm,l.elm),y=e[--d],b=n[++c]):(void 0===r&&(r=m(e,s,d)),h(i=r[b.key])?(u.insertBefore(t,p(b,o),l.elm),b=n[++c]):((a=e[i]).sel!==b.sel?u.insertBefore(t,p(b,o),l.elm):(P(a,b,o),e[i]=void 0,u.insertBefore(t,a.elm,l.elm)),b=n[++c]));(s<=d||c<=g)&&(s>d?f(t,null==n[g+1]?null:n[g+1].elm,n,c,g,o):w(t,e,s,d))}(i,a,s,n):y(s)?(y(t.text)&&u.setTextContent(i,""),f(i,null,s,0,s.length-1,n)):y(a)?w(i,a,0,a.length-1):y(t.text)&&u.setTextContent(i,""):t.text!==e.text&&(y(a)&&w(i,a,0,a.length-1),u.setTextContent(i,e.text)),y(r)&&y(o=r.postpatch)&&o(t,e)}}return function(t,e){var n,o,i,a=[];for(n=0;n<c.pre.length;++n)c.pre[n]();for(function(t){return void 0!==t.sel}(t)||(t=function(t){var e=t.id?"#"+t.id:"",n=t.className?"."+t.className.split(" ").join("."):"";return r(u.tagName(t).toLowerCase()+e+n,{},[],void 0,t)}(t)),v(t,e)?P(t,e,a):(o=t.elm,i=u.parentNode(o),p(e,a),null!==i&&(u.insertBefore(i,e.elm,u.nextSibling(o)),w(i,[t],0,0))),n=0;n<a.length;++n)a[n].data.hook.insert(a[n]);for(n=0;n<c.post.length;++n)c.post[n]();return e}}},6436:(t,e)=>{"use strict";function n(t,e){var n,o=e.elm,r=t.data.attrs,i=e.data.attrs;if((r||i)&&r!==i){for(n in r=r||{},i=i||{}){var a=i[n];r[n]!==a&&(!0===a?o.setAttribute(n,""):!1===a?o.removeAttribute(n):120!==n.charCodeAt(0)?o.setAttribute(n,a):58===n.charCodeAt(3)?o.setAttributeNS("http://www.w3.org/XML/1998/namespace",n,a):58===n.charCodeAt(5)?o.setAttributeNS("http://www.w3.org/1999/xlink",n,a):o.setAttribute(n,a))}for(n in r)n in i||o.removeAttribute(n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.attributesModule={create:n,update:n},e.default=e.attributesModule},5542:(t,e)=>{"use strict";function n(t,e){var n,o,r=e.elm,i=t.data.class,a=e.data.class;if((i||a)&&i!==a){for(o in a=a||{},i=i||{})a[o]||r.classList.remove(o);for(o in a)(n=a[o])!==i[o]&&r.classList[n?"add":"remove"](o)}}Object.defineProperty(e,"__esModule",{value:!0}),e.classModule={create:n,update:n},e.default=e.classModule},4767:(t,e)=>{"use strict";function n(t,e,o){if("function"==typeof t)t.call(e,o,e);else if("object"==typeof t)if("function"==typeof t[0])if(2===t.length)t[0].call(e,t[1],o,e);else{var r=t.slice(1);r.push(o),r.push(e),t[0].apply(e,r)}else for(var i=0;i<t.length;i++)n(t[i],e,o)}function o(t,e){var o=t.type,r=e.data.on;r&&r[o]&&n(r[o],e,t)}function r(t,e){var n,r=t.data.on,i=t.listener,a=t.elm,s=e&&e.data.on,c=e&&e.elm;if(r!==s){if(r&&i)if(s)for(n in r)s[n]||a.removeEventListener(n,i,!1);else for(n in r)a.removeEventListener(n,i,!1);if(s){var u=e.listener=t.listener||function t(e){o(e,t.vnode)};if(u.vnode=e,r)for(n in s)r[n]||c.addEventListener(n,u,!1);else for(n in s)c.addEventListener(n,u,!1)}}}Object.defineProperty(e,"__esModule",{value:!0}),e.eventListenersModule={create:r,update:r,destroy:r},e.default=e.eventListenersModule},4958:(t,e)=>{"use strict";function n(t,e){var n,o,r=e.elm,i=t.data.props,a=e.data.props;if((i||a)&&i!==a){for(n in a=a||{},i=i||{})a[n]||delete r[n];for(n in a)o=a[n],i[n]===o||"value"===n&&r[n]===o||(r[n]=o)}}Object.defineProperty(e,"__esModule",{value:!0}),e.propsModule={create:n,update:n},e.default=e.propsModule},4548:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="undefined"!=typeof window&&window.requestAnimationFrame.bind(window)||setTimeout,o=!1;function r(t,e,o){var r;r=function(){t[e]=o},n((function(){n(r)}))}function i(t,e){var n,o,i=e.elm,a=t.data.style,s=e.data.style;if((a||s)&&a!==s){s=s||{};var c="delayed"in(a=a||{});for(o in a)s[o]||("-"===o[0]&&"-"===o[1]?i.style.removeProperty(o):i.style[o]="");for(o in s)if(n=s[o],"delayed"===o&&s.delayed)for(var u in s.delayed)n=s.delayed[u],c&&n===a.delayed[u]||r(i.style,u,n);else"remove"!==o&&n!==a[o]&&("-"===o[0]&&"-"===o[1]?i.style.setProperty(o,n):i.style[o]=n)}}e.styleModule={pre:function(){o=!1},create:i,update:i,destroy:function(t){var e,n,o=t.elm,r=t.data.style;if(r&&(e=r.destroy))for(n in e)o.style[n]=e[n]},remove:function(t,e){var n=t.data.style;if(n&&n.remove){o||(getComputedStyle(document.body).transform,o=!0);var r,i=t.elm,a=0,s=n.remove,c=0,u=[];for(r in s)u.push(r),i.style[r]=s[r];for(var d=getComputedStyle(i)["transition-property"].split(", ");a<d.length;++a)-1!==u.indexOf(d[a])&&c++;i.addEventListener("transitionend",(function(t){t.target===i&&--c,0===c&&e()}))}else e()}},e.default=e.styleModule},1739:t=>{t.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}}}]);